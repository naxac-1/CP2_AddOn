-- -*- mode: lua; encoding: windows-1251 -*-
local math_random = math.random

function first_run_zahar()
	return has_alife_info("atak_larger_done")
		or has_alife_info("neud_kvest")
end

-- "Заглушка" для диалога с Китом
function is_level_atp( fs, ss )
	return level.name() == "atp_for_test22"
end

function barman_answer()
	news_manager.send_tip("barman_money_answer", nil, "barman", 20000)
end
function sidor_answer()
	news_manager.send_tip("sidor_money_answer", nil, "sid", 20000)
end
--' спавним рацию Волка на свалке
function spawn_add_resiver()
	AI:create_free("sak_resiver",vector():set(-186.264,-3.492,94.656),38921,338)
end

--' проверим наличие пушки для Лиса
function fox_kriss_have()
	return inventory.search("wpn_spas12",1) ~= false
end

--' отдадим ствол Лису
function fox_kriss_done(first_speaker, second_speaker)
	inventory.out_items("wpn_spas12",1)
	aem_manager.manage_money(1000, "in")
	inventory.give_items("grenade_fb",1)
	inventory.give_items("grenade_he",1)
	inventory.give_items("af_vyvert",1)
	inventory.give_items("af_blood",1)
	inventory.give_items("ammo_12x70_kart",2)
end

--' эта функция проверяет наличие минигана
function atp_propusk_have() 
	return inventory.search("wpn_m_134_baty",1) ~= false
end

--' отдадим миниган Адреналину, получим награду и Адреналин - друг
function atp_propusk_done(first_speaker, second_speaker)
	inventory.out_items("wpn_m_134_baty",1)
	dialogs.relocate_item_section(second_speaker, "wpn_svd_m1","in")
	dialogs.relocate_item_section(second_speaker, "af_spirit_2","in")
	second_speaker:set_relation(game_object.friend, first_speaker)
end

--' проверим наличие маскировочной экзы
function arhara_ekza_have()
	return meceniy_work.have_meceniy_outfit()
end 

--' отдадим экзу Воронину и получим награду
function arhara_ekza_done(first_speaker, second_speaker)
	meceniy_work.give_meceniy_outfit()
	dialogs.relocate_item_section(second_speaker, "af_kol_4","in")
	dialogs.relocate_item_section(second_speaker, "af_armor_4","in")
	second_speaker:set_relation(game_object.friend, first_speaker)
end

--' спавним нашу маскировочную экзу
function ekza()
	AI:create_free("meceniy_outfit_new",vector():set(113.509,0.686,-24.954),539883,2823)
end

--' проверим наличие тисков для Шурупа
function atp_propusk_shurup_have()
	return inventory.search("tisku_arhara",1) ~= false
end

--' спавним тиски для Шурупа
function spawn_tisku()
	AI:create_free("tisku_arhara",vector():set(109.575,-9.599,-301.339),535499,2824)
end

--' отдача тисков Шурупу, получим мозг и картечь в награду, Шуруп друг
function atp_propusk_shurup_done(first_speaker, second_speaker)
	inventory.out_items("tisku_arhara",1)
	dialogs.relocate_item_section(second_speaker, "mozg","in")
	inventory.give_items("ammo_12x70_kart", 2)
	second_speaker:set_relation(game_object.friend, first_speaker)
end

--' проверим наличие антизомбина
function chaes_perexod_have()
	return inventory.search("antizombie",1) ~= false
end

--' отдадим антизомбин
function chaes_perexod_done(first_speaker, second_speaker)
	inventory.out_items("antizombie",1)
	second_speaker:set_relation(game_object.friend, first_speaker)
end

--' спавним наши телепорты в Саркофаге
function arhara_teleport()
	naxac.create_treasure(
		vector():set(37.431,56.184,32.087), 4591, 2417,
		{ ["arhara_tele"] = 5, ["wpn_aa12"] = 1, ["meceniy_outfit_new"] = 1 }
	)
end

--' спавним наш мозг на ЧАЭС2
function mozg()
	AI:create_free("mozg",vector():set(206.574,-0.102,379.099),79782,2580)
	AI:create("tank_spawn_zasada4",vector():set(206.574,-0.102,378.099),79782,2580)
	AI:create("tank_spawn_zasada6",vector():set(206.574,-0.102,377.099),79782,2580)
	AI:create_free("mozg",vector():set(505.838,11.748,352.584),189400,2619)
	AI:create("tank_spawn_zasada1",vector():set(504.838,11.748,352.584),189400,2619)
	AI:create("tank_spawn_zasada7",vector():set(506.838,11.748,352.584),189400,2619)
	AI:create_free("mozg",vector():set(1018.527,-0.001,382.414),263677,2650)
	AI:create_free("mozg",vector():set(1018.527,-0.001,382.414),263677,2650)
	AI:create_free("mozg",vector():set(1018.527,-0.001,382.414),263677,2650)
	AI:create("tank_spawn_zasada6",vector():set(1018.827,-0.001,382.414),263677,2650)
	AI:create("tank_spawn_zasada2",vector():set(1018.427,-0.001,382.414),263677,2650)
	AI:create_free("mozg",vector():set(505.838,11.748,352.584),189400,2619)
	AI:create_free("mozg",vector():set(505.838,11.748,352.584),189400,2619)
	AI:create_free("mozg",vector():set(505.838,11.748,352.584),189400,2619)
	AI:create("tank_spawn_zasada5",vector():set(505.238,11.748,352.584),189400,2619)
	AI:create("tank_spawn_zasada7",vector():set(505.038,11.748,352.584),189400,2619)
	AI:create_free("mozg",vector():set(206.574,-0.102,379.099),79782,2580)
	AI:create_free("mozg",vector():set(206.574,-0.102,379.099),79782,2580)
	AI:create("tank_spawn_zasada1",vector():set(206.274,-0.102,379.099),79782,2580)
	AI:create("tank_spawn_zasada5",vector():set(206.874,-0.102,379.099),79782,2580)
	AI:create_free("mozg",vector():set(1018.527,-0.001,382.414),263677,2650)
	AI:create("tank_spawn_zasada3",vector():set(1018.727,-0.001,382.414),263677,2650)
	AI:create_free("mozg",vector():set(322.26416015625,-2.5768759250641,-295.98400878906),838294,2847)
	AI:create("tank_spawn_zasada7",vector():set(326.26416015625,-2.5768759250641,-295.98400878906),838294,2847)
end
	
--' Раз Ломти не спавнятся, заставим, да ещё и контролёров добавим
--' ..Виноваты были две одинаковые функции 'spawn_art' в new_spawn.script
function spawn_arts()
	AI:create_free("gold_art",vector():set(294.396,16.796,68.041),102440,2594)
	AI:create("tank_spawn_zasada4",vector():set(294.896,16.796,68.041),102440,2594)
	AI:create_free("gold_art",vector():set(69.090,4.981,113.450),54000,2536)
	AI:create("tank_spawn_zasada5",vector():set(69.290,4.981,113.450),54000,2536)
	AI:create_free("gold_art",vector():set(15.024,4.457,148.660),33501,2525)
	AI:create("tank_spawn_zasada6",vector():set(15.424,4.457,148.660),33501,2525)
	AI:create_free("gold_art",vector():set(20.866,3.621,209.016),34266,2524)
	AI:create("tank_spawn_zasada7",vector():set(20.466,3.621,209.016),34266,2524)
	AI:create_free("gold_art",vector():set(82.715,8.726,168.478),57448,2557)
	AI:create("tank_spawn_zasada1",vector():set(82.315,8.726,168.478),57448,2557)
	AI:create_free("gold_art",vector():set(184.589,21.803,188.475),74473,2569)
	AI:create("tank_spawn_zasada2",vector():set(184.289,21.803,188.475),74473,2569)
	AI:create_free("gold_art",vector():set(-2.046,17.001,277.747),24758,2541)
	AI:create("tank_spawn_zasada3",vector():set(-2.086,17.001,277.747),24758,2541)
	AI:create_free("gold_art",vector():set(96.206,50.358,79.338),59035,2566)
	AI:create("tank_spawn_zasada7",vector():set(96.506,50.358,79.338),59035,2566) 
	AI:create_free("gold_art",vector():set(294.066,16.822,69.239),102227,2594)
	AI:create("tank_spawn_zasada5",vector():set(294.026,16.822,69.239),102227,2594)
	AI:create_free("gold_art",vector():set(429.023,8.506,159.034),143946,2599)
	AI:create("tank_spawn_zasada3",vector():set(429.063,8.506,159.034),143946,2599)
	AI:create_free("gold_art",vector():set(456.191,8.500,158.333),149725,2599)
	AI:create("tank_spawn_zasada5",vector():set(456.391,8.500,158.333),149725,2599)
	AI:create_free("gold_art",vector():set(573.650,5.041,126.056),170815,2627)
	AI:create("tank_spawn_zasada7",vector():set(573.850,5.041,126.056),170815,2627)
	AI:create_free("gold_art",vector():set(535.685,-0.085,130.346),169069,2627)
	AI:create("tank_spawn_zasada2",vector():set(535.625,-0.085,130.346),169069,2627)
	AI:create_free("gold_art",vector():set(692.553,-0.117,165.552),194971,2623)
	AI:create("tank_spawn_zasada6",vector():set(692.853,-0.117,165.552),194971,2623)
	AI:create_free("gold_art",vector():set(758.592,-0.085,354.072),203677,2655)
	AI:create("tank_spawn_zasada5",vector():set(758.532,-0.085,354.072),203677,2655)
	AI:create_free("gold_art",vector():set(577.391,9.090,201.674),173475,2631)
	AI:create("tank_spawn_zasada6",vector():set(577.341,9.090,201.674),173475,2631)
	AI:create_free("m_controller_old",vector():set(294.396,16.796,68.041),102440,2594)
	AI:create("tank_spawn_zasada6",vector():set(295.396,16.796,68.041),102440,2594)
	AI:create_free("m_controller_old",vector():set(15.024,4.457,148.660),33501,2525)
	AI:create("tank_spawn_zasada4",vector():set(82.715,8.726,168.478),57448,2557)
	AI:create_free("m_controller_old",vector():set(184.589,21.803,188.475),74473,2569)
	AI:create("tank_spawn_zasada6",vector():set(185.589,21.803,188.475),74473,2569)
	AI:create("tank_spawn_zasada7",vector():set(294.066,16.822,69.239),102227,2594)
	AI:create("tank_spawn_zasada6",vector():set(456.191,8.500,158.333),149725,2599)
	AI:create_free("m_controller_old",vector():set(535.685,-0.085,130.346),169069,2627)
	AI:create("tank_spawn_zasada2",vector():set(534.685,-0.085,130.346),169069,2627)
	AI:create_free("m_controller_old",vector():set(692.553,-0.117,165.552),194971,2623)
	AI:create("tank_spawn_zasada6",vector():set(691.553,-0.117,165.552),194971,2623)
	AI:create("tank_spawn_zasada3",vector():set(577.391,9.090,201.674),173475,2631)
end

--' проверим наличие диска у ГГ
function arh_disk_have()
	return inventory.search("disk_adren",1) ~= false
end

--' отдадим диск Адреналину и получим награду
function arh_disk_done(first_speaker, second_speaker)
	inventory.out_items("disk_adren",1)
	dialogs.relocate_item_section(second_speaker, "caps_mincer","in")
	dialogs.relocate_item_section(second_speaker, "caps_electra","in")
	dialogs.relocate_item_section(second_speaker, "wpn_ak47_sk1","in")
end

--' проверим наличие пуддинга для Акима
function akim_pudd_have()
	return inventory.search("af_pudd_4",1) ~= false
end

--' проверим наличие финансов за ФН
function akim_have_money_120000(actor,npc)
	return actor:money() > 120000
end

--' отдадим пудинг Акиму и получим  ФН
function give_akim_pudd(first_speaker, second_speaker)
	inventory.out_items("af_pudd_4",1)
	dialogs.relocate_item_section(second_speaker, "wpn_fn2000_sniper","in")
end

--' отдадим деньги Акиму за снайперку
function akim_give_money_120000(t1,t2)
	local npc=t1
	if npc:id()==Actor:id() then
		npc=t2
	end
	dialogs.relocate_money(npc,120000,"out")
end

--' обмен патронов для минигана у Акима
function akim_obmen6_have(actor,npc)
	return actor:money() > 10000
end
function akim_obmen6(actor,npc)
	dialogs.relocate_money(npc,10000,"out")
	dialogs.relocate_item_section(actor, "ammo_minigun","in")
end

function akim_obmen7_have(actor,npc)
	return actor:money() > 2000 and inventory.search("af_gravi",1)
end
function akim_obmen7(actor,npc)
	dialogs.relocate_money(npc,2000,"out")
	inventory.out_items("af_gravi",1)
	dialogs.relocate_item_section(actor, "ammo_minigun","in")
end

function akim_obmen8_have(actor,npc)
	return actor:money() > 5000 and inventory.search("af_medusa",1)
end
function akim_obmen8(actor,npc)
	dialogs.relocate_money(npc,5000,"out")
	inventory.out_items("af_medusa",1)
	dialogs.relocate_item_section(actor, "ammo_minigun","in")
end

--' Сахар дал арт на дорожку 
function sahar_dal_art(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "af_pudd_3","in")
end

--' проверим наличие сумки для Сахара
function sahar_sumka_have()
	return inventory.search("sumka_arhara",1) ~= false
end

--' отдадим сумку Сахару
function sahar_sumka_done(first_speaker, second_speaker)
	inventory.out_items("sumka_arhara",1)
end

--' а это рюкзачок для минигана в Припяти
function new_inventory15()
	AI:create_free("m_inventory_box15", vector():set(192.30499267578,28.663299560547,209.28273010254),260026,2219)
end

--' спавним наши патроны и миниган на крыше
function paron_krusha()
	AI:create_free("ammo_minigun",vector():set(192.304,28.663,209.282),260026,2219)
	AI:create_free("ammo_minigun",vector():set(192.304,28.663,209.282),260026,2219)
end

--' проверим наличие медальона у ГГ
function med_dok_have()
	return inventory.search("doc_medal",1) ~= false
end

--' отдадим медальон Доку
function med_dok_done(first_speaker, second_speaker)
	inventory.out_items("doc_medal",1)
end

--' Док вернул медальон
function med_dok_obrat(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "doc_medal","in")
end

--' проверим наличие финансов на рецепт "гусеницы"
function sahar_have_money_50000(actor,npc)
	return actor:money() > 50000
end

--' отдадим деньги Сахару
function sahar_give_money_50000(t1,t2)    
	local npc=t1
	if npc:id()==Actor:id() then npc=t2 end
	dialogs.relocate_money(npc,50000,"out")
end    

--' проверим наличие "выверта" за замок для Акима
function akim_vyvert_have()
	return inventory.search("af_vyvert",1) ~= false
end

--' проверим наличие финансов
function akim_have_money_vyvert_20000(actor,npc)
	return actor:money() > 10000
end

--' отдадим "выверт" Акиму и получим  замок
function give_akim_vyvert(first_speaker, second_speaker)
	inventory.out_items("af_vyvert",1)
	dialogs.relocate_item_section(second_speaker, "zamok","in")
end

--' отдадим деньги Акиму за замок
function akim_give_money_vyvert_20000(t1,t2)
	local npc=t1
	if npc:id()==Actor:id() then npc=t2 end
	dialogs.relocate_money(npc,10000,"out")
end

--' парочка бюреров на баре
function spawn_burer_bar()
	AI:create_free("burer_strong",vector():set(99.368,1.213,-122.928),45947,1173)
	AI:create_free("burer_strong",vector():set(158.990,4.012,-108.175),45947,1173)
end

--' проверим наличие вороньих яиц у ГГ
function arhara_omlet_have()
	return inventory.search("vorona_egg",10) ~= false
end

--' отдадим яйца Повару и получим пушку
function arhara_omlet_done(first_speaker, second_speaker)
	inventory.out_items_all("vorona_egg")
	dialogs.relocate_item_section(second_speaker, "wpn_rg6_m1","in")
end
-- Akill begin Лекарство теперь на блокпосту + парочка вояк для веселья
--' спавним наши бутылочки с лекарством
function butilka()
	local t = { {
		pos = {-140.25267028809,-28.525129318237,-356.89068603516}, lv = 110480, gv = 19
	}, {
		pos = {-139.74499511719,-28.524593353271,-356.88391113281}, lv = 110480, gv = 19
	}, {
		pos = {-139.23518371582,-28.524532318115,-356.93264770508}, lv = 111250, gv = 19
	}, {
		pos = {-135.88641357422,-28.738632202148,-359.15521240234}, lv = 114324, gv = 19
	}, {
		pos = {-136.90090942383,-28.73921585083,-359.18383789063}, lv = 113558, gv = 18
	} }
	for i, v in ipairs(t) do
		AI:create_free("lekarstvo",vector():set(unpack(v.pos)),v.lv,v.gv)
	end
	AI:create("zasada_tonnel_agro_3",vector():set(-163.62464904785,-25.436117172241,-356.86444091797),85709,31)
	AI:create("zasada_tonnel_agro_1",vector():set(-168.9747467041,-25.435110092163,-352.73577880859),81063,31)
	AI:create("zasada_tonnel_agro_2",vector():set(-178.65881347656,-29.065357208252,-364.28756713867),71841,30)
	AI:create("zasada_blockpost_1",vector():set(-132.80337524414,-25.790529251099,-356.68655395508),118106,19)
	AI:create("zasada_blockpost_3",vector():set(-135.33158874512,-30.174585342407,-397.16305541992),115787,21)
	AI:create("agro_elite_soldier",vector():set(-113.38027954102,-30.475996017456,-364.5309753418),142107,24)
end
-- Akill end
--' проверим наличие лекарства для Акима
function arhara_omlet_akim_have()
	return inventory.search("lekarstvo",3) ~= false
end

--' отдадим лекарство Акиму
function arhara_omlet_akim_done(first_speaker, second_speaker)
	inventory.out_items_all("lekarstvo")
end

--' спавним вороньи яйца
function vorona_egg_spawn()
	local t = {
		{ pos = {-34.258,1.229,61.552},     lv = 159972, gv = 2881, cnt = 4 },
		{ pos = {4.979,1.458,117.221},      lv = 192133, gv = 2881, cnt = 3 },
		{ pos = {110.141,2.509,131.046},    lv = 278456, gv = 2885, cnt = 3 },
		{ pos = {-136.771,-0.184,-148.663}, lv = 79878,  gv = 2882, cnt = 3 },
		{ pos = {-163.050,2.087,-161.024},  lv = 58073,  gv = 2882, cnt = 2 }
	}
	for i, v in ipairs( t ) do
		for j = 1, v.cnt do
			AI:create_free( "vorona_egg", vector():set( unpack( v.pos ) ), v.lv, v.gv )
		end
	end
	AI:create_free("controller_senator",vector():set(-123.09496307373,9.1040058135986,101.61030578613),90668,2881)
	AI:create_free("controller_babka",vector():set(-199.84088134766,-0.2078532576561,-121.52265167236),29582,2882)
end

--' а это рюкзачок для минигана в Пещере
function new_inventory16()
	AI:create_free("m_inventory_box16", vector():set(-0.047491822391748,-2.4808914661407,-9.304651260376),32285,2880)
end

--' спавним сердце полтергейста и скелеты в Пещере
function af_part_monolit_spawn()
	AI:create_free("af_part_monolit",vector():set(0.101,-2.429,-8.607),32286,2880)
end

--' отдадим монолит Шахтёру, а заодно и весь скарб
function arhara_shaxter_done(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "shaxter_tele","in")
end

--' спавним фонарики
function fonarik_les()
	AI:create_free("fonarik",vector():set(-36.641,0.670,-146.536),158148,2882)
	AI:create_free("fonarik",vector():set(-36.641,0.670,-146.536),158148,2882)
end

--' эта функция проверяет наличие 2 фонариков
function shaxter_fonar_dost_have() 
	return inventory.search("fonarik",2) ~= false
end

--' отдадим фонарики шахтёру и получим  "Сердце полтергейста"
function shaxter_fonar_dost_done(first_speaker, second_speaker)
	inventory.out_items("fonarik",2)
	dialogs.relocate_item_section(second_speaker, "af_part_monolit","in")
end

--' спавним кубик для Акима
function kubik_spawn()
	AI:create_free("kubik",vector():set(-6.754,9.126,-98.030),165824,821)
end

--' эта функция проверяет наличие кубика
function akim_kubik_nayti_have() 
	return inventory.search("kubik",1) ~= false
end

--' отдадим кубик Акиму
function akim_kubik_nayti_done(first_speaker, second_speaker)
	inventory.out_items("kubik",1)
end

--' спавним книгу Шахтёра
function book_xabarych_spawn()
	AI:create_free("book_xabarych",vector():set(-218.918,0.026,-223.327),14359,2882)
end

--' проверим наличие книги
function shax_kniga_naity_have() 
	return inventory.search("book_xabarych",1) ~= false
end

--' отдадим книгу Шахтёру и получим  "микроб" и Ремингтон 
function shax_kniga_naity_done(first_speaker, second_speaker)
	inventory.out_items("book_xabarych",1)
	dialogs.relocate_item_section(second_speaker, "artifact_electro_crystal_thorn","in")
	dialogs.relocate_item_section(second_speaker, "wpn_rem870_magnum","in")
end
-- Akill begin
--' спавним клад и "микроба"
function klad_spawn()
	AI:create_free("a_inventory_box56",vector():set(-91.327941894531,-2.0939588546753,-28.991931915283),18750,2875)
	AI:create_free("artifact_electro_crystal_thorn",vector():set(-89.472,-2.490,-21.391),19110,2875)
	AI:create_free("af_eye_voron",vector():set(-89.772,-2.490,-21.691),19110,2875)
	AI:create_free("scelet_strong",vector():set(-92.451225280762,2.7269945144653,5.9352955818176),18375,2870)
	AI:create_free("m_poltergeist_dd",vector():set(-92.451225280762,2.7269945144653,5.9352955818176),18375,2870)
	AI:create_free("m_controller_act",vector():set(-92.451225280762,2.7269945144653,5.9352955818176),18375,2870)
	AI:create_free("poltergeist_build",vector():set(-92.451225280762,2.7269945144653,5.9352955818176),18375,2870)
	AI:create_free("scelet_strong",vector():set(-92.451225280762,2.7269945144653,5.9352955818176),18375,2870)
	AI:create_free("carlic",vector():set(-92.451225280762,2.7269945144653,5.9352955818176),18375,2870)
	AI:create_free("carlic",vector():set(-92.451225280762,2.7269945144653,5.9352955818176),18375,2870)
	AI:create_free("controller_senator",vector():set(-91.327941894531,-2.0939588546753,-28.991931915283),18750,2875)
end
-- Akill end
--' проверим наличие клада для Лысого
function lysyi_klad_nayti_have() 
	return inventory.search("money",3) ~= false and
		inventory.search("money1",3) ~= false and
		inventory.search("money2",3) ~= false and
		inventory.search("money3",3) ~= false
end

--' заспавним монстриков в Пещере и несколько артов
function monstr_spawn_peshera()
	AI:create_free("pseudodog_strong",vector():set(-112.136,2.497,5.440),12551,2870)
	AI:create_free("pseudodog_big",vector():set(-112.136,2.497,5.440),12551,2870)
	AI:create_free("pseudodog_strong",vector():set(-112.136,2.497,5.440),12551,2870)
	AI:create_free("pseudodog_big",vector():set(-112.136,2.497,5.440),12551,2870)
	AI:create_free("zombie_hell1",vector():set(-112.1359,2.497,5.440),12551,2870)
	AI:create_free("zombie_hell2",vector():set(-112.1359,2.497,5.440),12551,2870)
	AI:create_free("zombie_babka_strong",vector():set(-32.242,-2.364,17.576),30991,2878)
	AI:create_free("zombie_babka_normal",vector():set(-32.242,-2.364,17.576),30991,2878)
	AI:create_free("zombie_hell3",vector():set(-32.2419,-2.364,17.576),30991,2878)
	AI:create_free("zombie_hell15",vector():set(-32.2419,-2.364,17.576),30991,2878)
	AI:create_free("zombie_trup",vector():set(-32.2419,-2.364,17.576),30991,2878)
	AI:create_free("zombie_babka_weak",vector():set(-32.578,-2.469,19.725),30910,2878)
	AI:create_free("zombie_hell8",vector():set(-32.578,-2.469,19.725),30910,2878)
	AI:create_free("zombie_hell11",vector():set(-61.608,2.488,19.820),26067,2870)
	AI:create_free("zombie_hell15",vector():set(-61.608,2.488,19.820),26067,2870)
	AI:create_free("zombie_strong",vector():set(-61.608,2.488,19.820),26067,2870)
	AI:create_free("zombie_normal",vector():set(-61.6079,2.488,19.820),26067,2870)
	AI:create_free("zombie_hell10",vector():set(-61.6079,2.488,19.820),26067,2870)
	AI:create_free("zombie_hell4",vector():set(-61.6079,2.488,19.820),26067,2870)
	AI:create_free("af_medusa",vector():set(-94.865,8.402,-111.352),17544,2880)
	AI:create_free("af_gravi",vector():set(-80.858,-2.481,-18.319),21213,2875)
	AI:create_free("af_fireball",vector():set(-109.260,2.498,6.314),13261,2870)
	AI:create_free("af_buliz",vector():set(-136.571,1.497,-6.945),6973,2866)
end
-- Akill begin
--' отдадим клад Лысому
function lysyi_klad_nayti_done(first_speaker, second_speaker)
	inventory.out_items("money",3)
	inventory.out_items("money1",3)
	inventory.out_items("money2",3)
	inventory.out_items("money3",3)
	second_speaker:set_relation(game_object.friend, first_speaker)
end
-- Akill end
--' получим бабки и MP-5 PDW от Лысого
function lysyi_babki_vzyt_45000(t1,t2)
	local npc=t1
	if npc:id()==Actor:id() then npc=t2 end
	dialogs.relocate_money(npc,45000,"in")
	dialogs.relocate_item_section(npc, "wpn_mp5k_pdw","in")
end

--' повторно заспавним монстриков в Пещере и несколько артов
function monstr1_spawn1_peshera1()
	AI:create_free("m_poltergeist_strong_flame",vector():set(-67.926,-12.681,76.354),24792,2873)
	AI:create_free("bloodsucker_strong",vector():set(-136.398,2.679,26.343),7031,2866)
	AI:create_free("bloodsucker_strong",vector():set(-136.398,2.679,26.343),7031,2866)
	AI:create_free("gigant_strong",vector():set(-84.236,-2.719,57.208),20589,2871)
	AI:create_free("gigant_strong",vector():set(-84.236,-2.719,57.208),20589,2871)
	AI:create_free("af_rusty_thorn",vector():set(-93.115,-12.629,18.815),18189,2872)
	AI:create_free("af_rusty_sea-urchin",vector():set(-99.898,-12.647,48.704),16000,2869)
end

--' заспавним "изумрудный выверт" в Забытом Лесу
function spawn_vyvert_green()
	AI:create_free("af_vyvert_green",vector():set(5.379,-0.00,222.374),192846,2883)
end

--' спавним ПДА Стрелка
function str_pda_spawn()
	AI:create_free("strelok_pda",vector():set(-98.916,9.947,-122.306),16319,2880)
	AI:create_free("ammo_9x39_izomorf",vector():set(-98.915,9.947,-122.306),16319,2880)
	AI:create_free("ammo_9x39_izomorf",vector():set(-98.915,9.947,-122.306),16319,2880)
	AI:create_free("af_babka_1",vector():set(-98.320,9.614,-121.451),16574,2880)
end

--' проверим наличие арта
function pda_shaxt_strelok_naity_have() 
	return inventory.search("af_armor_4",1) ~= false
end

--' отдадим арт Шахтёру и он друг
function pda_shaxt_strelok_naity_done(first_speaker, second_speaker)
	inventory.out_items("af_armor_4",1)
	second_speaker:set_relation(game_object.friend, first_speaker)
end

--' проверим наличие "вывертов" и микросхем для Долговязого
function dolgovyzui_lentyi_have()
	return inventory.search("af_vyvert",5) ~= false and
		inventory.search("microshema",10) ~= false
end

--' спавним маленькие термосы
function termos_small_spawn()
	AI:create_free("termos_small",vector():set(-111.933,2.804,101.580),7817,2216)
	AI:create_free("termos_small",vector():set(-112.624,2.804,101.655),7817,2216)
	AI:create_free("termos_small",vector():set(-111.933,2.804,101.580),7817,2216)
	AI:create_free("termos_small",vector():set(-111.933,2.804,101.580),7817,2216)
	AI:create_free("termos_small",vector():set(-111.933,2.804,101.580),7817,2216)
end

--' эта функция проверяет наличие термосов
function voronin_termos_naity_have() 
	return inventory.search("termos_big",5) ~= false and
		inventory.search("termos_small",5) ~= false
end

--' отдадим термосы Воронину
function voronin_termos_naity_done(first_speaker, second_speaker)
	inventory.out_items("termos_big",5)
	inventory.out_items("termos_small",5)
end

--' спавним подарок Воронина
function voronin_prezent()
	local spawn = {
		["acumm"] = 6,
		["ammo_7.62x39_k"] = 3,
		["ammo_m209"] = 3,
		["ammo_vog-25"] = 4,
		["ammo_vog-25p"] = 3
	}
	local o
	for s, n in pairs(spawn) do
		for i = 1, n do
			o = AI:create_free(s,vector():set(37.545082092285,12.717246055603,-71.757217407227),119657,819)
			netpk:modify(o, {object_flags = -241}, netpk.fState)
		end
	end
end

--' спавним ремкомплекты
function remkomplekt_spawn()
	AI:create_free("kuvalda", vector():set(138.305,-6.021,13.806), 576283, 2832)
	AI:create_free("kuvalda", vector():set(160.75564575195,-5.8302555084229,-54.942893981934), 607741, 2833)
	AI:create_free("kluch", vector():set(-55.443,-6.437,-21.472), 255385, 1605)
	AI:create_free("kluch", vector():set(-55.471,-6.436,-21.143), 255386, 1605)
	AI:create_free("otvertka", vector():set(113.399,-1.398,3.550), 540952, 2826)
	AI:create_free("otvertka", vector():set(113.173,-1.398,3.539), 540952, 2826)
	AI:create_free("af_ameba_slime", vector():set(-143.967,-2.800,-11.277), 168374, 2798)
	
	AI:create_free("zombie_babka_weak",vector():set(-78.585,-5.721,-96.389),264461,2808)
	AI:create_free("zombie_babka_normal",vector():set(-80.783,-6.114,-68.725),261420,2808)
	AI:create_free("zombie_babka_strong",vector():set(-100.377,-6.11,-43.543),233002,2798)
	AI:create_free("zombie_immortal",vector():set(-93.483,-6.470,6.115),242276,2809)
	AI:create_free("zombie_strong",vector():set(-149.506,-3.846,6.074),160198,2796)
end

--' проверим наличие ремкомплектов
function petr_sidor_vzyt_have() 
	return inventory.search("kuvalda",2) ~= false and
		inventory.search("kluch",2) ~= false and
		inventory.search("otvertka",2) ~= false
end

--' отдадим ремкомплекты Сидору
function petr_sidor_vzyt_done(first_speaker, second_speaker)
	inventory.out_items("kuvalda",2)
	inventory.out_items("kluch",2)
	inventory.out_items("otvertka",2)
end

--' спавним подарок Петренко а заодно и сюрприз
function nu_nakonez_to()
	AI:create_free("wpn_pkm_m1",vector():set(214.222,1.027,223.993),359851,2885)
	AI:create_free("ammo_7.62x54r",vector():set(214.252,1.000,223.430),359850,2885)
	AI:create_free("ammo_7.62x54r",vector():set(214.252,1.000,223.430),359850,2885)
	AI:create_free("af_armor_3",vector():set(214.715,0.333,221.231),359849,2885)
	AI:create_free("burer_strong",vector():set(219.972,3.946,195.279),363663,2885)
	AI:create_free("m_controller_act",vector():set(219.972,3.946,195.279),363663,2885)
	AI:create_free("m_poltergeist_dd",vector():set(219.972,3.946,195.279),363663,2885)
end

--' раз у Сяка функция не пашет - спавн док дезертира + веселуха
function spawn_rad_document7()
	sak.add_order()
--	AI:create_free("rad_document7",vector():set(-128.942,5.984,-204.730),110680,621)
	AI:create("zasada_tonnel_agro_2",vector():set(-175.85920715332,7.3848404884338,-155.32315063477),61033,560)
	AI:create("agro_elite_rpg",vector():set(-183.70137023926,5.317928314209,-170.63172912598),53257,667)
	AI:create("soldier_mines_regular",vector():set(-169.85111999512,5.3175392150879,-170.36421203613),66853,667)
	AI:create("soldier_mines_regular",vector():set(-195.93034362793,7.3854722976685,-223.88467407227),40564,555)
	AI:create("soldier_mines_veteran",vector():set(-132.79737854004,-0.20200881361961,-144.02784729004),106301,697)
	AI:create("soldier_mines_regular",vector():set(-156.57958984375,14.998466491699,-191.31016540527),80447,644)
	AI:create("soldier_mines_veteran",vector():set(-131.26614379883,14.998692512512,-191.58946228027),107755,642)
	AI:create("zasada_tonnel_agro_2",vector():set(-153.41352844238,9.9984302520752,-201.50427246094),84277,646)
	AI:create("agro_elite_soldier",vector():set(-131.84466552734,4.9986295700073,-200.23066711426),107710,621)
	AI:create("zasada_tonnel_agro_3",vector():set(-145.77922058105,4.9975275993347,-203.05874633789),92503,621)
end

--' проверим наличие компа и 3д-рации
function voronin_stol_dostat_have() 
	return inventory.search("3d_raziy",1) ~= false and
		inventory.search("pribor",1) ~= false
end

--' отдадим комп и 3д-рацию Воронину
function voronin_stol_dostat_done(first_speaker, second_speaker)
	inventory.out_items("3d_raziy",1)
	inventory.out_items("pribor",1)
	dialogs.relocate_item_section(second_speaker, "af_dik_3","in")
	dialogs.relocate_item_section(second_speaker, "af_vyvert_green","in")
	dialogs.relocate_item_section(second_speaker, "wpn_svu_m1","in")
	dialogs.relocate_item_section(second_speaker, "wpn_addon_scope_m1","in")
end

--' заспавним рацию, записку и комп
function spawn_stol()
	AI:create_free("pribor",vector():set(34.830,8.061,-38.123),217765,1054)
	AI:create_free("3d_raziy",vector():set(-297.263,-18.034,292.275),45228,1833)
	AI:create_free("malyva",vector():set(32.784,8.062,-36.736),214836,1054)
end

--' проверим наличие рации
function sahar_info_have() 
	return inventory.search("telefon",1) ~= false
end

function ecolog_has_phone(first_speaker, second_speaker)
	local npc = first_speaker:id() == 0 and second_speaker or first_speaker
	return npc:object("telefon") ~= nil
end

function ecolog_out_phone(first_speaker, second_speaker)
	local npc = first_speaker:id() == 0 and second_speaker or first_speaker
	local obj = npc:object("telefon")
	if obj then
		npc:transfer_item(obj, Actor)
		news_manager.relocate_item("in", "telefon")
	end
end

--' отдадим телефон Сахару и Сахар друг
function sahar_info_done(first_speaker, second_speaker)
	inventory.out_items("telefon",1)
	second_speaker:set_relation(game_object.friend, first_speaker)
end

--' удаляем ненужных экологов
function delete_nps_ecolog()
	local se_obj = AI:object("bar_ecolog_crush_1")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("bar_ecolog_crush_3")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("bar_ecolog_crush_2")
	if se_obj then AI:release(se_obj, true) end
	AI:object("bar_ecolog_crush_4")
	if se_obj then AI:release(se_obj, true) end
end

--' удаляем труп Корчагина
function delete_korchagin()
	local se_obj = AI:object("dead_korchagin_military")
	if se_obj then AI:release(se_obj, true) end
end

--' удаляем труп вояки с УРТ
function delete_voen_urt()
	local se_obj = AI:object("dead_military_qvest_crest")
	if se_obj then AI:release(se_obj, true) end
end

--' удаляем труп Андрея
function delete_voen_andrey()
	local se_obj = AI:object("dead_military_esc")
	if se_obj then AI:release(se_obj, true) end
end

--' удаляем пленного из Лабиринта
function delete_labirint_shahter()
	local se_obj = AI:object("labirint_monolit_shahter")
	if se_obj then AI:release(se_obj, true) end
end

--' удаляем Звездочёта с Кордона
function delete_zvezd()
	local se_obj = AI:object("esc_zvezdochet")
	if se_obj then AI:release(se_obj, true) end
end

--' удаляем первого Болотного Доктора
function delete_doktor1()
	local se_obj = AI:object("doktor1")
	if se_obj then AI:release(se_obj, true) end
end

--' проверим наличие артов для Креста
function have_art1()
	return inventory.search("af_medusa",5) ~= false and
		inventory.search("af_cristall_flower",5) ~= false and
		inventory.search("af_fireball",5) ~= false
end

--' отдадим арты Кресту и получим награду
function remove_art(first_speaker, second_speaker)
	inventory.out_items("af_medusa",5)
	inventory.out_items("af_cristall_flower",5)
	inventory.out_items("af_fireball",5)
	dialogs.relocate_item_section(second_speaker, "af_simbion","in")
	dialogs.relocate_item_section(second_speaker, "af_armor_3","in")
	dialogs.relocate_item_section(second_speaker, "wpn_ak107","in")
	inventory.give_items("ammo_5.45x39_izomorf", 2)
end

--' проверим аномальных бизонов
function have_bizon() 
	return inventory.search("wpn_bizon1",6) ~= false
end

--' отдадим бизоны Кресту и получим  награду
function delete_bizon(first_speaker, second_speaker)
	inventory.out_items("wpn_bizon1",6)
	dialogs.relocate_item_section(second_speaker, "arc_art_box_8basic","in")
	dialogs.relocate_item_section(second_speaker, "af_dummy_battery","in")
	dialogs.relocate_item_section(second_speaker, "wpn_vsk94","in")
	dialogs.relocate_item_section(second_speaker, "ammo_9x39_izomorf","in")
end

--' 20 и 40 ПДА у информатора
function inform_20_pda_have()
	return inventory.search("device_pda_npc",20) ~= false 
end

function inform_40_pda_have()
	return inventory.search("device_pda_npc",40) ~= false 
end

--' проверим наличие 20 рук зомби для Акима
function have_a_hand() 
	return inventory.search("mutant_zombie_hand",30)
end

--' отдадим 20 рук зомби Акиму получим  награду и поднимем репу
function out_hand(first_speaker, second_speaker)
	inventory.out_items("mutant_zombie_hand",30)
	dialogs.relocate_money(second_speaker, 10000, "in")
	dialogs.relocate_item_section(first_speaker, "wpn_ak74u_svd", "in")
	dialogs.relocate_item_section(first_speaker, "wpn_addon_scope_m2", "in")
	inventory.give_items("ammo_7.62x54_7h14", 2)
	second_speaker:set_relation(game_object.friend, first_speaker)
	Actor:change_character_reputation(30)
end

--' спавним 1 документ для Акима
function spawn_dok()
	AI:create_free("old_doc",vector():set(48.334,3.459,236.598),221779,359) 	 
end

--' отдадим документ и получим награду
function out_doc(first_speaker, second_speaker)
	inventory.out_items("old_doc",1)
	dialogs.relocate_money(second_speaker, 3000, "in")
	inventory.give_items("antizombie", 2)
	second_speaker:set_relation(game_object.friend, first_speaker)
	Actor:change_character_reputation(10)
end

--' проверим наличие 1 документа
function have_a_doc() 
	return inventory.search("old_doc",1)
end

--' спавним 2 документ для Акима
function spawn()
	AI:create_free("old_doc_2",vector():set(-40.861,-2.953,-18.630),4669,732)	  
end

--' отдадим документ
function doc_otdan_p(first_speaker, second_speaker)
	inventory.out_items("old_doc_2",1)
	dialogs.relocate_money(second_speaker, 4000, "in")
	dialogs.relocate_item_section(first_speaker, "antizombie", "in")
	dialogs.relocate_item_section(second_speaker, "treasure_item", "in")
	second_speaker:set_relation(game_object.friend, first_speaker)
	Actor:change_character_reputation(10)
end

--' проверим наличие 2 документа
function have_doc2() 
	return inventory.search("old_doc_2",1) ~= false
end

--' спавним 3 документ для Акима в х18 в рюкзаках, 4 - у Корчагина
function spawn_old()
	AI:create_free("m_inventory_box24", vector():set(-8.440,1.893,11.780),1907,1125)
	AI:create_free("m_inventory_box25", vector():set(-41.247,-10.908,13.351),328,1148)
	AI:create_free("m_inventory_box26", vector():set(-37.379,-13.006,-14.669),315,1153)
--	AI:create_free ("old_doc_3_3", vector():set(29.782,-10.464,42.185),6521,1161)
end

--' отдадим 3 часть доков и получим  награду АК-104 и патроны
function out_old(first_speaker, second_speaker)
	inventory.out_items("old_doc_3_1", 1)
	inventory.out_items("old_doc_3_2", 1)
	inventory.out_items("old_doc_3_3", 1)
	inventory.out_items("old_doc_3_4", 1)
	dialogs.relocate_money(second_speaker, 6000, "in")
	dialogs.relocate_item_section(first_speaker, "antizombie", "in")
	dialogs.relocate_item_section(first_speaker, "af_electra_moonlight", "in")
	dialogs.relocate_item_section(second_speaker, "wpn_ak104", "in")
	dialogs.relocate_item_section(second_speaker, "ammo_7.62x39_k", "in")
	dialogs.relocate_item_section(second_speaker, "ammo_7.62x39_ap", "in")
	second_speaker:set_relation(game_object.friend, first_speaker)
	Actor:change_character_reputation(10)
end

--' проверим наличие 3 документов для Акима
function have_a_doc_s()
	return inventory.search("old_doc_3_4",1) ~= false and
		inventory.search("old_doc_3_3",1) ~= false and
		inventory.search("old_doc_3_2",1) ~= false and
		inventory.search("old_doc_3_1",1) ~= false
end

--' проверим наличие 4 документов для Акима и броников
function have_a_doc_q()
	return inventory.search("militaryspec_outfit",1) and
		inventory.search("exo_outfit",1) and
		inventory.search("dolg_scientific_outfit",1) and
		inventory.search("exo_bandit_outfit",1) and
		inventory.search("old_doc_4",1) and
		inventory.search("pda_info",1)
end

--' отдадим всё Акиму и получим  награду
function out_outfit(first_speaker, second_speaker)
	inventory.out_items("militaryspec_outfit",1)
	inventory.out_items("exo_outfit",1)
	inventory.out_items("dolg_scientific_outfit",1)
	inventory.out_items("old_doc_4",1)
	inventory.out_items("pda_info",1)
	inventory.out_items("exo_bandit_outfit",1)
	dialogs.relocate_money(second_speaker, 8000, "in")
	dialogs.relocate_item_section(first_speaker, "arhara_instruk", "in")
	Actor:give_info_portion("2")
	Actor:change_character_reputation(10)
end
-- Akill begin Изменены к-ты спавна доков + монстры
--' спавним 4 документ для Акима
function spawn_new_dok()
	AI:create_free("old_doc_4",vector():set(109.10995483398,11.377179145813,-12.646112442017),6999,1544)
	AI:create_free("pda_info",vector():set(55.847,8.710,-20.499),250905,990)
	akill.x16_mutant_spawn()
end
-- Akill end
--' спавним суперскат
function spawn_new_exoskeleton()
	AI:create_free("exo_mil_exoskeleton",vector():set(-12.084,4.879,-43.365),34459,1444)
end

--' проверим наличие запчастей для Акима
function have_doc_tvar()
	return inventory.search("mutant_face_tushkano",1) and
		inventory.search("mutant_carlic_hand",1) and
		inventory.search("mutant_vypolzen_hrebet",1) and
		inventory.search("mutant_raptor_kogot",1) and
		inventory.search("mutant_spider_gland",1) and
		inventory.search("mutant_rotan_heart",1) and
		inventory.search("mutant_plague_hand",1) and
		inventory.search("mutant_zanoza_leg",1) and
		inventory.search("mutant_hand_kontroler",1) and
		inventory.search("mutant_poltergeist_glas",1) and
		inventory.search("mutant_psevdogigant_hand",1) and
		inventory.search("mutant_tail_cat",1) and
		inventory.search("mutant_chimera_kogot",1) and
		inventory.search("mutant_flesh_eye",1) and
		inventory.search("mutant_boar_leg",1) and
		inventory.search("mutant_dog_tail",1) and
		inventory.search("mutant_psevdodog_tail",1) and
		inventory.search("mutant_krovosos_jaw",1) and
		inventory.search("mutant_burer_hand",1) and
		inventory.search("mutant_snork_leg",1) and
		inventory.search("mutant_fracture_hand",1) and
		inventory.search("mutant_deathclaw_antler",1) and
		inventory.search("part_digitis_biblio",1) and
		inventory.search("part_tarakan",1) and
		inventory.search("part_tarakan_strong",1) and
		inventory.search("mutant_zombie_teeth",1) and
		inventory.search("mutant_spleen_rat",1)
end

--' отдадим запчасти Акиму
function out_all_tvar(first_speaker)
	inventory.out_items("mutant_face_tushkano",1)
	inventory.out_items("mutant_carlic_hand",1)
	inventory.out_items("mutant_vypolzen_hrebet",1)
	inventory.out_items("mutant_raptor_kogot",1)
	inventory.out_items("mutant_spider_gland",1)
	inventory.out_items("mutant_rotan_heart",1)
	inventory.out_items("mutant_plague_hand",1)
	inventory.out_items("mutant_zanoza_leg",1)
	inventory.out_items("mutant_hand_kontroler",1)
	inventory.out_items("mutant_poltergeist_glas",1)
	inventory.out_items("mutant_psevdogigant_hand",1)
	inventory.out_items("mutant_tail_cat",1)
	inventory.out_items("mutant_chimera_kogot",1)
	inventory.out_items("mutant_flesh_eye",1)
	inventory.out_items("mutant_boar_leg",1)
	inventory.out_items("mutant_dog_tail",1)
	inventory.out_items("mutant_psevdodog_tail",1)
	inventory.out_items("mutant_krovosos_jaw",1)
	inventory.out_items("mutant_burer_hand",1)
	inventory.out_items("mutant_snork_leg",1)
	inventory.out_items("mutant_fracture_hand",1)
	inventory.out_items("mutant_deathclaw_antler",1)
	inventory.out_items("part_digitis_biblio",1)
	inventory.out_items("part_tarakan",1)
	inventory.out_items("part_tarakan_strong",1)
	inventory.out_items("mutant_zombie_teeth",1)
	inventory.out_items("mutant_spleen_rat",1)
	dialogs.relocate_item_section(first_speaker, "wpn_vepr12", "in")
	dialogs.relocate_item_section(first_speaker, "ammo_12x70_kart", "in")
	dialogs.relocate_item_section(first_speaker, "af_armor_4", "in")
end

--' проверим наличие слом. телепортатора для Креста
function have_true()
	return inventory.search("hand_teleporter_arhara",1) ~= false 
end 

--' отдадим телепортер Кресту и получим награду
function done(first_speaker, second_speaker)
	inventory.out_items("hand_teleporter_arhara",1) 
	dialogs.relocate_item_section(second_speaker, "wpn_svd_m2", "in")
	dialogs.relocate_money(first_speaker, 7000, "in")
	second_speaker:set_relation(game_object.friend, first_speaker)
	Actor:change_character_reputation(10)
end

--' заспавним раб. телепортер на АТП
function teleporter()
	AI:create_free ("hand_teleporter", vector():set(99.139,-7.145,-5.472),523095,2828)
end

--' проверим наличие Грозы для Воронина
function voronin_infa_gg_have()
	return inventory.search("wpn_groza",1) ~= false
end

--' получим  аптечки
function voronin_infa_gg_done(first_speaker, second_speaker)
	inventory.give_items("medkit", 2)
end

--' получим  сыворотку от Калинина
function kalinin_zadan_done(first_speaker, second_speaker)
	inventory.give_items("suvorotka", 2)
end

--' проверим наличие флэхи для Калинина
function gonets_spasti_have()
	return inventory.search("gonets_flash",1) ~= false
end
-- Akill begin
--' отдадим флэху и получим награду от Калинина и Калинин друг
function gonets_spasti_done(first_speaker, second_speaker)
	inventory.out_items("gonets_flash",1) 
	inventory.give_items("ammo_12x70_kart",4)
	second_speaker:set_relation(game_object.friend, first_speaker) 
end
-- Akill end
--' получим флешку от гонца
function gonets_fleha(first_speaker, second_speaker) 
	dialogs.relocate_item_section(second_speaker, "gonets_flash","in") 
end

--' получим арт от гонца
function gonets_art(first_speaker, second_speaker) 
	dialogs.relocate_item_section(second_speaker, "af_dik_3","in") 
end

--' спавним зомбаков на пути Гонца
function zombari_spawn()
	AI:create_free("zombie_strong",vector():set(378.559,0.236,145.462),919513,2858)
	AI:create_free("zombie_strong",vector():set(378.559,0.236,145.462),919513,2858)
end

--' проверим наличия артов для Калинина
function vuxod_atp_have()
	return inventory.search("af_electra_moonlight",1) ~= false and
		inventory.search("af_dummy_glassbeads",1) ~= false and
		inventory.search("af_electra_flash",1) ~= false
end

--' отдадим арты Калинину
function vuxod_atp_done()
	inventory.out_items("af_electra_moonlight",1)
	inventory.out_items("af_dummy_glassbeads",1)
	inventory.out_items("af_electra_flash",1)
end

--' получим аптечку нож и бинокль от Зведочёта
function noz_dat(first_speaker, second_speaker) 
	dialogs.relocate_item_section(second_speaker, "wpn_pm",	"in")
	dialogs.relocate_item_section(second_speaker, "medkit",	"in")
	dialogs.relocate_item_section(second_speaker, "wpn_binoc",	"in")
	dialogs.relocate_item_section(second_speaker, "detector_simple", "in")
end

--' получим арт от Зведочёта
function podarok(first_speaker, second_speaker) 
	dialogs.relocate_item_section(second_speaker, "af_cry_1","in")
end
-- Akill begin
--' проверим наличие РПГ-7 для Калинина
function kalinin_btr_vzyt_have() 
	return inventory.search("wpn_rpg7",1)
end
-- Akill end
--' получим М249
function btr_ataka_done(first_speaker, second_speaker) 
	dialogs.relocate_item_section(second_speaker, "wpn_m249","in")
	dialogs.relocate_item_section(second_speaker, "af_simbion","in")
	inventory.give_items("grenade_fb",5)
end

--' заспавним в лабиринте арты во 2 пещере
function spawn_monolit_to_labirint()
	AI:create_free("af_medusa",vector():set(-311.981,16.300,219.735),39736,2920)
	AI:create_free("af_cristall_flower",vector():set(-318.176,16.612,167.987),35394,2922)
	AI:create_free("af_gold_fish",vector():set(-218.433,20.138,54.736),105379,2958)
	AI:create_free("af_fireball",vector():set(-128.102,15.460,351.711),147973,2974)
	AI:create_free("af_cristall",vector():set(-200.291,20.082,366.559),117285,2961)
	AI:create_free("af_mincer_meat",vector():set(-245.448,7.128,444.855),86899,2947)
	AI:create_free("af_electra_sparkler",vector():set(-134.238,18.732,459.057),146621,2973)
	AI:create_free("af_medusa",vector():set(-135.452,17.093,421.498),146315,2973)
	AI:create_free("art_acumm",vector():set(-229.414,14.210,424.312),98933,2954)
	AI:create_free("art_acumm",vector():set(-229.414,14.210,424.312),98933,2954)
	AI:create_free("art_acumm",vector():set(-229.414,14.210,424.312),98933,2954)
	AI:create_free("af_armor_1",vector():set(-229.414,14.210,424.312),98933,2954)
	AI:create_free("af_electra_flash",vector():set(-196.013,19.972,316.334),120678,2963)
	AI:create_free("af_dik_1",vector():set(-196.013,19.972,316.334),120678,2963)
	AI:create_free("af_spirit_1",vector():set(-196.013,19.972,316.334),120678,2963)
	AI:create_free("art_acumm",vector():set(-196.013,19.972,316.334),120678,2963)
	AI:create_free("af_ameba_slug",vector():set(-177.985,21.049,389.713),133385,2968)
	AI:create_free("af_dummy_pellicle",vector():set(-78.366,42.766,469.674),153706,2987)
end

--' заспавним арты в 3 пещере Лабиринта
function spawn_art_v_3peshere()
	AI:create_free("af_dik_1",vector():set(-220.315,56.106,137.398),104193,2987)
	AI:create_free("af_spirit_1",vector():set(-154.161,56.511,190.503),142841,2987)
	AI:create_free("af_dummy_battery",vector():set(-188.342,52.618,271.344),127542,2987)
	AI:create_free("af_dummy_pellicle",vector():set(-220.079,56.156,220.856),104806,2987)
	AI:create_free("af_eye_voron",vector():set(-356.979,96.881,190.423),14908,2918)
end

--' проверим наличие блокнота часового
function shax_plennik_nayti_have() 
	return inventory.search("kod_kamera",1) ~= false
end

--' отдадим блокнот Шахтёру
function shax_plennik_nayti_done(first_speaker, second_speaker)
	inventory.out_items("kod_kamera",1) 
end

--' спавним мыло в деревне новисов
function spawn_soap()
	AI:create_free("soap",vector():set(-217.355,-22.056,-159.123),34720,47)
	AI:create_free("soap",vector():set(-217.420,-22.096,-159.461),34720,47)
	AI:create_free("soap",vector():set(-217.588,-22.141,-159.401),34720,47)
end

--' проверим наличие вещей для Фимки
function fima_mulo_nayti_have()
	return inventory.search("af_soul",1) ~= false and
		inventory.search("medkit_scientic",10) ~= false and
		inventory.search("bandage",10) ~= false and
		inventory.search("soap",2) ~= false
end

--' отдадим всё Фиме
function fima_mulo_nayti_done()
	inventory.out_items("af_soul",1)
	inventory.out_items("medkit_scientic",10)
	inventory.out_items("bandage",10)
	inventory.out_items_all("soap")
end

--' спавним шкатулку в Лабиринте и монстриков
function spawn_shkatul()
	AI:create_free("shkatulka",vector():set(-189.002,52.791,269.950),126910,2987)
	AI:create_free("bloodsucker_effector",vector():set(-190.695,56.187,190.873),125416,2987)
	AI:create_free("bloodsucker_effector",vector():set(-190.695,56.187,190.873),125416,2987)
	AI:create_free("zombie_weak",vector():set(-190.595,56.187,190.873),125416,2987)
	AI:create_free("zombie_strong",vector():set(-190.495,56.187,190.873),125416,2987)
	AI:create_free("zombie_hell3",vector():set(-190.395,56.187,190.873),125416,2987)
	AI:create_free("zombie_hell15",vector():set(-190.395,56.187,190.873),125416,2987)
	AI:create_free("zombie_hell15",vector():set(-190.395,56.187,190.873),125416,2987)
	AI:create_free("chimera_strong",vector():set(-179.217,52.310,272.398),132753,2987)
	AI:create_free("zombie_hell4",vector():set(-179.227,52.310,272.398),132753,2987)
	AI:create_free("zombie_hell5",vector():set(-179.237,52.310,272.398),132753,2987)
	AI:create_free("zombie_hell6",vector():set(-179.247,52.310,272.398),132753,2987)
	AI:create_free("zombie_hell2",vector():set(-179.257,52.310,272.398),132753,2987)
	AI:create_free("pseudodog_normal",vector():set(-185.462,56.305,212.259),129613,2987)
	AI:create_free("pseudodog_big",vector():set(-185.462,56.305,212.259),129613,2987)
	AI:create_free("pseudodog_normal",vector():set(-185.462,56.305,212.259),129613,2987)
	AI:create_free("pseudodog_big",vector():set(-185.462,56.305,212.259),129613,2987)
end

--' проверим шкатулку
function adr_shkatulka_dost_have() 
	return inventory.search("shkatulka",1) ~= false
end

--' отдадим шкатулку Адреналину
function adr_shkatulka_dost_done(first_speaker, second_speaker)
	inventory.out_items("shkatulka",1) 
end

--' заспавним арты во 2 пещере
function spawn_art_2peshera()
	AI:create_free("af_medusa",vector():set(-311.981,16.300,219.735),39736,2920)
	AI:create_free("af_cristall_flower",vector():set(-318.176,16.612,167.987),35394,2922)
	AI:create_free("af_fireball",vector():set(-128.102,15.460,351.711),147973,2974)
	AI:create_free("af_cristall",vector():set(-200.291,20.082,366.559),117285,2961)
	AI:create_free("af_mincer_meat",vector():set(-245.448,7.128,444.855),86899,2947)
	AI:create_free("af_electra_sparkler",vector():set(-134.238,18.732,459.057),146621,2973)
	AI:create_free("af_medusa",vector():set(-135.452,17.093,421.498),146315,2973)
	AI:create_free("art_acumm",vector():set(-229.414,14.210,424.312),98933,2954)
	AI:create_free("art_acumm",vector():set(-229.414,14.210,424.312),98933,2954)
	AI:create_free("af_armor_1",vector():set(-229.414,14.210,424.312),98933,2954)
	AI:create_free("af_electra_flash",vector():set(-196.013,19.972,316.334),120678,2963)
	AI:create_free("af_dik_1",vector():set(-196.013,19.972,316.334),120678,2963)
	AI:create_free("af_ameba_slug",vector():set(-177.985,21.049,389.713),133385,2968)
end

--' проверим наличие сейфа
function tretiy_kod_dost_have() 
	return inventory.search("arhara_seif",1) ~= false
end

--' отдадим сейф Шахтёру
function tretiy_kod_dost_done(first_speaker, second_speaker)
	inventory.out_items("arhara_seif",1) 
end

--' Сидор дал амулет
function amulet_gg(first_speaker, second_speaker) 
	dialogs.relocate_item_section(second_speaker, "amulet","in") 
end

--' проверим ремящики и амулет для Сидора
function sidor_amulet_vzyt_have()
	return inventory.search("amulet",1) ~= false and
		inventory.search("remontnyi_box",2) ~= false
end

--' отдадим всё Сидору
function sidor_amulet_vzyt_done()
	inventory.out_items("amulet",1)
	inventory.out_items("remontnyi_box",2)
	kostya_dialog.stealth_fail_task()
end

--' сделаем ГГ нейтралом
function join_stalker(actor, npc)
--	printf ("ACTOR NOW IN STALKER COMMUNITY")
	Actor:set_character_community("actor", 0, 0)
end
--' проверим арты для Тени Монолита
function ten_monolita_talk_have()
	return inventory.search("af_arhara_globus",1) ~= false and
		inventory.search("af_caterpillar",1) ~= false
end

--' отдадим арты Тени Монолита
function ten_monolita_talk_done()
	inventory.out_items("af_arhara_globus",1)
	inventory.out_items("af_caterpillar",1)
end

--' заспавним арты сейф и ремящики
function spawn_seif_and_art()
	AI:create_free("af_spirit_1",vector():set(-313.808,57.639,200.901),38726,2987)
	AI:create_free("af_kol_2",vector():set(-320.767,64.973,205.055),34603,2987)
	AI:create_free("af_fireball",vector():set(-320.830,64.987,205.564),34603,2987)
	AI:create_free("af_cristall",vector():set(-319.758,62.230,203.374),34599,2987)
	AI:create_free("af_armor_2",vector():set(-313.692,57.639,200.900),38726,2987)
	AI:create_free("af_cry_2",vector():set(-313.579,57.638,200.666),38726,2987)
	AI:create_free("arhara_seif",vector():set(-312.919,57.637,201.125),39214,2987)
	AI:create_free("remontnyi_box",vector():set(-314.837,52.752,201.776),37730,2987)
	AI:create_free("remontnyi_box",vector():set(-315.607,52.751,201.822),37259,2987)
	AI:create_free("ammo_igl",vector():set(-320.875,64.959,203.579),34599,2987)
	AI:create_free("ammo_gauss",vector():set(-320.896,64.963,202.912),34595,2987)
	AI:create_free("wpn_awm",vector():set(-313.680,57.636,201.100),38726,2987)
	AI:create_free("ammo_5.56x45_ap",vector():set(-320.936,64.972,201.861),34588,2987)
	AI:create_free("medkit_scientic",vector():set(-320.814,64.967,204.396),34601,2987)
	AI:create_free("medkit",vector():set(-320.916,64.968,202.351),34592,2987)
	AI:create_free("medkit",vector():set(-320.916,64.968,202.351),34592,2987)
	AI:create_free("ammo_9x39_pab9",vector():set(-320.949,64.977,201.543),34588,2987)
	AI:create_free("ammo_5.45x39_ap",vector():set(-320.960,64.996,201.007),34583,2987)
	AI:create_free("ammo_og-7b",vector():set(-320.963,65.005,200.770),34583,2987)
end

--' спавним ключ для удал телепорта на входе базы
function spawn_kluch_dell_tele()
	AI:create_free("kluch_dell_teleport",vector():set(326.871,-6.876,-18.849),1450179,2902)
end

--' спавним телепорт на входе в базу
function spawn_teleport_aver_baza_vxod()
    local se_obj = AI:create("m_teleport_aver_baza_vxod",vector():set(49.718948364258,-12.917119979858,-192.61256408691),954225,2908)
	set_story_id(se_obj, story_ids.m_teleport_aver_baza_vxod)
end

--' спавним телепорт на выходе с базы
function spawn_teleport_land_baza_vuxod()
    local se_obj = AI:create("m_teleport_land_baza_vuxod",vector():set(-29.902000427246,-26.615087509155,-159.37490844727),816025,2897)
	set_story_id(se_obj, story_ids.m_teleport_land_baza_vuxod)
end

--' спавним телепорт на входе в 3 пещеру НЗ
function spawn_teleport_aver_taynik()
    local se_obj = AI:create("m_teleport_aver_taynik",vector():set(-371.09735107422,43.853530883789,386.16714477539),231029,2887)
	set_story_id(se_obj, story_ids.m_teleport_aver_taynik)
end

--' спавним телепорт в Старой деревне
function spawn_teleport_village_plen()
    local se_obj = AI:create("m_teleport_village_plen",vector():set(50.373229980469,4.1041889190674,76.716133117676),28807,3331)
	set_story_id(se_obj, story_ids.m_teleport_village_plen)
end

--' спавним 1телепорт на ЧАЭС2
function spawn_teleport_1_chaes2()
    local se_obj = AI:create("m_teleport_1_chaes2",vector():set(257.06002807617,11.381983757019,193.40171813965),91155,2577)
	set_story_id(se_obj, story_ids.m_teleport_1_chaes2)
	arhara_dialog.spawn_aes2_rucks()
end
function spawn_aes2_rucks()
	local items = {
		['ammo_7.62x54_ap'] = 1,
		['af_kol_4'] = 1,
		['medkit_scientic'] = 2
	}
	naxac.create_treasure(vector():set(619.272644042969,90.6974716186523,147.783508300781), 180226, 2625, items)
	items = {
		['arhara_tele'] = 1,
		['ammo_minigun'] = 1,
		['bezoar'] = 1
	}
	naxac.create_treasure(vector():set(598.944641113281,100.701606750488,163.614624023438), 180248, 2625, items)
	items = {
		['arhara_tele'] = 1,
		['af_water_flower'] = 1
	}
	naxac.create_treasure(vector():set(550.3896484375,112.814872741699,201.193557739258), 164650, 2622, items)
end

--' спавним 2телепорт на ЧАЭС2
function spawn_teleport_2_chaes2()
    local se_obj = AI:create("m_teleport_2_chaes2",vector():set(550.289672851563,80.1041946411133,204.157897949219),171515,2628)
	set_story_id(se_obj, story_ids.m_teleport_2_chaes2)
end

--' спавним 3телепорт на ЧАЭС2
function spawn_teleport_3_chaes2()
    local se_obj = AI:create("m_teleport_3_chaes2",vector():set(555.68634033203,112.81456756592,197.65130615234),171515,2628)
	set_story_id(se_obj, story_ids.m_teleport_3_chaes2)
end

--' спавним 1телепорт на генераторах
function spawn_teleport_1_generators()
    local se_obj = AI:create("m_teleport_1_generators",vector():set(208.74868774414,28.487440109253,-568.76654052734),576778,3143)
	set_story_id(se_obj, story_ids.m_teleport_1_generators)
end

--' спавним 2телепорт на генераторах
function spawn_teleport_2_generators()
    local se_obj = AI:create("m_teleport_2_generators",vector():set(198.31147766113,35.846240997314,-561.59136962891),564783,3152)
	set_story_id(se_obj, story_ids.m_teleport_2_generators)
end

--' спавним телепорт в госпитале наверх слева
function spawn_tele_1_hosp_verh1()
    local se_obj = AI:create("m_teleport_1_hosp_verh1",vector():set(-78.431533813477,25.064765930176,608.98791503906),6000,3049)
	set_story_id(se_obj, story_ids.m_teleport_1_hosp_verh1)
end

--' спавним телепорт вход в 3 отсек 
function spawn_teleport_vhod_otsek()
    local se_obj = AI:create("m_teleport_vhod_otsek",vector():set(-94.129028320313,25.804735183716,609.15380859375),1168,3039)
	set_story_id(se_obj, story_ids.m_teleport_hosp_vhod_otsek)
end

--' спавним телепорт блока выхода из 3 отсека у входа 
function spawn_tele_blok_vhod_otsek()
    local se_obj = AI:create("m_teleport_blok_vhod_otsek",vector():set(-102.48352813721,25.163656234741,616.11047363281),232,3029)
	set_story_id(se_obj, story_ids.m_teleport_blok_vhod_otsek)
end

--' спавним телепорт входа дока на Припяти 
function spawn_tele_dok_prip_vxod()
    local se_obj = AI:create("m_teleport_prip_dok_vxod",vector():set(-45.148349761963,1.8893185853958,262.46716308594),54164,2164)
	set_story_id(se_obj, story_ids.m_teleport_prip_dok_vxod)
end

--' спавним телепорт на крыше в Лиманске
function spawn_teleport_limansk_krusha()
    local se_obj = AI:create("m_teleport_limansk_krusha",vector():set(64.565872192383,21.843370437622,253.25939941406),58482,3021)
	set_story_id(se_obj, story_ids.m_teleport_limansk_krusha)
end

--' спавним телепорт-фото в Саркофаге
function spawn_teleport_sarcof_foto()
    local se_obj = AI:create("m_teleport_sarcofag_foto",vector():set(23.805717468262,-3.8649611473083,2.8239929676056),4684,2424)
	set_story_id(se_obj, story_ids.m_teleport_sarcofag_foto)
end

--' спавним телепорт над мозгом
function spawn_teleport_nad_mozgom()
    local se_obj = AI:create("m_teleport_nad_mozgom",vector():set(-32.13062286377,22.806690216064,-12.40500831604),3079,1530)
	set_story_id(se_obj, story_ids.m_teleport_nad_mozgom)
end

--' телепорт блокир. рычаг в лиме
function spawn_teleport_blok_ruchag()
    local se_obj = AI:create("m_teleport_blok_ruchag",vector():set(-48.450138092041,-10.869502067566,-176.26718139648),2894,2993)
	set_story_id(se_obj, story_ids.m_teleport_blok_ruchag)
end

--' телепорт входа в секретку подвала в лиме
function spawn_teleport_podval_ok()
    local se_obj = AI:create("m_teleport_podval_ok",vector():set(-48.472511291504,-11.196914672852,-177.02395629883),2894,2993)
	set_story_id(se_obj, story_ids.m_teleport_podval_ok)
end

--' телепорт выхода из секретки подвала в лиме
function spawn_teleport_podv_vuxod()
    local se_obj = AI:create("m_teleport_podv_vuxod",vector():set(-49.113014221191,-10.754431724548,-178.7958984375),3051,2993)
	set_story_id(se_obj, story_ids.m_teleport_podv_vuxod)
end

--' удаляем телепорты
function delete_teleport_baza_vxod()
	local se_obj = AI:story_object(story_ids.m_teleport_aver_baza_vxod)
	if se_obj then
		AI:release(se_obj)
		news_manager.send_tip("delete_teleport_baza_vxod", nil, nil, 20000)
	end
end

function delete_teleport_baza_vuxod()
	local se_obj = AI:story_object(story_ids.m_teleport_land_baza_vuxod)
	if se_obj then
		AI:release(se_obj)
		news_manager.send_tip("delete_teleport_baza_vuxod", nil, nil, 20000)
	end
end

function delete_teleport_taynik()
	local se_obj = AI:story_object(story_ids.m_teleport_aver_taynik)
	if se_obj then
		AI:release(se_obj)
		news_manager.send_tip("delete_teleport_taynik", nil, nil, 20000)
	end
end

--' отключим отсроченно рестриктором, а лучше дадим смс
function sms_otkl_teleport()
	news_manager.send_tip("sms_otkl_teleport", nil, nil, 25000)
end

function delete_teleport_plen()
	local se_obj = AI:story_object(story_ids.m_teleport_village_plen)
	if se_obj then
		AI:release(se_obj, true)
		news_manager.send_tip("delete_teleport_plen", nil, nil, 30000)
	end
end

function delete_teleport_vhod_otsek()
	local se_obj = AI:story_object(story_ids.m_teleport_hosp_vhod_otsek)
	if se_obj then
		AI:release(se_obj, true)
		news_manager.send_tip("delete_teleport_vhod_otsek", nil, nil, 20000)
	end
end

function delete_tele_blok_vhod_otsek()
	local se_obj = AI:story_object(story_ids.m_teleport_blok_vhod_otsek)
	if se_obj then
		AI:release(se_obj, true)
		news_manager.send_tip("delete_tele_blok_vhod_otsek", nil, nil, 20000)
	end
end

--' получим сейф обратно от Шахтёра
function snova_seif(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "arhara_seif","in") 
end

--' заспавним немного артов на НЗ
function spawn_aver_art1()
	AI:create_free("af_spirit_1",vector():set(-311.500,0.390,-338.304),335058,2890)
	AI:create_free("af_fireball",vector():set(52.464,-13.941,-186.119),959429,2908)
	AI:create_free("af_cristall",vector():set(-338.465,-26.910,176.832),287481,2891)
	AI:create_free("af_armor_2",vector():set(125.058,38.844,397.450),1088689,2899)
	AI:create_free("af_fireball",vector():set(-126.538,-53.295,-185.044),652148,2897)
	AI:create_free("art_acumm",vector():set(-276.414,-23.379,250.316),396447,2891)
end

--' заспавним ящик с оружием
function box_with_weapon_spawn()
	AI:create_free ("box_with_weapon", vector():set(74.500,-43.783,241.980),998932,2899)
end

--' получим сумку для Гинеколога
function take_parcel(first_speaker, second_speaker) 
	dialogs.relocate_item_section(second_speaker, "parcel","in") 
end

--' проверим наличие ящика с оружием для Отшельника
function otshelnik_yzik_nayti_have() 
	return inventory.search("box_with_weapon",1) ~= false
end

--' отдадим ящик Отшельнику и получим УЗИ с патронами и глушаком
function otshelnik_yzik_nayti_done(first_speaker, second_speaker)
	inventory.out_items("box_with_weapon",1)
	dialogs.relocate_item_section(second_speaker, "wpn_uzi","in")
	dialogs.relocate_item_section(second_speaker, "ammo_9x19_pbp","in")
	dialogs.relocate_item_section(second_speaker, "wpn_9mm_nato_silencer","in") 
end

--' удаляем Звездочёта с НЗ
function delete_land_zvezdochet()
	local se_obj = AI:object("land_arhara_zvezdochet")
	if se_obj then
		AI:release(se_obj, true)
	end
end

--' заспавним ещё немного артов на НЗ
function spawn_aver_art2()
	AI:create_free("af_vyvert",vector():set(-252.372,-1.190,-325.960),436604,2892)
	AI:create_free("af_gravi",vector():set(-163.165,51.365,-415.454),588454,2890)
	AI:create_free("af_drops",vector():set(-119.568,22.321,64.620),664582,2894)
	AI:create_free("af_vyvert",vector():set(-391.785,58.160,361.651),194833,2887)
	AI:create_free("af_blood",vector():set(345.540,4.877,-87.297),1485407,2902)
	AI:create_free("af_mincer_meat",vector():set(306.971,-38.273,386.180),1415062,2904)
	AI:create_free("af_electra_sparkler",vector():set(134.876,14.633,66.266),1105003,2902)
end

--' отдадим сумку и сейф медику
function aut_parcel(first_speaker, second_speaker)
	inventory.out_items("parcel",1)
	inventory.out_items("arhara_seif",1) 
end

--' заспавним лекарства на Кордоне для Гинеколога
function spawn_medik_lekarstvo()
	AI:create_free("tabletki_1",vector():set(-166.571,-25.436,-355.526),83083,31)
	AI:create_free("tabletki_1",vector():set(-166.505,-25.436,-355.355),83083,31)
	AI:create_free("tabletki_1",vector():set(-166.422,-25.436,-355.300),83083,31)
	AI:create_free("tabletki_1",vector():set(-166.341,-25.436,-355.283),83083,31)
	AI:create_free("tabletki_2",vector():set(-166.244,-25.436,-355.316),83749,31)
	AI:create_free("tabletki_2",vector():set(-166.231,-25.436,-355.447),83749,31)
	AI:create_free("tabletki_2",vector():set(-166.292,-25.436,-355.622),83083,31)
	AI:create_free("tabletki_2",vector():set(-166.387,-25.436,-355.658),83083,31)
	AI:create_free("tabletki_3",vector():set(-166.623,-25.436,-355.636),83083,31)
	AI:create_free("tabletki_3",vector():set(-166.528,-25.436,-355.599),83083,31)
	AI:create_free("tabletki_3",vector():set(-165.907,-25.442,-355.554),83749,31)
	AI:create_free("tabletki_3",vector():set(-166.406,-24.904,-356.780),83083,31)
	AI:create_free("shpriz",vector():set(-166.603,-24.897,-356.939),83083,31)
	AI:create_free("shpriz",vector():set(-166.925,-24.904,-356.899),83083,31)
	AI:create_free("shpriz",vector():set(-166.966,-24.899,-356.982),83083,31)
	AI:create_free("shpriz",vector():set(-166.797,-24.901,-356.916),83083,31)
	AI:create_free("shpriz",vector():set(-166.639,-24.900,-356.907),83083,31)
	AI:create_free("shpriz",vector():set(-166.480,-24.899,-356.897),83083,31)
end

--' проверим наличие медикаментов
function ginekolog_lekarstvo_nayti_have()
	return inventory.search("shpriz",5) ~= false and
		inventory.search("tabletki_1",3) ~= false and
		inventory.search("tabletki_2",3) ~= false and
		inventory.search("tabletki_3",3) ~= false
end

--' отдадим медхлам Гинекологу
function ginekolog_lekarstvo_nayti_done()
	inventory.out_items("shpriz",6)
	inventory.out_items("tabletki_1",4)
	inventory.out_items("tabletki_2",4)
	inventory.out_items("tabletki_3",4)
end

--' проверим наличие медикаментов для Циклопа если Гинеколог обиделся
function ziklop_proval()
	return inventory.search("shpriz",5) ~= false and
		inventory.search("tabletki_1",3) ~= false and
		inventory.search("tabletki_2",3) ~= false and
		inventory.search("tabletki_3",3) ~= false
end

--' отдадим медхлам Циклопу при провале стелса
function ziklop_otdat_vse()
	inventory.out_items("shpriz",6)
	inventory.out_items("tabletki_1",4)
	inventory.out_items("tabletki_2",4)
	inventory.out_items("tabletki_3",4)
end

--' проверим наличие 2 аккумул для Жоры
function jora_accumul_have() 
	return inventory.search("akkumulytor",2) ~= false
end

--' отдадим аккум Жорке
function jora_accumul_done()
	inventory.out_items("akkumulytor",2)
end

--' а это рюкзачок тайника Пилигрима
function new_inventory17()
	AI:create_free("m_inventory_box17", vector():set(144.712,-3.956,-313.140),1121536,2900)
end

--' проверим наличие вещей для Пилигрима
function piligrim_britva_nayti_have()
	return inventory.search("akkumulytor",1) ~= false and
		inventory.search("af_dik_1",1) ~= false and
		inventory.search("af_vyvert_green",1) ~= false and
		inventory.search("britva",1) ~= false
end

--' отдадим причитающиеся Пилигриму и получим часы для Старика и новый ствол с патронами
function piligrim_britva_nayti_done(first_speaker, second_speaker)
	inventory.out_items("britva",1)
	inventory.out_items("af_vyvert_green",1)
	inventory.out_items("af_dik_1",1)
	inventory.out_items("akkumulytor",1)
	dialogs.relocate_item_section(second_speaker, "starik_chasy","in")
	dialogs.relocate_item_section(second_speaker, "wpn_akm203_pso","in")
	dialogs.relocate_item_section(second_speaker, "wpn_scope_lepoid","in")
	dialogs.relocate_item_section(second_speaker, "ammo_7.62x39_ap","in")
end

--' проверим наличие вещей для Пилигрима при неудаче стелса
function piligrim_proval_stels()
	return inventory.search("akkumulytor",1) ~= false and
		inventory.search("af_dik_1",1) ~= false and
		inventory.search("af_vyvert_green",1) ~= false and
		inventory.search("britva",1) ~= false
end

--' проверим наличие финансов при неудаче стелса
function piligrim_have_money_70000(actor,npc)
    return actor:money() > 70000
end

--' отдадим деньги Пилигриму
function piligrim_give_money_70000(t1,t2)
	local npc=t1
	if npc:id()==Actor:id() then
		npc=t2
	end
	dialogs.relocate_money(npc,70000,"out")
end

--' проверим наличие часов для Старика
function starik_zadanie_vzyt_have() 
	return inventory.search("starik_chasy",1) ~= false
end

--' отдадим часы
function starik_zadanie_vzyt_done()
	inventory.out_items("starik_chasy",1)
end

--' удаляем бородатого Пилигрима
function delete_land_piligrim()
	local se_obj = AI:object("piligrim")
	if se_obj then
		AI:release(se_obj, true)
	end
end

--' получим аккумул от Пилигрима
function take_pil_akkum(first_speaker, second_speaker)
	inventory.give_items("akkumulytor", 3)
end

--' заспавним ещё немного артов на НЗ
function spawn_aver_art3()
	AI:create_free("af_rusty_thorn",vector():set(420.649,43.074,321.392),1631337,2906)
	AI:create_free("af_rusty_kristall",vector():set(18.712,48.116,-415.46),898878,2898)
	AI:create_free("af_drops",vector():set(-50.587,-39.939,-99.154),782762,2897)
	AI:create_free("art_acumm",vector():set(-129.216,38.372,403.420),648050,2896)
	AI:create_free("art_acumm",vector():set(93.864,-4.432,-105.082),1033389,2902)
	AI:create_free("af_mincer_meat",vector():set(-276.414,-23.379,250.316),396447,2891)
	AI:create_free("af_mincer_meat",vector():set(76.217,-8.158,-208.145),1002137,2897)
end

--' проверим ультрадетектор для Адреналина
function otsh_pda_nayti_have()
	return inventory.search("detector_elite_john",1) ~= false
end

--' отдадим детектор Адреналину
function otsh_pda_nayti_done(first_speaker, second_speaker)
	inventory.out_items("detector_elite_john",1)
	dialogs.relocate_item_section(second_speaker, "wpn_mg42","in")
	dialogs.relocate_item_section(second_speaker, "ammo_7.62x51box","in")
end

--' проверим 2 эл детектора и арт для Голограмы
function golo_detektor_nayti_have()
	return inventory.search("detector_elite",2) ~= false and
		inventory.search("af_caterpillar",1) ~= false
end

--' отдадим причитающиеся Голограме
function golo_detektor_nayti_done()
	inventory.out_items("detector_elite",2)
	inventory.out_items("af_caterpillar",1)
end

--' рюкзачок тайника вора
function new_inventory18()
	AI:create_free("m_inventory_box18", vector():set(195.210,-1.436,53.253),339324,384)
end

function otshelnik_sms1()
	news_manager.send_tip("otshelnik_sms1", 5)
end

function adrenalin_sms1()
	news_manager.send_tip("adrenalin_sms1", 3)
end

function medik_sms1()
	news_manager.send_tip("medik_sms1")
end

--' проверим наличие дискетки
function medik_pribor_1_nayti_have()
	return inventory.search("land_disketka",1) ~= false
end

--' отдадим дискету Гинекологу
function medik_pribor_1_nayti_done()
	inventory.out_items("land_disketka",1)
end

--' спавним карту Клыка
function spawn_karta()
	AI:create_free("kluk_karta",vector():set(-407.265,0.946,58.977),167526,2889)
end

--' дискету и арты в Лабиринте
function spawn_trup()
	AI:create_free("land_disketka",vector():set(-77.331,42.754,469.492),153869,2987)
	AI:create_free("af_medusa",vector():set(-311.981,16.300,219.735),39736,2920)
	AI:create_free("af_gold_fish",vector():set(-218.433,20.138,54.736),105379,2958)
	AI:create_free("af_fireball",vector():set(-128.102,15.460,351.711),147973,2974)
	AI:create_free("af_mincer_meat",vector():set(-245.448,7.128,444.855),86899,2947)
	AI:create_free("af_electra_sparkler",vector():set(-134.238,18.732,459.057),146621,2973)
	AI:create_free("af_medusa",vector():set(-135.452,17.093,421.498),146315,2973)
	AI:create_free("art_acumm",vector():set(-229.414,14.210,424.312),98933,2954)
	AI:create_free("art_acumm",vector():set(-229.414,14.210,424.312),98933,2954)
	AI:create_free("art_acumm",vector():set(-229.414,14.210,424.312),98933,2954)
	AI:create_free("af_armor_1",vector():set(-229.414,14.210,424.312),98933,2954)
	AI:create_free("af_electra_flash",vector():set(-196.013,19.972,316.334),120678,2963)
	AI:create_free("af_spirit_1",vector():set(-196.013,19.972,316.334),120678,2963)
	AI:create_free("art_acumm",vector():set(-196.013,19.972,316.334),120678,2963)
	AI:create_free("af_ameba_slug",vector():set(-177.985,21.049,389.713),133385,2968)
	AI:create_free("af_dummy_pellicle",vector():set(-78.366,42.766,469.674),153706,2987)
end

function medik_sms2()
	news_manager.send_tip("medik_sms2", 3)
end

function nekto_sms()
	news_manager.send_tip("nekto_sms", 4)
end

--' удаляем раненого монолитовца
function delete_dead_mono()
	local se_obj = AI:object("dead_mono_labirint")
	if se_obj then
		AI:release(se_obj, true)
	end
end

--' тайник наёмника
function spawn_kolba_pust()
	AI:create_free("kolba_pustay", vector():set(-367.82,0.595,439.103),68300,1851)
	AI:create_free("kolba_pustay", vector():set(-367.82,0.595,439.103),68300,1851)
	AI:create_free("kolba_pustay", vector():set(-367.82,0.595,439.103),68300,1851)
end

--' удаляем бритого Пилигрима
function delete_piligrim_1()
	local se_obj = AI:object("piligrim_1")
	if se_obj then
		AI:release(se_obj, true)
	end
end

--' проверим наличие пустых колб
function kolba_pust_est()
	return inventory.search("kolba_pustay",3) ~= false
end

--' отдадим карту Клыка и пустые колбы Гинекологу
function karta_otdat()
	inventory.out_items("kluk_karta",1)
	inventory.out_items("kolba_pustay",3)
end

--' Проверим наличие блоков питания и микросхем для перфузора
function akkum_and_mikposx_nayti_have()
	return inventory.search("ekza_akkumul_quest",2) ~= false and
		inventory.search("ekza_akkumul_quest",2) ~= false
end

--' получим карту и её копию и отдадим блоки
function akkum_and_mikposx_nayti_done(first_speaker, second_speaker)
	inventory.out_items("elek_plata",2)
	inventory.out_items("ekza_akkumul_quest",2)
	dialogs.relocate_item_section(second_speaker, "kluk_karta","in")
	dialogs.relocate_item_section(second_speaker, "kluk_karta_kopiy","in")
end

--' спавним аккум для экзы, платы и ключ на выход 
function spawn_plata_and_akkum()
	AI:create_free("ekza_akkumul_quest", vector():set(28.803,-22.934,-178.421),917014,2897)
	AI:create_free("ekza_akkumul_quest", vector():set(28.845,-22.935,-178.511),917014,2897)
	AI:create_free("elek_plata", vector():set(47.349,-20.324,-157.622),950498,2897)
	AI:create_free("elek_plata", vector():set(47.852,-20.341,-157.487),950498,2897)
	AI:create_free("kluch_dell_teleport1",vector():set(29.081,-22.875,-178.589),918277,2897)
end

function piligrim_2_sms()
	start_real_timer("run", 5, "arhara_dialog.himera_sms()")
end
function himera_sms()
	news_manager.send_tip("himera_sms", nil, nil, nil, nil, "arhara_dialog.himera_sms1()")
end
function himera_sms1()
	news_manager.send_tip("himera_sms1", nil, nil, 7000, nil, "arhara_dialog.himera_sms2()")
end
function himera_sms2()
	local new_name = amk_names_lists.get_strings(false)
	local text = format_text_pairs(
		game.translate_string("himera_sms2"),
		{hero_name = new_name}
	)
	news_manager.send_tip(text, nil, nil, 15000)
	naxac.hero_rename_start(new_name)
end

--' ГГ друг снайперов
function friend_community(actor, npc)
	Actor:set_character_community("stranger", 0, 0)
end

--' заберём ключи от телепортов
function kluch_tele_otdat()
	inventory.out_items("kluch_dell_teleport",1)
	inventory.out_items("kluch_dell_teleport1",1)
end

--' проверим голову
function chimaera_zadan_nayti_have()
	return inventory.search("sidor_head",1) ~= false
end

--' отдадим голову и получим арт
function chimaera_zadan_nayti_done(first_speaker, second_speaker)
	inventory.out_items("sidor_head",1)
	dialogs.relocate_item_section(second_speaker, "gold_art","in")
end

--' Гинеколог дал запчастей денег и спавн перфузора
function shura_otdal(first_speaker, second_speaker)
	inventory.give_items("mutant_chimera_kogot", 5)
	dialogs.relocate_money(second_speaker, 30000, "in")
	AI:create_free("perfuzor_pust",vector():set(-411.602,0.698,62.837),160046,2889)
end

function medik_sms3()
	news_manager.send_tip("medik_sms3", 4)
end

--' проверим наличие полных колб для Гинеколога
function ginek_vlip_have()
	return inventory.search("kolba_orand_poln",1) ~= false and
		inventory.search("kolba_siniy_poln",1) ~= false
end

--' отдадим колбы Гинекологу и получим нож хирурга и Сайгу "Снайперскую"
function ginek_vlip_done(first_speaker, second_speaker)
	inventory.out_items("kolba_orand_poln",1)
	inventory.out_items("kolba_siniy_poln",1)
	dialogs.relocate_item_section(second_speaker, "fake_wpn_knife_n","in")
	dialogs.relocate_item_section(second_speaker, "wpn_sayga12_sk1","in")
	dialogs.relocate_item_section(second_speaker, "ammo_12x70_kart","in")
	second_speaker:set_relation(game_object.friend, first_speaker)
end

function ziklop_sms1()
	news_manager.send_tip("ziklop_sms1", 5)
end

--' спавним труп контролёра
function spawn_trupak()
	AI:create_free("trupak", vector():set(277.781,-49.943,-110.972),57327,2089)
end

--' проверим наличие трупа для Филина
function land_oxot_nayti_have()
	return inventory.search("trupak",1) ~= false
end

--' проверим наличие вещей для Филина
function filin_skarb()
	return inventory.search("mutant_chimera_kogot",10) ~= false
end

--' проверим наличие финансов за чучело
function filin_have_money_100000(actor,npc)
    return actor:money() > 100000
end

--' отдадим когти Филину и заспавним голову Сидора
function filin_kogot(first_speaker, second_speaker)
	inventory.out_items("mutant_chimera_kogot",10)
	AI:create_free("sidor_head", vector():set(-106.790,20.220,-49.719),685943,2894)
end

--' отдадим деньги Филину за чучело
function filin_give_money_100000(t1,t2)
	local npc=t1
	if npc:id()==Actor:id() then
		npc=t2
	end
	dialogs.relocate_money(npc,100000,"out")
end

--' Удалим труп контролёра
function delete_trups() 
	local se_obj = snp.object_by_section_offline("trupak")
	if se_obj then
		AI:release(se_obj, true)
	end
end

--' рюкзачок Химеры на Радаре
function new_inventory19()
	AI:create_free("m_inventory_box19", vector():set(-17.792,0.198,-56.856),5019,1960)
	AI:create_free("kolba_orand_poln", vector():set(-17.436,0.198,-56.755),5019,1960)
	AI:create_free("kolba_orand_poln", vector():set(-17.310,0.198,-56.975),5019,1960)
	AI:create_free("kolba_siniy_poln", vector():set(-17.374,0.198,-57.115),5018,1960)
	AI:create_free("kolba_siniy_poln", vector():set(-17.354,0.198,-57.376),5018,1960)
	naxac.hero_rename_start("Стрелок")
end

--' удалим пустой перфузор
function delete_perfuz() 
	local se_obj = snp.object_by_section_offline("perfuzor_pust")
	if se_obj then
		AI:release(se_obj, true)
	end
end

--' последний тайник Циклопа и спавн полного перфузора в виде рюкзака
function new_inventory20()
	AI:create_free("m_inventory_box20", vector():set(-261.508,-22.589,211.521),74263,1789)
	AI:create_free("m_inventory_box38", vector():set(-411.602,0.698,62.837),160046,2889)
end

function kluk_sms1()
	news_manager.send_tip("kluk_sms1", 5)
end

--' отдадим карту Клыку
function karta_otdat1(first_speaker, second_speaker)
	inventory.out_items("kluk_karta",1)
end

--' проверим наличие блокнота наёмника
function kluk_vstrecha_have()
	return inventory.search("naem_bloknot",1) ~= false
end

--' отдадим блокнот наёмника Клыку
function kluk_vstrecha_done(first_speaker, second_speaker)
	inventory.out_items("naem_bloknot",1)
end

--' убираем ненужные труп Костолома с Варлаба
function delete_warlab_trups()
	local se_obj = AI:object("warlab_kostolom_dead")
	if se_obj then
		AI:release(se_obj, true)
	end
end

--' Вступаем в Монолит
function join_monolith (actor, npc)
	printf ("ACTOR NOW IN MONOLITH COMMUNITY")
	if Actor then
		Actor:set_character_community ("monolith", 0, 0)
	end
end

--' Вступаем в Наёмники
function join_killer (actor, npc)
	if Actor ~= nil then 
		Actor:set_character_community("killer", 0, 0)
		relation_registry.set_community_goodwill ("killer", Actor:id(), 500)
	end
end

--' Вступаем в Свободу
function join_freedom (actor, npc)
	if Actor then
		Actor:set_character_community ("freedom", 0, 0)
	end
end

--' заспавним фанатиков и наёмников на Варлабе
function spawn_nepis_to_warlab()
	AI:create_free("pri_monolith_respawn_1",vector():set(5.648,0.741,2.091),5363,3210)
	AI:create("tank_spawn_zasada1",vector():set(5.648,0.741,2.091),5363,3210)
	AI:create_free("pri_monolith_respawn_2",vector():set(6.743,1.004,-1.577),5654,3210)
	AI:create("tank_spawn_zasada2",vector():set(6.743,1.004,-1.577),5654,3210)
	AI:create_free("rad_monolith_respawn_3",vector():set(2.688,1.059,-5.867),4873,3187)
	AI:create_free("rad_monolith_respawn_3",vector():set(2.688,1.059,-5.867),4873,3187)
	AI:create_free("rad_monolith_respawn_1",vector():set(2.688,1.059,-5.867),4873,3187)
	AI:create_free("pri_monolith_respawn_1",vector():set(-2.972,0.379,-3.270),3960,3168)
	AI:create_free("pri_monolith_respawn_2",vector():set(-2.972,0.379,-3.270),3960,3168)
	AI:create("tank_spawn_zasada3",vector():set(-13.204,-3.150,1.400),1830,3168)
	AI:create_free("rad_monolith_respawn_1",vector():set(-5.634,1.073,9.869),3224,3171)
	AI:create_free("rad_monolith_respawn_1",vector():set(-5.634,1.073,9.869),3224,3171)
	AI:create("tank_spawn_zasada3",vector():set(-16.708,-3.083,-16.421),1196,3158)
	AI:create_free("rad_monolith_respawn_2",vector():set(-16.708,-3.083,-16.421),1196,3158)
	AI:create_free("rad_monolith_respawn_3",vector():set(-16.708,-3.083,-16.421),1196,3158)
	AI:create_free("pri_monolith_respawn_2",vector():set(14.347,-11.473,-8.145),6669,3212)
	AI:create_free("pri_monolith_respawn_1",vector():set(14.347,-11.473,-8.145),6669,3212)
	AI:create_free("rad_monolith_respawn_3",vector():set(-3.450,-11.413,-6.176),3782,3181)
	AI:create("tank_spawn_zasada",vector():set(-3.450,-11.413,-6.176),3782,3181)
	AI:create_free("pri_monolith_respawn_2",vector():set(2.568,-11.470,2.541),4895,3188)
	AI:create_free("pri_monolith_respawn_2",vector():set(2.568,-11.470,2.541),4895,3188)
	AI:create("tank_spawn_zasada1",vector():set(15.654,-11.415,-0.020),6905,3209)
	AI:create_free("rad_monolith_respawn_1",vector():set(0.708,-7.310,-6.948),4524,3182)
	AI:create_free("rad_monolith_respawn_2",vector():set(-0.106,-3.150,4.517),4452,3196)
	AI:create_free("mil_killer_respawn_2",vector():set(16.459,1.199,-2.748),7009,3216)
	AI:create_free("mil_killer_respawn_1",vector():set(16.459,1.199,-2.748),7009,3216)
	AI:create_free("mil_killer_respawn_2",vector():set(-1.101,1.010,0.302),4184,3187)
	AI:create_free("mil_killer_respawn_3",vector():set(-12.934,1.001,3.860),1956,3162)
	AI:create_free("ros_killer_respawn_2",vector():set(-10.352,-7.043,-32.332),2224,3170)
	AI:create_free("ros_killer_respawn_1",vector():set(-10.352,-7.043,-32.332),2224,3170)
	AI:create_free("ros_killer_respawn_2",vector():set(-10.352,-7.043,-32.332),2224,3170)
	AI:create_free("ros_killer_respawn_1",vector():set(-37.230,-11.944,-36.897),143,3155)
	AI:create_free("ros_killer_respawn_3",vector():set(-37.265,-12.052,-62.219),107,3153)
	AI:create_free("mil_killer_respawn_1",vector():set(-15.675,-1.421,-33.730),1393,3164)
	AI:create_free("mil_killer_respawn_2",vector():set(-13.429,-15.390,6.870),1852,3160)
	AI:create_free("mil_killer_respawn_3",vector():set(-13.429,-15.390,6.870),1852,3160)
	AI:create_free("ros_killer_respawn_3",vector():set(6.449,-15.416,17.305),5580,3189)
	AI:create_free("ros_killer_respawn_2",vector():set(9.509,-19.704,10.085),6118,3204)
	AI:create_free("ros_killer_respawn_2",vector():set(-3.896,-7.313,0.398),3598,3172)
	AI:create_free("ros_killer_respawn_3",vector():set(-3.896,-7.313,0.398),3598,3172)
	AI:create_free("ros_killer_respawn_3",vector():set(2.706,-3.150,6.640),4903,3178)
end

--' спавним телепорт на входе в секретку Варлаба
function spawn_teleport_warlab_taynik()
	local se_obj = AI:create("m_teleport_warlab_sekret",vector():set(18.836868286133,-3.1513543128967,0.90203523635864),7161,3217)
	set_story_id(se_obj, story_ids.m_teleport_warlab_sekret)
end

--' проверим наличие псевдопечатки
function proverim_pseudo()
	return inventory.search("pseudopechatka",1) ~= false
end

--' проверим наличие печатки наёмника
function lukash_pechatka_nayti_have()
	return inventory.search("amul_naemn",1) ~= false
end

--' отдадим псевдопечатку Лукашу
function lukash_pechatka_nayti_done(first_speaker, second_speaker)
	inventory.out_items("pseudopechatka",1)
end

--' заспавним собачек Варлабе
function spawn_dog_to_warlab()
	AI:create_free("dog_habaruch",vector():set(3.371,1.008,-3.150),4988,3187)
	AI:create_free("dog_weak",vector():set(3.371,1.008,-3.150),4988,3187)
	AI:create_free("dog_weak",vector():set(-12.583,-2.960,0.312),1942,3168)
	AI:create_free("dog_normal",vector():set(-12.583,-2.960,0.312),1942,3168)
	AI:create_free("pseudodog_normal",vector():set(-4.049,0.998,3.772),3607,3174)
	AI:create_free("dog_strong",vector():set(-4.049,0.998,3.772),3607,3174)
	AI:create_free("dog_strong",vector():set(-4.049,0.998,3.772),3607,3174)
	AI:create_free("dog_weak",vector():set(-6.291,-7.085,2.363),3064,3172)
	AI:create_free("dog_weak",vector():set(-6.291,-7.085,2.363),3064,3172)
	AI:create_free("pseudodog_weak",vector():set(-6.291,-7.085,2.363),3064,3172)
	AI:create_free("pseudodog_big",vector():set(-6.291,-7.085,2.363),3064,3172)
	AI:create_free("dog_weak",vector():set(-1.689,-3.150,7.975),4209,3178)
	AI:create_free("pseudodog_normal",vector():set(-1.689,-3.150,7.975),4209,3178)
	AI:create_free("dog_normal",vector():set(-1.689,-3.150,7.975),4209,3178)
	AI:create_free("dog_habaruch",vector():set(3.961,-11.417,-1.361),5107,3191)
	AI:create_free("dog_habaruch",vector():set(3.961,-11.417,-1.361),5107,3191)
	AI:create_free("dog_weak",vector():set(3.961,-11.417,-1.361),5107,3191)
	AI:create_free("dog_weak",vector():set(3.961,-11.417,-1.361),5107,3191)
	AI:create_free("dog_weak",vector():set(3.961,-11.417,-1.361),5107,3191)
	AI:create_free("dog_weak",vector():set(3.961,-11.417,-1.361),5107,3191)
	AI:create_free("dog_weak",vector():set(3.961,-11.417,-1.361),5107,3191)
	AI:create_free("pseudodog_weak",vector():set(-23.483,-15.388,-0.544),581,3157)
	AI:create_free("dog_normal",vector():set(-23.483,-15.388,-0.544),581,3157)
	AI:create_free("dog_normal",vector():set(-23.483,-15.388,-0.544),581,3157)
	AI:create_free("dog_weak",vector():set(-23.483,-15.388,-0.544),581,3157)
end

--' заспавним болотных тварей рестриктором
function spawn_bolot_tv()
	AI:create_free("bloodsucker_effector",vector():set(4.587,-19.703,6.885),5252,3195)
	AI:create_free("bloodsucker_effector",vector():set(-0.755,-19.646,16.467),4380,3180)
	news_manager.send_tip("spawn_bolot_tv")
end

--' Удаляем Клыка и Пилигрима с АС
function delete_stalky_as()
	local se_obj = AI:object("kluk_sklad")
	if se_obj then
		AI:release(se_obj, true)
	end
	se_obj = AI:object("piligrim_sklad")
	if se_obj then
		AI:release(se_obj, true)
	end
end

--' проверим наличие рации
function pantera_fone_nayti_have()
	return inventory.search("telefon",1) ~= false
end

--' отдадим рацию Пантере и получим бабки
function pantera_fone_nayti_done(first_speaker, second_speaker)
	inventory.out_items("telefon",1)
	dialogs.relocate_money(second_speaker, 5000, "in")
end

--' отдадим рацию Пантере при провале квеста
function pantera_fone_nenashel(first_speaker, second_speaker)
	inventory.out_items("telefon",1)
end

--' проверим наличие диска для Пантеры
function pantera_zadanie2_have()
	return inventory.search("disk_pantera",1) ~= false
end

--' отдадим диск Пантере и получим бабки
function pantera_zadanie2_done(first_speaker, second_speaker)
	inventory.out_items("disk_pantera",1)
	dialogs.relocate_money(second_speaker, 60000, "in")
end

--' проверим наличие финансов для Пантеры при провале квеста
function pantera_have_money_50000(actor,npc)
    return actor:money() > 250000
end

--' отдадим диск Пантере 
function pantera_disk_proval(first_speaker, second_speaker)
	inventory.out_items("disk_pantera",1)
end

--' отдадим деньги Пантере при провале квеста
function pantera_give_money_50000(t1,t2)
	local npc=t1
	if npc:id()==Actor:id() then
		npc=t2
	end
	dialogs.relocate_money(npc,250000,"out")
end

--' проверим наличие чучела
function body_pantera_talk_have()
	return inventory.search("chuchelo_body",1) ~= false
end

--' отдадим чучело
function body_pantera_talk_done(first_speaker, second_speaker)
	inventory.out_items("chuchelo_body",1)
end

--' спавним рюкзачок для задания Пантеры на АС и чучело и возьмём маскхалат
function new_inventory21(first_speaker, second_speaker)
	inventory.give_items("meceniy_outfit_new", 1)
	inventory.give_items("ekza_akkumul_sci", 1)

	local se_obj = AI:create_free("m_inventory_box21", vector():set(-26.052833557129,-6.3251914978027,-20.990715026855),285446,1593)
	
	se_obj = AI:story_object(story_ids.mil_chuchelo_body)
	if se_obj == nil then
		se_obj = AI:object("mil_physic_object0189")
		if se_obj then
			AI:release(se_obj, true)
		end
		AI:create( AI:spawn_id(story_ids.mil_chuchelo_body) )
	end
end

--' проверим наличие маскхалата и суперската
function pantera_zadanie3_have()
	return inventory.search("meceniy_outfit_new",1) ~= false and
		inventory.search("exo_mil_exoskeleton",1) ~= false
end

--' отдадим броники Пантере и получим бабки
function pantera_zadanie3_done(first_speaker, second_speaker)
	inventory.out_items("meceniy_outfit_new",1)
	inventory.out_items("exo_mil_exoskeleton",1)
	dialogs.relocate_money(second_speaker, 10000, "in")
end

--' Удаляем Пантеру и телохранителей
function delete_pant_warl()
	local se_obj = AI:object("pantera")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("bodi_pantera1")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("bodi_pantera2")
	if se_obj then AI:release(se_obj, true) end
end

function pechatka_hero_rename()
	local new_name = amk_names_lists.get_strings(false)
	local text = format_text_pairs(
		game.translate_string("pechatka_hero_rename"),
		{hero_name = new_name}
	)
	news_manager.send_tip(text , nil, nil, 15000)
	naxac.hero_rename_start(new_name)
end

--' босс забрал печатку и спавн новой и спавн наёмников босса
function zabral_gad_pechatku(first_speaker, second_speaker)
	inventory.out_items("amul_naemn",1)
	Actor:disable_info_portion("pechatka_taken")
	naxac.hero_rename_start("Стрелок")
	dialogs.relocate_item_section(second_speaker, "pseudopechatka","in")
	arhara_dialog.join_stalker()
end

--' телохран Пантеры дал арт на прощание и свой ствол
function body_dal_art(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "af_kol_3","in")
	dialogs.relocate_item_section(second_speaker, "wpn_sg550_sr","in")
end

--' получим Булыжники от Голограмы
function gologr_tehnik_done(first_speaker, second_speaker)
	inventory.give_items("af_buliz", 2)
end

--' тайник Циклопа после Варлаба
function new_inventory22()
	AI:create_free("m_inventory_box22", vector():set(-39.015,10.378,31.830),148276,295)
end

function kanal_sms()
	news_manager.send_tip("kanal_sms")
end

function kanal_sms1()
	news_manager.send_tip("kanal_sms1")
end

--' Удаляем Пантеру-нейтралку, телохранителей и босса
function del_pant_neytral_warl()
	local se_obj = AI:object("pantera_new")
	if se_obj then
		AI:release(se_obj, true)
	end
	se_obj = AI:object("body1_pantera_new")
	if se_obj then
		AI:release(se_obj, true)
	end
	se_obj = AI:object("body2_pantera_new")
	if se_obj then
		AI:release(se_obj, true)
	end
	se_obj = AI:object("warlab_boss")
	if se_obj then
		AI:release(se_obj, true)
	end
end

--' Удаляем старого Голограму с НЗ
function del_gol_old()
	local se_obj = AI:story_object(story_ids.lazaret_golograma)
	if se_obj then
		AI:release(se_obj, true)
	end
end

--' Удаляем нового Голограму с НЗ
function del_tehnik_gol()
	local se_obj = AI:story_object(story_ids.tehnik_golograma)
	if se_obj then
		AI:release(se_obj, true)
	end
end

--' проверим наличие булыжников и Сердца полтерг
function klenov_vse_ok_have()
	return inventory.search("af_buliz",10) ~= false and
		inventory.search("af_part_monolit",1) ~= false
end

--' отдадим их Клёнову
function klenov_vse_ok_done(first_speaker, second_speaker)
	inventory.out_items("af_part_monolit",1)
	inventory.out_items("af_buliz",10)
end

function pant_zveri_sms()
    news_manager.send_tip("pant_zveri_sms",4)
end

--' убираем Витамина со складов
function delete_vitaminsklad()
	local se_obj = AI:object("military_vitamin")
	if se_obj then
		AI:release(se_obj, true)
	end
end

--' Удаляем Клыка и Пилигрима с НЗ рестриктором
function delete_stalky_nz()
	local se_obj = AI:object("stalk_kluk")
	if se_obj then
		AI:release(se_obj, true)
	end
	se_obj = AI:object("piligrim_2")
	if se_obj then
		AI:release(se_obj, true)
	end
end

--' получим золото и ключ от телепорта у Витамина
function vitamin_reyd_zadan_done(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker,"bullion_gild","in") 
	dialogs.relocate_item_section(second_speaker,"kluch_dell_teleport_warlab","in")
	second_speaker:set_relation(game_object.friend, first_speaker)
	news_manager.send_tip("ziclop_remind", 11, nil, 20000)
end


--' убираем свободовцев с Радара
function delete_svoboda_radars()
	local freemans = {
		"radar_vitamin",
		"radar_svoboda_reyd1",
		"radar_svoboda_reyd2",
		"radar_svoboda_reyd3",
		"radar_svoboda_reyd4",
		"radar_svoboda_reyd5",
		"radar_svoboda_reyd6",
		"radar_svoboda_reyd7",
		"radar_svoboda_reyd8",
		"radar_svoboda_reyd9",
		"radar_svoboda_reyd10"
	}
	local se_obj
	for i, name in ipairs(freemans) do
		se_obj = AI:object(name)
		if se_obj then AI:release(se_obj, true) end
	end
end

--' проверим наличие фальшивой карты Клыка
function zv_kopiy()
	return inventory.search("kluk_karta_kopiy",1) ~= false
end

--' отдадим фальшифку Звездочёту
function falshivka_otdat(first_speaker, second_speaker)
	inventory.out_items("kluk_karta_kopiy",1)
end

--' тайник с телефоном Пантеры
function new_inventory23()
	AI:create_free("m_inventory_box23", vector():set(7.256,-6.525,-12.801),5624,3202)
end

--' получим танто и именной АК-74 от Клыка
function tanto_dal(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker,"fake_wpn_knif2","in")
	dialogs.relocate_item_section(second_speaker,"wpn_ak74_m3","in")
	dialogs.relocate_item_section(second_speaker,"ammo_5.45x39_izomorf","in")
end

--' проверим наличие финансов для кидалы
function bablo_razvod(actor,npc)
    return actor:money() > 70000
end

--' отдадим деньги кидале
function kidalovo(t1,t2)
	local npc = t1:id()==0 and t2 or t1
	dialogs.relocate_money(npc,70000,"out")
end

--' Сидор дал преобразователь артов и дробовик
function apteka_otdal(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker,"det_artefact_indy","in")
	dialogs.relocate_item_section(second_speaker,"wpn_usas12","in")
	dialogs.relocate_item_section(second_speaker,"ammo_12x70_kart","in")
	dialogs.relocate_item_section(second_speaker,"medkit","in")
end

--' убираем кидалу
function delete_kidalo()
	local se_obj = AI:object("esc_kidalo")
	if se_obj then AI:release(se_obj, true) end
end

--' Рестрикторные СМС
function band_yantar_sms()
    news_manager.send_tip("band_yantar_sms")
end
function razvod_sms()
    news_manager.send_tip("razvod_sms")
end
function gar_naemn_grup1_sms()
    news_manager.send_tip("gar_naemn_grup1_sms")
end
function dark_btr1_sms()
    news_manager.send_tip("dark_btr1_sms")
end
function dark_sidor_sms()
    news_manager.send_tip("dark_sidor_sms")
end
function garbage_adren_sms()
    news_manager.send_tip("garbage_adren_sms")
end
function lysyi_sms()
    news_manager.send_tip("lysyi_sms")
end
function art_negoden_sms()
    news_manager.send_tip("art_negoden_sms", 2)
end
function pant_kord_sms1()
    news_manager.send_tip("pant_kord_sms1")
end
function dolbannn_sms()
    news_manager.send_tip("dolbannn_sms")
end
function sidor_piyn_sms()
    news_manager.send_tip("sidor_piyn_sms")
end
function kluk_sms3()
    news_manager.send_tip("kluk_sms3")
end
function gg_sms1()
    news_manager.send_tip("gg_sms1", 2)
end
function kluk_sms2()
    news_manager.send_tip("kluk_sms2")
end
function yan_sms_barmen()
    news_manager.send_tip("yan_sms_barmen")
	local obj = AI:object("yantar_arhara_mine1")
	if obj then AI:release(obj, true) end
end
function yan_barmen_otvet()
    news_manager.send_tip("yan_barmen_otvet")
end
function plen_sms()
    news_manager.send_tip("plen_sms")
end
function village_sms_kapitan()
    news_manager.send_tip("village_sms_kapitan")
end
function village_sms_pantera()
    news_manager.send_tip("village_sms_pantera")
end
function village_sms_obsledovanie()
    news_manager.send_tip("village_sms_obsledovanie")
end
function village_pantera_otvet()
    news_manager.send_tip("village_pantera_otvet")
end
function kolm_stroy_sms()
	local snd = sound_object([[characters_voice\human_03\stalker\talk\leave\leave_67]])
    news_manager.send_tip("kolm_stroy_sms", 4, nil, snd:length() + 1000)
end
function sms_pobeda()
    news_manager.send_tip("sms_pobeda", 1)
end
function strelok_kluk_vopros1()
    news_manager.send_tip("strelok_kluk_vopros1")
end
function kluk_perexod_derevny()
    news_manager.send_tip("kluk_perexod_derevny")
end
function kluk_sms_pili_lovushka()
	news_manager.send_tip("kluk_sms_pili_lovushka")
end
function vill_klenov_sms()
	news_manager.send_tip("vill_klenov_sms", 2)
end
function warl_kolmogor_sms()
	news_manager.send_tip("warl_kolmogor_sms")
end
function warl_gg_pili_sms()
	news_manager.send_tip("warl_gg_pili_sms")
end
function warl_pili_gg_otvet_sms()
	news_manager.send_tip("warl_pili_gg_otvet_sms")
end
function agro_torgash_sms()
	news_manager.send_tip("agro_torgash_sms")
end
function otsroch_sms()
	news_manager.send_tip("otsroch_sms")
end
function gg_black_doc_sms1()
	news_manager.send_tip("gg_black_doc_sms1", 10, nil, nil, nil, "arhara_dialog.gg_black_doc_sms2()")
end
function gg_black_doc_sms2()
	news_manager.send_tip("gg_black_doc_sms2", nil, nil, nil, nil, "arhara_dialog.gg_black_doc_sms3()", 5)
end
function gg_black_doc_sms3()
	news_manager.send_tip("gg_black_doc_sms3", nil, nil, 20000, nil, "arhara_dialog.gg_black_doc_sms4()")
end
function gg_black_doc_sms4()
	news_manager.send_tip("gg_black_doc_sms4", nil, nil, nil, nil, "arhara_dialog.gg_black_doc_sms5()", 7)
end
function gg_black_doc_sms5()
	news_manager.send_tip("gg_black_doc_sms5", nil, nil, nil, nil, "arhara_dialog.gg_black_doc_sms6()")
end
function gg_black_doc_sms6()
	news_manager.send_tip("gg_black_doc_sms6")
end
function sms_ubit_glavar()
	news_manager.send_tip("sms_ubit_glavar")
end
function pili_zayti_after_antenna_sms()
	news_manager.send_tip("pili_zayti_after_antenna_sms")
end
function actor_trup_sms()
	news_manager.send_tip("actor_trup_sms")
end
function sms_uchenuy_pobeg()
	news_manager.send_tip("sms_uchenuy_pobeg", 3)
end
function pipets_vert_zadanie_sms()
	news_manager.send_tip("pipets_vert_zadanie_sms")
end
function hit_heli_hit_sms1()
	news_manager.send_tip("hit_heli_hit_sms1", nil, nil, nil, nil, "arhara_dialog.hit_heli_hit_sms2()")
end
function hit_heli_hit_sms2()
	news_manager.send_tip("hit_heli_hit_sms2")
end
function hit_heli_hit_sms3()
	news_manager.send_tip("hit_heli_hit_sms3", nil, nil, nil, nil, "arhara_dialog.pipets_vert_zadanie_sms()", 1)
end
function hit_heli_hit_sms4()
	news_manager.send_tip("hit_heli_hit_sms4", nil, nil, nil, nil, "arhara_dialog.hit_heli_hit_sms5()")
end
function hit_heli_hit_sms5()
	news_manager.send_tip("hit_heli_hit_sms5")
end
function sms_frits1()
	news_manager.send_tip("sms_frits1")
end
function sms_frits2()
	news_manager.send_tip("sms_frits2")
end
function sms_frits3()
	news_manager.send_tip("sms_frits3")
end
function sms_frits4()
	if math.random() > 0.5 then
		news_manager.send_tip("sms_frits4_1")
	else
		news_manager.send_tip("sms_frits4_2")
	end
end
function sms_doc_letit()
	news_manager.send_tip("sms_doc_letit", 12)
end
function dok_ot_andersena_letit()
	news_manager.send_tip("dok_ot_andersena_letit", nil, "doctor_black")
end
function sekretnuy_vuhod_sms()
	news_manager.send_tip("sekretnuy_vuhod_sms")
end
function sekretnuy_vuhod_sms1()
	news_manager.send_tip("sekretnuy_vuhod_sms1")
end
function boloto_sms_k_doku()
	news_manager.send_tip("boloto_sms_k_doku")
end
function sms_ot_doka_o_verte()
	news_manager.send_tip("sms_ot_doka_o_verte")
end
function sms_boloto_k_prizraku()
	news_manager.send_tip("sms_boloto_k_prizraku")
end
function sms_boloto_ot_prizraka()
	news_manager.send_tip("sms_boloto_ot_prizraka")
end
function sms_70m_vert()
	news_manager.send_tip("sms_70m_vert")
end
function letchik_sms1()
	news_manager.send_tip("letchik_sms1")
end
function rugan_gg_sms()
	news_manager.send_tip("rugan_gg_sms")
end
function letchik_sms2()
	news_manager.send_tip("letchik_sms2")
end
function udav_v_vert_sms()
	news_manager.send_tip("udav_v_vert_sms")
end
function sms_udav_sel()
	news_manager.send_tip("sms_udav_sel")
end
function marsh_udav_pogib()
	news_manager.send_tip("marsh_udav_pogib")
end
function udav_antenna_sms1()
	news_manager.send_tip("udav_antenna_sms1")
end
function udav_antenna_sms2()
	news_manager.send_tip("udav_antenna_sms2")
end
function udav_antenna_sms3()
	news_manager.send_tip("udav_antenna_sms3")
end
function udav_antenna_sms4()
	news_manager.send_tip("udav_antenna_sms4")
end
function priz_bomz_sms()
	news_manager.send_tip("priz_bomz_sms", 5)
end
function fritz_shturm_mat()
	news_manager.send_tip("fritz_shturm_mat", nil, nil, nil, nil, "arhara_dialog.fritz_shturm_mat1()", 1)
end
function fritz_shturm_mat1()
	news_manager.send_tip("fritz_shturm_mat1", nil, nil, nil, nil, "arhara_dialog.black_heli_sms()", 3)
end
function black_heli_sms()
	news_manager.send_tip("black_heli_sms")
	Actor:give_info_portion("predesant_black_heli")
end
function solvador_sms1()
	news_manager.send_tip("solvador_sms1")
end
function ne_strelyt()
	news_manager.send_tip("ne_strelyt")
end
function mu_opozdaly()
	news_manager.send_tip("mu_opozdaly", 5, nil, nil, nil, "arhara_dialog.mu_opozdaly1()")
end
function mu_opozdaly1()
	news_manager.send_tip("mu_opozdaly1", nil, "doctor_black", nil, nil, "arhara_dialog.mu_opozdaly2()", 2)
end
function mu_opozdaly2()
	news_manager.send_tip("mu_opozdaly2", nil, "doctor_black")
end
function boy_sms1()
	news_manager.send_tip("boy_sms1", 5, nil, nil, nil, "arhara_dialog.boy_sms2()")
end
function boy_sms2()
	news_manager.send_tip("boy_sms2", nil, nil, nil, nil, "arhara_dialog.boy_sms2_1()")
end
function boy_sms2_1()
	news_manager.send_tip("boy_sms2_1", nil, nil, nil, nil, "arhara_dialog.boy_sms3()", 2)
end
function boy_sms3()
	news_manager.send_tip("boy_sms3")
end
function plan_zahvata_sms1()
	news_manager.send_tip("plan_zahvata_sms1", 20, nil, nil, nil, "arhara_dialog.plan_zahvata_sms2()", 1)
end
function plan_zahvata_sms2()
	news_manager.send_tip("plan_zahvata_sms2")
end
function podgotovka_zahvata_sms1()
	news_manager.send_tip("podgotovka_zahvata_sms1", 15, nil, nil, nil, "arhara_dialog.podgotovka_zahvata_sms2()", 1)
end
function podgotovka_zahvata_sms2()
	news_manager.send_tip("podgotovka_zahvata_sms2", nil, nil, nil, nil, "arhara_dialog.podgotovka_zahvata_sms3()", 5)
end
function podgotovka_zahvata_sms3()
	news_manager.send_tip( "podgotovka_zahvata_sms3", nil, nil, nil, nil, "arhara_dialog.podgotovka_zahvata_sms4()", 2)
end
function podgotovka_zahvata_sms4()
	news_manager.send_tip("podgotovka_zahvata_sms4", nil, nil, nil, nil, "arhara_dialog.podgotovka_zahvata_sms5()")
end
function podgotovka_zahvata_sms5()
	news_manager.send_tip("podgotovka_zahvata_sms5", nil, nil, nil, nil, "arhara_dialog.podgotovka_zahvata_sms6()")
end
function podgotovka_zahvata_sms6()
	news_manager.send_tip("podgotovka_zahvata_sms6", nil, nil, nil, nil, "arhara_dialog.podgotovka_zahvata_end()", 3)
end
function podgotovka_zahvata_end()
	Actor:give_info_portion("spawn_ubludky")
	--' удаляем таймер базы на Генераторах
	local se_obj = AI:story_object(story_ids.baza_doza_timer_restrictor)
	if se_obj then
		AI:release(se_obj, true)
		news_manager.send_tip("gen_dead_zone_deactivate_sms", 3, nil, 30000)
	end
end
function mat_sms1()
	news_manager.send_tip("mat_sms1")
end
function sms_ponyl()
	news_manager.send_tip("sms_ponyl")
end
function sms_spasibo_frits1()
	news_manager.send_tip("sms_spasibo_frits1", 10, nil, nil, nil, "arhara_dialog.sms_spasibo_frits2()")
end
function sms_spasibo_frits2()
	news_manager.send_tip("sms_spasibo_frits2")
	Actor:give_info_portion("uhozu_na_bazu")
end
function sapsan_ulet_sms()
	news_manager.send_tip("sapsan_ulet_sms")
end
function dok_podvox_sms1()
	news_manager.send_tip("dok_podvox_sms1", 40, "doctor_black", nil, nil, "arhara_dialog.dok_podvox_sms2()")
end
function dok_podvox_sms2()
	news_manager.send_tip("dok_podvox_sms2", nil, nil, nil, nil, "arhara_dialog.dok_podvox_sms3()")
end
function dok_podvox_sms3()
	news_manager.send_tip("dok_podvox_sms3", nil, "doctor_black", nil, nil, "arhara_dialog.dok_podvox_sms4()")
end
function dok_podvox_sms4()
	news_manager.send_tip("dok_podvox_sms4", nil, nil, nil, nil, "arhara_dialog.dok_podvox_sms5()")
end
function dok_podvox_sms5()
	news_manager.send_tip("dok_podvox_sms5", nil, "doctor_black", nil, nil, "arhara_dialog.dok_podvox_sms6()")
	Actor:give_info_portion("black_vstrecha_dosye")
end
function dok_podvox_sms6()
	news_manager.send_tip("dok_podvox_sms6")
	arhara_dialog.dosye_zvez_spawn()
	Actor:give_info_portion("spawn_black_trupak")
end
function dok_trupak_sms()
	news_manager.send_tip("dok_trupak_sms")
end
function idu_na_nz_sms1()
	news_manager.send_tip("idu_na_nz_sms1", 45, nil, nil, nil, "arhara_dialog.idu_na_nz_sms2()")
end
function idu_na_nz_sms2()
	news_manager.send_tip("idu_na_nz_sms2", nil, nil, nil, nil, "arhara_dialog.idu_na_nz_sms3()")
end
function idu_na_nz_sms3()
	news_manager.send_tip("idu_na_nz_sms3", nil, nil, nil, nil, "arhara_dialog.idu_na_nz_sms4()")
end
function idu_na_nz_sms4()
	news_manager.send_tip("idu_na_nz_sms4")
	arhara_dialog.delete_kluk_bar()
	Actor:give_info_portion("peshera_nz_poisk")
end
function peshera_naydena_sms1()
	news_manager.send_tip("peshera_naydena_sms1", 10, nil, nil, nil, "arhara_dialog.peshera_naydena_sms2()")
end
function peshera_naydena_sms2()
	news_manager.send_tip("peshera_naydena_sms2")
end
function kluk_na_meste_sms1()
	news_manager.send_tip("kluk_na_meste_sms1")
end
function kluk_shuher_sms1()
	news_manager.send_tip("kluk_shuher_sms1", 8, nil, nil, nil, "arhara_dialog.kluk_shuher_sms2()")
end
function kluk_shuher_sms2()
	news_manager.send_tip("kluk_shuher_sms2", nil, nil, nil, nil, "arhara_dialog.kluk_shuher_sms3()")
end
function kluk_shuher_sms3()
	news_manager.send_tip("kluk_shuher_sms3")
	Actor:give_info_portion("vert_aver_pantera")
end
function na_predesant_sms()
	news_manager.send_tip("na_predesant_sms")
end
function posadka_pant_sms1()
	news_manager.send_tip("posadka_pant_sms1", 5, nil, nil, nil, "arhara_dialog.posadka_pant_sms2()")
end
function posadka_pant_sms2()
	news_manager.send_tip("posadka_pant_sms2", nil, nil, nil, nil, "arhara_dialog.posadka_pant_sms3()")
end
function posadka_pant_sms3()
	news_manager.send_tip("posadka_pant_sms3")
end
function pant_proschay_sms1()
	news_manager.send_tip("pant_proschay_sms1", nil, nil, nil, nil, "arhara_dialog.pant_proschay_sms2()")
end
function pant_proschay_sms2()
	news_manager.send_tip( "pant_proschay_sms2", nil, nil, nil, nil, "arhara_dialog.pant_proschay_sms3()")
end
function pant_proschay_sms3()
	news_manager.send_tip("pant_proschay_sms3")
end
function pant_proschay_sms4()
	news_manager.send_tip("pant_proschay_sms4")
end
function muha_bazar_sms()
	if Actor:has_info("muha_talk_pro_art") then return end
	news_manager.send_tip("muha_bazar_sms", 120, nil, nil, nil, "arhara_dialog.muha_bazar_sms1()")
end
function muha_bazar_sms1()
	if Actor:has_info("muha_talk_pro_art") then return end
	news_manager.send_tip("muha_bazar_sms1")
	Actor:give_info_portion("muha_talk_pro_art")
end

function voronin_voen_sms1()
	news_manager.send_tip("voronin_voen_sms1", 50, nil, nil, nil, "arhara_dialog.voronin_voen_sms2()")
end
function voronin_voen_sms2()
	news_manager.send_tip("voronin_voen_sms2", nil, nil, nil, nil, "arhara_dialog.voronin_voen_sms3()")
end
function voronin_voen_sms3()
	news_manager.send_tip("voronin_voen_sms3", nil, nil, nil, nil, "arhara_dialog.voronin_voen_sms4()")
end
function voronin_voen_sms4()
	news_manager.send_tip("voronin_voen_sms4", nil, nil, nil, nil, "arhara_dialog.voronin_voen_sms5()")
end
function voronin_voen_sms5()
	news_manager.send_tip("voronin_voen_sms5", nil, nil, nil, nil, "arhara_dialog.voronin_voen_sms6()")
end
function voronin_voen_sms6()
	news_manager.send_tip("voronin_voen_sms6")
	Actor:give_info_portion("voronin_samopisez_start")
end
function chaes2_kluk_sms1()
	news_manager.send_tip("chaes2_kluk_sms1", 10, nil, nil, nil, "arhara_dialog.chaes2_kluk_sms2()")
end
function chaes2_kluk_sms2()
	news_manager.send_tip("chaes2_kluk_sms2", nil, nil, nil, nil, "arhara_dialog.chaes2_kluk_sms3()")
end
function chaes2_kluk_sms3()
	news_manager.send_tip("chaes2_kluk_sms3")
end
function iz_moskvy_sms1()
	news_manager.send_tip("iz_moskvy_sms1", nil, nil, nil, nil, "arhara_dialog.iz_moskvy_sms2()")
end
function iz_moskvy_sms2()
	news_manager.send_tip("iz_moskvy_sms2", nil, nil, nil, nil, "arhara_dialog.iz_moskvy_sms3()")
end
function iz_moskvy_sms3()
	news_manager.send_tip("iz_moskvy_sms3", nil, nil, nil, nil, "arhara_dialog.iz_moskvy_sms4()")
end
function iz_moskvy_sms4()
	news_manager.send_tip("iz_moskvy_sms4", nil, nil, nil, nil, "arhara_dialog.iz_moskvy_sms5()")
end
function iz_moskvy_sms5()
	news_manager.send_tip("iz_moskvy_sms5")
end
function dosvidanie_devchonka()
	news_manager.send_tip("dosvidanie_devchonka", nil, nil, nil, nil, "arhara_dialog.mly_ona_mehy_dostala()", 3)
	Actor:give_info_portion("nadoela_start")
end
function mly_ona_mehy_dostala()
	Actor:give_info_portion("ona_uletela")
end
function pilot_muhi_sms()
	news_manager.send_tip("pilot_muhi_sms", 6)
end
function vzruv_aver_vert_sms1()
	news_manager.send_tip("vzruv_aver_vert_sms1", 5, nil, nil, nil, "arhara_dialog.vzruv_aver_vert_sms2()")
end
function vzruv_aver_vert_sms2()
	news_manager.send_tip("vzruv_aver_vert_sms2", nil, nil, nil, nil, "arhara_dialog.vzruv_aver_vert_sms3()")
end
function vzruv_aver_vert_sms3()
	news_manager.send_tip("vzruv_aver_vert_sms3", nil, nil, nil, nil, "arhara_dialog.vzruv_aver_vert_sms4()", 10)
end
function vzruv_aver_vert_sms4()
	news_manager.send_tip("vzruv_aver_vert_sms4")
end
function after_die_muha_sms1()
	news_manager.send_tip("after_die_muha_sms1", 20, nil, nil, nil, "arhara_dialog.after_die_muha_sms2()")
end
function after_die_muha_sms2()
	news_manager.send_tip("after_die_muha_sms2", nil, nil, nil, nil, "arhara_dialog.after_die_muha_sms3()", 3)
end
function after_die_muha_sms3()
	news_manager.send_tip("after_die_muha_sms3", nil, nil, nil, nil, "arhara_dialog.after_die_muha_sms4()")
end
function after_die_muha_sms4()
	news_manager.send_tip("after_die_muha_sms4", nil, "doctor_black", nil, nil, "arhara_dialog.after_die_muha_sms5()", 4)
end
function after_die_muha_sms5()
	news_manager.send_tip("after_die_muha_sms5", nil, nil, nil, nil, "arhara_dialog.after_die_muha_sms6()")
end
function after_die_muha_sms6()
	news_manager.send_tip("after_die_muha_sms6")
end
function mono_netu_sms1()
	news_manager.send_tip("mono_netu_sms1", 10, nil, nil, nil, "arhara_dialog.mono_netu_sms2()")
end
function mono_netu_sms2()
	news_manager.send_tip("mono_netu_sms2", nil, nil, 20000, nil, "arhara_dialog.mono_netu_sms3()", 3)
	Actor:give_info_portion("vkluchit_generator_start")
end
function mono_netu_sms3()
	news_manager.send_tip("mono_netu_sms3", nil, nil, nil, nil, "arhara_dialog.mono_netu_sms4()", 3)
end
function mono_netu_sms4()
	news_manager.send_tip("mono_netu_sms4", nil, nil, nil, nil, "arhara_dialog.mono_netu_sms5()", 3)
end
function mono_netu_sms5()
	news_manager.send_tip("mono_netu_sms5", nil, nil, nil, nil, "arhara_dialog.mono_netu_sms6()", 3)
end
function mono_netu_sms6()
	news_manager.send_tip("mono_netu_sms6", nil, nil, 10000)
	arhara_dialog.dell_muha_die_aver()
end
function vitamin_posrednik_sms1()
	news_manager.send_tip("vitamin_posrednik_sms1", 12, nil, nil, nil, "arhara_dialog.vitamin_posrednik_sms2()")
end
function vitamin_posrednik_sms2()
	news_manager.send_tip("vitamin_posrednik_sms2", nil, nil, nil, nil, "arhara_dialog.vitamin_posrednik_sms3()", 2)
end
function vitamin_posrednik_sms3()
	news_manager.send_tip("vitamin_posrednik_sms3", nil, nil, nil, nil, "arhara_dialog.vitamin_posrednik_sms4()", 2)
end
function vitamin_posrednik_sms4()
	news_manager.send_tip("vitamin_posrednik_sms4", nil, nil, nil, nil, "arhara_dialog.vitamin_posrednik_sms5()")
end
function vitamin_posrednik_sms5()
	news_manager.send_tip("vitamin_posrednik_sms5", nil, nil, nil, nil, "arhara_dialog.vitamin_posrednik_spawn()", 10)
end
function vitamin_posrednik_spawn()
	Actor:give_info_portion("spawn_svoboda_peregovory")
	start_real_timer("run", 14, "arhara_dialog.spawn_sapsan()")
end
function spawn_sapsan()
	--' заспавним мнимый телепорт на генераторах
	AI:create_free("imitator_tele_final1",vector():set(179.736,31.259,-454.935),544230,3133)
	Actor:give_info_portion("spawn_sapsanchik_peregovory")
end
function sv_chern_peregovor_sms1()
	news_manager.send_tip("sv_chern_peregovor_sms1", 2, nil, nil, nil, "arhara_dialog.sv_chern_peregovor_sms2()")
end
function sv_chern_peregovor_sms2()
	news_manager.send_tip("sv_chern_peregovor_sms2", nil, "freedom", nil, nil, "arhara_dialog.sv_chern_peregovor_sms3()")
end
function sv_chern_peregovor_sms3()
	news_manager.send_tip("sv_chern_peregovor_sms3", nil, nil, nil, nil, "arhara_dialog.sv_chern_peregovor_sms4()", -1)
end
function sv_chern_peregovor_sms4()
	news_manager.send_tip("sv_chern_peregovor_sms4", nil, nil, nil, nil, "arhara_dialog.sv_chern_peregovor_sms5()")
	Actor:give_info_portion("nota_bene")
end
function sv_chern_peregovor_sms5()
	news_manager.send_tip("sv_chern_peregovor_sms5", nil, nil, nil, nil, "arhara_dialog.sv_chern_peregovor_sms6()")
end
function sv_chern_peregovor_sms6()
	news_manager.send_tip("sv_chern_peregovor_sms6", nil, nil, nil, nil, "arhara_dialog.rashod_strelki()", 2)
end
function rashod_strelki()
	Actor:give_info_portion("rashod_strelki")
	--' заспавним парочку гигантов у шлагбаума
	AI:create_free("gigant_red_strong",vector():set(71.960,26.516,-96.341),420846,3120)
	AI:create_free("gigant_strong",vector():set(71.960,26.516,-96.341),420846,3120)
end
function u_shlagbauma_sms1()
	news_manager.send_tip("u_shlagbauma_sms1", 6, nil, nil, nil, "arhara_dialog.u_shlagbauma_sms2()", 4)
end
function u_shlagbauma_sms2()
	news_manager.send_tip("u_shlagbauma_sms2", nil, nil, nil, nil, "arhara_dialog.u_shlagbauma_sms3()")
	arhara_dialog.dell_uchen_gen_povtorno()
	Actor:give_info_portion("idu_k_generatoru")
end
function u_shlagbauma_sms3()
	news_manager.send_tip("u_shlagbauma_sms3")
end
function u_tretego_generatora_sms1()
	news_manager.send_tip("u_tretego_generatora_sms1", 2, nil, nil, nil, "arhara_dialog.u_tretego_generatora_sms2()")
end
function u_tretego_generatora_sms2()
	news_manager.send_tip("u_tretego_generatora_sms2", nil, nil, nil, nil, "arhara_dialog.u_tretego_generatora_sms3()")
end
function u_tretego_generatora_sms3()
	news_manager.send_tip("u_tretego_generatora_sms3", nil, nil, nil, nil, "arhara_dialog.u_tretego_generatora_sms4()")
end
function u_tretego_generatora_sms4()
	news_manager.send_tip("u_tretego_generatora_sms4", nil, nil, 6000, nil, "arhara_dialog.u_tretego_generatora_sms5()")
end
function u_tretego_generatora_sms5()
	news_manager.send_tip("u_tretego_generatora_sms5", nil, nil, nil, nil, "arhara_dialog.u_tretego_generatora_sms6()")
end
function u_tretego_generatora_sms6()
	news_manager.send_tip("u_tretego_generatora_sms6", nil, nil, nil, nil, "arhara_dialog.u_tretego_generatora_sms7()")
end
function u_tretego_generatora_sms7()
	arhara_dialog.generator3_vkl()
	news_manager.send_tip("u_tretego_generatora_sms7", 2, nil, nil, nil, "arhara_dialog.u_tretego_generatora_sms8()")
end
function u_tretego_generatora_sms8()
	Actor:give_info_portion("vkluchit_generator_done")
	news_manager.send_tip("u_tretego_generatora_sms8", 10)

	--' убираем второго Клыка с авера
	local se_obj = AI:object("new_kluk_nz")
	if se_obj then AI:release(se_obj, true) end

	se_obj = AI:object("kluk_chaes2") 
	if se_obj then
		amk.add_spot_on_map(se_obj.id, "crlc_big", "st_kluk_aes_spot")
	end
end
function mesto_gg_na_chaes2_sms()
	news_manager.send_tip("mesto_gg_na_chaes2_sms")

end
function kluk_pogib_sms1()
	news_manager.send_tip("kluk_pogib_sms1", nil, nil, nil, nil, "arhara_dialog.kluk_pogib_sms2()")
end
function kluk_pogib_sms2()
	news_manager.send_tip("kluk_pogib_sms2")
	arhara_dialog.dell_kluk_chaes2()
end
function kluk_pogib_sms3()
	news_manager.send_tip("kluk_pogib_sms3")
end
function kluk_pogib_sms4()
	news_manager.send_tip("kluk_pogib_sms4", nil, nil, nil, nil, "arhara_dialog.chaes2_expl_barrel()")
end
function kluk_pogib_sms5()
	news_manager.send_tip("kluk_pogib_sms5")
end
function after_kluk_pogib_sms1()
	news_manager.send_tip("after_kluk_pogib_sms1", nil, nil, nil, nil, "arhara_dialog.after_kluk_pogib_sms2()", 3)
	Actor:give_info_portion("pomozch_proval")
end
function after_kluk_pogib_sms2()
	news_manager.send_tip("after_kluk_pogib_sms2", nil, nil, nil, nil, "arhara_dialog.after_kluk_pogib_sms3()")

	Actor:give_info_portion("spawnim_3otsek")
end
function after_kluk_pogib_sms3()
	news_manager.send_tip("after_kluk_pogib_sms3", nil, nil, nil, nil, "arhara_dialog.after_kluk_pogib_sms4()", 8)
end
function after_kluk_pogib_sms4()
	news_manager.send_tip("after_kluk_pogib_sms4", nil, nil, nil, nil, "arhara_dialog.after_kluk_pogib_sms5()", 4)
end
function after_kluk_pogib_sms5()
	news_manager.send_tip("after_kluk_pogib_sms5", nil, "doctor_black")
end
function nachalo_bazara_otsek_sms()
	news_manager.send_tip("nachalo_bazara_otsek_sms", nil, "doctor_black")
end
function poshel_bazar_otsek_sms1()
	news_manager.send_tip("poshel_bazar_otsek_sms1", nil, nil, nil, nil, "arhara_dialog.poshel_bazar_otsek_sms2()")
end
function poshel_bazar_otsek_sms2()
	news_manager.send_tip("poshel_bazar_otsek_sms2", nil, nil, nil, nil, "arhara_dialog.poshel_bazar_otsek_sms3()")
end
function poshel_bazar_otsek_sms3()
	news_manager.send_tip("poshel_bazar_otsek_sms3", nil, nil, nil, nil, "arhara_dialog.poshel_bazar_otsek_sms4()")
	arhara_dialog.spawn_tele_blok_vhod_otsek()
end
function poshel_bazar_otsek_sms4()
	news_manager.send_tip("poshel_bazar_otsek_sms4", nil, nil, nil, nil, "arhara_dialog.poshel_bazar_otsek_sms5()")
	Actor:give_info_portion("opustit_oruzie")
	arhara_dialog.sp_live_kapsula()
end
function poshel_bazar_otsek_sms5()
	news_manager.send_tip("poshel_bazar_otsek_sms5", nil, nil, nil, nil, "arhara_dialog.poshel_bazar_otsek_sms6()")
	Actor:give_info_portion("real_dok_and_father_spawn")
end
function poshel_bazar_otsek_sms6()
	news_manager.send_tip("poshel_bazar_otsek_sms6", nil, "doctor_black", nil, nil, "arhara_dialog.poshel_bazar_otsek_sms7()", 3)
	arhara_dialog.dell_hospital_bl_dok()
	arhara_dialog.spawn_tele_1_hosp_verh1()
end
function poshel_bazar_otsek_sms7()
	news_manager.send_tip("poshel_bazar_otsek_sms7", nil, nil, nil, nil, "arhara_dialog.poshel_bazar_otsek_sms8()")
end
function poshel_bazar_otsek_sms8()
	news_manager.send_tip("poshel_bazar_otsek_sms8")
end
function sidor_mina_sms()
	news_manager.send_tip("sidor_mina_sms")
end
function sms_k_generalu()
	news_manager.send_tip("sms_k_generalu", 10, nil, nil, nil, "arhara_dialog.sms_k_prizraku()")
end
function sms_k_prizraku()
	news_manager.send_tip("sms_k_prizraku", 7, nil, nil, nil, "sak.add_new_hospital_to_agroprom()")
end
function sms_k_prizraku1()
	news_manager.send_tip("sms_k_prizraku1")
end
function sms_k_muhe()
	news_manager.send_tip("sms_k_muhe")
end
function atp_torgovetz_sms()
	news_manager.send_tip("atp_torgovetz_sms")
end
function sedoy_sms_poka()
	news_manager.send_tip("sedoy_sms_poka")
end
function tu_sdurel_sms()
	news_manager.send_tip("tu_sdurel_sms")
end
function agro_muxa_sms1()
	news_manager.send_tip("agro_muxa_sms1")
end
function agro_replika1()
	news_manager.send_tip("agro_replika1")
end

-- Переделал финальную сходку, чтобы не было какофонии из реплик
local final_sms = {
	{
		text = "agro_boltobny_sms1"
	}, {
		text = "agro_boltobny_sms2"
	}, {
		text = "agro_boltobny_sms3"
	}, {
		text = "agro_boltobny_sms4"
	}, {
		text = "agro_boltobny_sms5"
	}, {
		text = "agro_boltobny_sms6"
	}, {
		text = "agro_boltobny_sms7"
	}, {
		text = "agro_boltobny_sms8"
	}, {
		text = "agro_boltobny_sms9"
	}, {
		text = "agro_boltobny_sms10"
	}, {
		text = "agro_boltobny_sms11"
	}, {
		text = "agro_boltobny_sms12"
	}, {
		text = "agro_boltobny_sms13"
	}, {
		text = "agro_boltobny_sms14"
	}, {
		text = "agro_boltobny_sms15"
	}, {
		text = "agro_boltobny_sms16"
	}, {
		text = "agro_boltobny_sms17"
	}, {
		text = "agro_boltobny_sms18"
	}, {
		text = "agro_boltobny_sms19"
	}, {
		text = "agro_boltobny_sms20"
	}, {
		text = "agro_boltobny_sms21"
	}, {
		text = "agro_boltobny_sms22"
	}, {
		text = "agro_boltobny_sms23"
	}, {
		text = "agro_boltobny_sms24"
	}, {
		text = "agro_boltobny_sms25"
	}, {
		text = "agro_boltobny_sms26"
	}, {
		text = "agro_boltobny_sms27"
	}, {
		text = "agro_boltobny_sms28"
	}, {
		text = "agro_boltobny_sms29",
		info = "komanda_na_posadku1"
	}, {
		text = "agro_boltobny_sms30",
		info = "komanda_gg_posadka"
	}, {
		text = "agro_boltobny_sms31",
		info = "agro_muxa_way2"
	}, {
		text = "agro_boltobny_sms32",
		info = "komanda_na_posadku2"
	}, {
		text = "agro_boltobny_sms33",
		timer = 3,
		info = "final_muzon"
	}, {
		text = "agro_boltobny_sms34",
		info = "spawn_final_arhara",
		timer = 7
	}
}
function next_sms_skhodka( n )
	local t = final_sms[n]
--		or abort("arhara_dialog.next_sms : incorrect index for table: [%s]", n)

	if t then
		news_manager.send_tip(t.text, nil, nil, nil, nil,
			"arhara_dialog.next_sms_skhodka("..tostring(n+1)..")", t.timer)
	
		if t.info and not has_alife_info(t.info) then
			Actor:give_info_portion(t.info)
		end
	else
		arhara_dialog.sp_imit_tele_final1()
	end
end
	
function agro_boltobny_sms1(actor, npc)
	arhara_dialog.next_sms_skhodka(1)
end

function arh_finish_sms1()
	news_manager.send_tip("arh_finish_sms1")
end
function proschalnoe_sms1()
	news_manager.send_tip("proschalnoe_sms1", nil, nil, 25000)
end
function proschalnoe_sms2()
	news_manager.send_tip("proschalnoe_sms2")
end
function proschalnoe_sms3()
	news_manager.send_tip("proschalnoe_sms3")
end
function proschalnoe_sms4()
	news_manager.send_tip("proschalnoe_sms4")
end
function td_preduprezhdenie1_sms1()
	news_manager.send_tip("td_preduprezhdenie1_sms1")
end
function td_preduprezhdenie2_sms2()
	news_manager.send_tip("td_preduprezhdenie2_sms2")
end
function laba_skan_arts_sms1()
	news_manager.send_tip("laba_skan_arts_sms1")
end
function laba_skan_arts_sms2()
	news_manager.send_tip("laba_skan_arts_sms2")
end
function von_sms()
	news_manager.send_tip("von_sms")
end
function sark_art_negoden_sms()
	news_manager.send_tip("sark_art_negoden_sms", 4)
end
function bomba_vzruv_sms()
	news_manager.send_tip("bomba_vzruv_sms", nil, nil, nil, nil, "arhara_dialog.after_kluk_pogib_sms1()", 6)
end
function spezdetektor_sms()
	news_manager.send_tip("spezdetektor_sms")
end

function pda_slom_sms1()
	news_manager.send_tip("pda_slom_sms1", nil, "nano", nil, nil, "arhara_dialog.pda_slom_sms2()", 3)
end
function pda_slom_sms2()
	news_manager.send_tip("pda_slom_sms2", nil, nil, nil, nil, "arhara_dialog.pda_slom_sms3()", 5)
	Actor:give_info_portion("kpk_remont_poehali")
end
function pda_slom_sms3()
	news_manager.send_tip("pda_slom_sms3", nil, nil, nil, nil, "arhara_dialog.pda_slom_sms4()", 3)
end
function pda_slom_sms4()
	news_manager.send_tip("pda_slom_sms4", nil, nil, nil, nil, "arhara_dialog.pda_slom_sms5()")
end
function pda_slom_sms5()
	news_manager.send_tip("pda_slom_sms5", nil, nil, nil, nil, "arhara_dialog.pda_slom_sms6()", 10)
end
function pda_slom_sms6()
	news_manager.send_tip("pda_slom_sms6", nil, "nano")
end
function pda_sdelan_sms0()
	news_manager.send_tip("pda_sdelan_sms0", nil, "nano")
	start_game_timer("run", 0, 0, math.random(50, 80), "arhara_dialog.pda_slom_part2()")
	if has_alife_info("pda_dont_work") then
		Actor:disable_info_portion("pda_dont_work")
		ui_script_hud.break_hud(false)
	end
end
-- Повторная поломка
function pda_slom_part2()
	-- Если не починили, то ломаемся опять
	if not has_alife_info("docent_kpk_gotov_start") then
		Actor:give_info_portion("pda_dont_work")
		news_manager.send_tip("pda_slom_sms1", nil, "nano")
	end
end
function pda_sdelan_sms()
	news_manager.send_tip("pda_sdelan_sms", nil, "nano")
end
function girl3_nachalo_sms()
	news_manager.send_tip("girl3_nachalo_sms", 45, nil, nil, nil, "arhara_dialog.girl3_nachalo_sms1()", 3)
end
function girl3_nachalo_sms1()
	news_manager.send_tip("girl3_nachalo_sms1", nil, nil, nil, nil, "arhara_dialog.girl3_nachalo_sms2()")
end
function girl3_nachalo_sms2()
	news_manager.send_tip("girl3_nachalo_sms2", nil, "doctor_black", nil, nil, "arhara_dialog.girl3_nachalo_sms3()")
end
function girl3_nachalo_sms3()
	news_manager.send_tip("girl3_nachalo_sms3")
	Actor:give_info_portion("naezd_zhuchok")
end
function molniy_bar_sms()
	news_manager.send_tip("molniy_bar_sms", 10, nil, nil, nil, "arhara_dialog.molniy_bar_sms1()", 3)
end
function molniy_bar_sms1()
	news_manager.send_tip("molniy_bar_sms1", nil, nil, nil, nil, "arhara_dialog.molniy_bar_sms2()")
end
function molniy_bar_sms2()
	Actor:give_info_portion("podval_sarkofag_nayti")
end
function strannik_lima_sms()
	news_manager.send_tip("strannik_lima_sms", 35, nil, nil, nil, "arhara_dialog.strannik_lima_sms1()")
end
function strannik_lima_sms1()
	news_manager.send_tip("strannik_lima_sms1", nil, nil, nil, nil, "arhara_dialog.strannik_lima_sms2()")
end
function strannik_lima_sms2()
	news_manager.send_tip("strannik_lima_sms2", nil, nil, nil, nil, "arhara_dialog.spawn_lima_psevdushi()")
end
function after_semetskiy_sms()
	news_manager.send_tip("after_semetskiy_sms", 17, nil, nil, nil, "arhara_dialog.after_semetskiy_sms1()")
end
function after_semetskiy_sms1()
	news_manager.send_tip("after_semetskiy_sms1")
end
function preduprezhdenie_sms()
	news_manager.send_tip("preduprezhdenie_sms")
end
function preduprezhdenie_sms1()
	news_manager.send_tip("preduprezhdenie_sms1")
end
function preduprezhdenie_sms2()
	news_manager.send_tip("preduprezhdenie_sms2", nil, nil, nil, nil, "arhara_dialog.preduprezhdenie_sms3()", 3)
end
function preduprezhdenie_sms3()
	news_manager.send_tip("preduprezhdenie_sms3", nil, nil, nil, nil, "arhara_dialog.preduprezhdenie_sms4()")
end
function preduprezhdenie_sms4()
	news_manager.send_tip("preduprezhdenie_sms4")
	Actor:give_info_portion("preduprezhdenie_3")
end
function odnon_proval_sms()
	news_manager.send_tip("odnon_proval_sms")
end
function foto_ok()
	news_manager.send_tip("foto_monolit_ok")
end
function vopros_k_prizraku_sms()
	news_manager.send_tip("vopros_k_prizraku_sms", 8, nil, nil, nil, "arhara_dialog.vopros_k_prizraku_sms1()")
	arhara_dialog.imitat_tele_final1_dell()
end
function vopros_k_prizraku_sms1()
	news_manager.send_tip("vopros_k_prizraku_sms1", 3)
end
function pili_sdelal_psevdofoto_sms()
	if Actor:has_info("pili_poddelka_est") then return end
	news_manager.send_tip("pili_sdelal_psevdofoto_sms", 130, nil, nil, nil, "arhara_dialog.pili_sdelal_psevdofoto()")
end
function pili_sdelal_psevdofoto()
	Actor:give_info_portion("pili_poddelka_est")
end
function molniy_posle_foto_sms()
	news_manager.send_tip("molniy_posle_foto_sms", 22, nil, nil, nil, "arhara_dialog.molniy_posle_foto_sms1()")
end
function molniy_posle_foto_sms1()
	news_manager.send_tip("molniy_posle_foto_sms1", nil, nil, nil, nil, "arhara_dialog.molniy_posle_foto_sms2()")
end
function molniy_posle_foto_sms2()
	news_manager.send_tip("molniy_posle_foto_sms2", nil, nil, nil, nil, "arhara_dialog.molniy_posle_foto_sms3()", 4)
end
function molniy_posle_foto_sms3()
	news_manager.send_tip("molniy_posle_foto_sms3", nil, nil, nil, nil, "arhara_dialog.molniy_posle_foto_sms4()")
end
function molniy_posle_foto_sms4()
	news_manager.send_tip("molniy_posle_foto_sms4", nil, nil, 35000, nil, "arhara_dialog.molniy_posle_foto_sms5()")
end
function molniy_posle_foto_sms5()
	news_manager.send_tip("molniy_posle_foto_sms5", nil, nil, nil, nil, "arhara_dialog.molniy_posle_foto_sms6()")
end
function molniy_posle_foto_sms6()
	news_manager.send_tip("molniy_posle_foto_sms6", nil, nil, nil, nil, "arhara_dialog.molniy_posle_foto_sms7()")
	Actor:give_info_portion("mesto_v_bunkere_start")
end
function molniy_posle_foto_sms7()
	news_manager.send_tip("molniy_posle_foto_sms7", nil, nil, nil, nil, "arhara_dialog.molniy_posle_foto_sms8()")
	arhara_dialog.spawn_bunker_sekret()
end
function molniy_posle_foto_sms8()
	news_manager.send_tip("molniy_posle_foto_sms8")
end
function pozisiy_bunker_gg_sms()
	news_manager.send_tip("pozisiy_bunker_gg_sms")
end
function pozisiy_bunker_gg_sms1()
	news_manager.send_tip("pozisiy_bunker_gg_sms1", 3)
end
function bunker_fotik_artu_sms()
	news_manager.send_tip("bunker_fotik_artu_sms", 40, nil, nil, nil, "arhara_dialog.bunker_fotik_artu_sms1()")
end
function bunker_fotik_artu_sms1()
	news_manager.send_tip("bunker_fotik_artu_sms1", 5, nil, nil, nil, "arhara_dialog.laba_del_artu()")
end
function ozhivil_radista_sms()
	news_manager.send_tip("ozhivil_radista_sms")
end
function ozhivil_radista_sms1()
	news_manager.send_tip("ozhivil_radista_sms1")
end
function nashel_sadik_taynik_sms()
	news_manager.send_tip("nashel_sadik_taynik_sms")
end
function seif_zakrut_sms()
	news_manager.send_tip("seif_zakrut_sms")
end
function seif_zakrut_sms1()
	news_manager.send_tip("seif_zakrut_sms1")
end
function seif_sadik_otkrut_sms()
	news_manager.send_tip("seif_sadik_otkrut_sms")
end
function otkroem_bez_radista_sms()
	if Actor:has_info("radist_pogib") then return end
	Actor:give_info_portion("radist_pogib")
	news_manager.send_tip("otkroem_bez_radista_sms", nil, nil, nil, nil, "arhara_dialog.otkroem_bez_radista_sms1()")
end
function otkroem_bez_radista_sms1()
	news_manager.send_tip("otkroem_bez_radista_sms1")
	Actor:give_info_portion("seif_sadik_done")
end
function forest_pozisiy_na_dome_sms()
	news_manager.send_tip("forest_pozisiy_na_dome_sms")
end
function forest_pozisiy_na_dome_sms1()
	news_manager.send_tip("forest_pozisiy_na_dome_sms1", 3)
end
function pogib_stalk_sms()
	news_manager.send_tip("pogib_stalk_sms", nil, nil, nil, nil, "arhara_dialog.pogib_stalk_sms1()")
end
function pogib_stalk_sms1()
	news_manager.send_tip("pogib_stalk_sms1", nil, nil, nil, nil, "arhara_dialog.del_last_snip_prov_restr()")
end
function ozhivil2_radista2_sms()
	news_manager.send_tip("ozhivil2_radista2_sms")
end
function ozhivil2_radista2_sms1()
	news_manager.send_tip("ozhivil2_radista2_sms1")
end
function superzhekan_sms()
	news_manager.send_tip("superzhekan_sms", 16)
end
function superzhekan_sms1()
	news_manager.send_tip("superzhekan_sms1", 16)
end
function foto_mozg_ok_sms()
	news_manager.send_tip("foto_mozg_ok_sms")
end
function vodka_dly_kepa_sms()
	news_manager.send_tip("vodka_dly_kepa_sms")
end
function vodka_dly_kepa_sms1()
	news_manager.send_tip("vodka_dly_kepa_sms1")
end
function sms_kuznets()
	news_manager.send_tip("sms_kuznets", 8, nil, nil, nil, "arhara_dialog.sms_kuznets1()")
end
function sms_kuznets1()
	news_manager.send_tip("sms_kuznets1")
end
function narod_napilsy_sms()
	news_manager.send_tip("narod_napilsy_sms", 6, nil, nil, nil, "arhara_dialog.narod_napilsy_sms1()")
end
function narod_napilsy_sms1()
	news_manager.send_tip("narod_napilsy_sms1")
end
function yntar_sms_k_molnii1()
	news_manager.send_tip("yntar_sms_k_molnii1", 40, nil, nil, nil, "arhara_dialog.yntar_sms_k_molnii2()")
end
function yntar_sms_k_molnii2()
	news_manager.send_tip("yntar_sms_k_molnii2")
end
function mina_pant_sms()
	news_manager.send_tip("mina_pant_sms")
end
function mina_pant_sms1()
	news_manager.send_tip("mina_pant_sms1", nil, nil, nil, nil, "arhara_dialog.mina_pant_sms3()")
end
function mina_pant_sms2()
	news_manager.send_tip("mina_pant_sms2", nil, nil, nil, nil, "arhara_dialog.mina_pant_sms1()")
end
function mina_pant_sms3()
	news_manager.send_tip("mina_pant_sms3")
	Actor:give_info_portion("camp_camp_otez")
end
function pantera_sms_stop1()
	news_manager.send_tip("pantera_sms_stop1")
end
function pantera_sms_stop2()
	news_manager.send_tip("pantera_sms_stop2")
end
function bazar_s_klenovum1()
	news_manager.send_tip("bazar_s_klenovum1", 25, nil, nil, nil, "arhara_dialog.bazar_s_klenovum2()")
end
function bazar_s_klenovum2()
	news_manager.send_tip("bazar_s_klenovum2", nil, nil, nil, nil, "arhara_dialog.bazar_s_klenovum3()")
end
function bazar_s_klenovum3()
	news_manager.send_tip("bazar_s_klenovum3", nil, nil, nil, nil, "arhara_dialog.bazar_s_klenovum4()")
end
function bazar_s_klenovum4()
	news_manager.send_tip("bazar_s_klenovum4", nil, nil, nil, nil, "arhara_dialog.bazar_s_klenovum5()")
end
function bazar_s_klenovum5()
	news_manager.send_tip("bazar_s_klenovum5", nil, nil, nil, nil, "arhara_dialog.bazar_s_klenovum6()")
end
function bazar_s_klenovum6()
	news_manager.send_tip("bazar_s_klenovum6", nil, nil, nil, nil, "arhara_dialog.proba_posulki()")
end
function kl_pos_est_sms()
	news_manager.send_tip("kl_pos_est_sms", nil, nil, nil, nil, "arhara_dialog.kl_pos_est_sms1()")
end
function kl_pos_est_sms1()
	news_manager.send_tip("kl_pos_est_sms1", nil, nil, nil, nil, "arhara_dialog.kl_pos_est_sms2()")
end
function kl_pos_est_sms2()
	news_manager.send_tip("kl_pos_est_sms2", 3, nil, nil, nil, "arhara_dialog.prizrak_ranen_sms()")
	arhara_dialog.otsek_varka_kamen()
	start_small_timer(300, arhara_dialog.posulka_nomer_dva)
end
function prizrak_ranen_sms()
	news_manager.send_tip("prizrak_ranen_sms", 30, nil, nil, nil, "arhara_dialog.prizrak_ranen_sms1()")
	arhara_dialog.dell_odnonogiy()
end
function prizrak_ranen_sms1()
	news_manager.send_tip("prizrak_ranen_sms1", nil, nil, nil, nil, "arhara_dialog.prizrak_ranen_sms2()")
end
function prizrak_ranen_sms2()
	news_manager.send_tip("prizrak_ranen_sms2", nil, nil, nil, nil, "arhara_dialog.prizrak_ranen_sms3()")
end
function prizrak_ranen_sms3()
	news_manager.send_tip("prizrak_ranen_sms3", nil, nil, nil, nil, "arhara_dialog.pomosch_ot_chernomora_sms()")
end
function perehov_na_yantar_sms()
	news_manager.send_tip("perehov_na_yantar_sms", nil, nil, nil, nil, "arhara_dialog.perehov_na_yantar_sms1()")
end
function perehov_na_yantar_sms1()
	news_manager.send_tip("perehov_na_yantar_sms1", nil, nil, nil, nil, "arhara_dialog.perehov_na_yantar_sms2()")
end
function perehov_na_yantar_sms2()
	news_manager.send_tip("perehov_na_yantar_sms2", nil, nil, nil, nil, "braad_test.control_monol_svalka()", 2)
end
function pantera_na_kordone_sms()
	news_manager.send_tip("pantera_na_kordone_sms", nil, nil, nil, nil, "arhara_dialog.pantera_na_kordone_sms1()")
end
function pantera_na_kordone_sms1()
	news_manager.send_tip("pantera_na_kordone_sms1")
end
function poslednie_sms_pantera()
	news_manager.send_tip("poslednie_sms_pantera", nil, nil, nil, nil, "arhara_dialog.poslednie_sms_pantera2()")
end
function poslednie_sms_pantera2()
	news_manager.send_tip("poslednie_sms_pantera2")
end
function moroz_sms()
	news_manager.send_tip("moroz_sms")
end
function pomosch_ot_chernomora_sms()
	news_manager.send_tip("pomosch_ot_chernomora_sms", 25, nil, nil, nil, "arhara_dialog.pomosch_ot_chernomora_sms1()")
end
function pomosch_ot_chernomora_sms1()
	news_manager.send_tip("pomosch_ot_chernomora_sms1")
end
function nashel_gada_sms()
	news_manager.send_tip("nashel_gada_sms", 7)
end
function sms_otez_poreshil()
	news_manager.send_tip("sms_otez_poreshil", nil, "death", nil, nil, "arhara_dialog.sms_otez_poreshil1()")
end
function sms_otez_poreshil1()
	news_manager.send_tip("sms_otez_poreshil1", 5, nil, nil, nil, "arhara_dialog.sms_otez_poreshil2()")
end
function sms_otez_poreshil2()
	news_manager.send_tip("sms_otez_poreshil2", nil, nil, nil, nil, "arhara_dialog.sms_otez_poreshil3()")
end
function sms_otez_poreshil3()
	news_manager.send_tip("sms_otez_poreshil3", nil, nil, nil, nil, "arhara_dialog.sms_otez_poreshil4()")
end
function sms_otez_poreshil4()
	news_manager.send_tip("sms_otez_poreshil4")
end
function na_kamne_sms()
	news_manager.send_tip("na_kamne_sms")
end
function sms_razgovor_sxod_nz()
	if has_alife_info("proval_strelki") then return end
	if has_alife_info("start_pazgovorchik") then return end
	Actor:give_info_portion("start_pazgovorchik")
	news_manager.send_tip("sms_razgovor_sxod_nz", 2, nil, nil, nil, "arhara_dialog.sms_razgovor_sxod_nz1()")
end
function sms_razgovor_sxod_nz1()
	if has_alife_info("proval_strelki") then return end
	news_manager.send_tip("sms_razgovor_sxod_nz1", nil, nil, nil, nil, "arhara_dialog.sms_razgovor_sxod_nz2()")
end
function sms_razgovor_sxod_nz2()
	if has_alife_info("proval_strelki") then return end
	news_manager.send_tip("sms_razgovor_sxod_nz2", nil, nil, nil, nil, "arhara_dialog.sms_razgovor_sxod_nz3()")
end
function sms_razgovor_sxod_nz3()
	if has_alife_info("proval_strelki") then return end
	news_manager.send_tip("sms_razgovor_sxod_nz3", nil, nil, nil, nil, "arhara_dialog.sms_razgovor_sxod_nz4()")
end
function sms_razgovor_sxod_nz4()
	if has_alife_info("proval_strelki") then return end
	news_manager.send_tip("sms_razgovor_sxod_nz4", nil, nil, nil, nil, "arhara_dialog.sms_razgovor_sxod_nz5()")
end
function sms_razgovor_sxod_nz5()
	if has_alife_info("proval_strelki") then return end
	news_manager.send_tip("sms_razgovor_sxod_nz5", nil, nil, nil, nil, "arhara_dialog.sms_razgovor_sxod_nz6()")
end
function sms_razgovor_sxod_nz6()
	if has_alife_info("proval_strelki") then return end
	news_manager.send_tip("sms_razgovor_sxod_nz6", nil, nil, nil, nil, "arhara_dialog.sms_razgovor_sxod_end()")
end
function sms_razgovor_sxod_end()
	arhara_dialog.del_strelka_radius_restr()
	Actor:give_info_portion("zlobnuy_othod")
end
function sms_taynik_zlobnuy()
	news_manager.send_tip("sms_taynik_zlobnuy", 20, nil, nil, nil, "arhara_dialog.sms_taynik_zlobnuy1()")
end
function sms_taynik_zlobnuy1()
	news_manager.send_tip("sms_taynik_zlobnuy1", nil, nil, nil, nil, "arhara_dialog.sms_taynik_zlobnuy2()", 3)
	arhara_dialog.dell_aver_zlobn()
end
function sms_taynik_zlobnuy2()
	Actor:give_info_portion("kvest_saxar_teleport_start")
end
function ynt_after_perexod_sms()
	if level.name() ~= "l08_yantar" then
		start_real_timer("run", 10, "arhara_dialog.ynt_after_perexod_sms()")
		return
	end
	news_manager.send_tip("ynt_after_perexod_sms", 20, nil, nil, nil, "arhara_dialog.ynt_after_perexod_sms1()", 6)
	arhara_dialog.delete_saxar_perex()
end
function ynt_after_perexod_sms1()
	news_manager.send_tip("ynt_after_perexod_sms1", nil, nil, nil, nil, "arhara_dialog.ynt_after_perexod_sms2()")
end
function ynt_after_perexod_sms2()
	news_manager.send_tip("ynt_after_perexod_sms2")
end
function preplastilin_sms()
	news_manager.send_tip("preplastilin_sms", nil, "nano", nil, nil, "arhara_dialog.ynt_after_perexod_sms()", 30)
end
function dialog_oborvan_sms()
	news_manager.send_tip("dialog_oborvan_sms")
end
function poluchenie_klucha_sms()
	news_manager.send_tip("poluchenie_klucha_sms", nil, "nano")
end
function del_blok_and_restr_sms()
	news_manager.send_tip("del_blok_and_restr_sms", nil, "nano")
end
function sms_zaschita_portal()
	news_manager.send_tip("sms_zaschita_portal", nil, "nano")
end
function pervoe_sms_dsity()
	news_manager.send_tip("pervoe_sms_dsity")
end
function sms_parfumer1()
	news_manager.send_tip("sms_parfumer1")
end
function sms_zaschita_mg()
	news_manager.send_tip("sms_zaschita_mg")
end
function parfum_sms_kontrik1()
	news_manager.send_tip("parfum_sms_kontrik1", 95, nil, 15000, nil, "arhara_dialog.parfum_sms_kontrik2()")
end
function parfum_sms_kontrik2()
	news_manager.send_tip("parfum_sms_kontrik2", nil, nil, nil, nil, "arhara_dialog.parfum_sms_kontrik3()")
end
function parfum_sms_kontrik3()
	news_manager.send_tip("parfum_sms_kontrik3", nil, nil, nil, nil, "arhara_dialog.parfum_sms_kontrik4()")
end
function parfum_sms_kontrik4()
	arhara_dialog.artu_spawn_dsity_hutor()
	arhara_dialog.metka_norman()
	Actor:give_info_portion("dcity_kontrik_start")
end
function netu_kontrolera_sms()
	news_manager.send_tip("netu_kontrolera_sms")
end
function sms_obmorok1()
	news_manager.send_tip("sms_obmorok1", 15, nil, nil, nil, "arhara_dialog.sms_obmorok2()", 4)
end
function sms_obmorok2()
	news_manager.send_tip("sms_obmorok2", nil, nil, nil, nil, "arhara_dialog.sms_obmorok3()")
end
function sms_obmorok3()
	news_manager.send_tip("sms_obmorok3", nil, nil, nil, nil, "arhara_dialog.sms_obmorok4()", 2)
end
function sms_obmorok4()
	news_manager.send_tip("sms_obmorok4")
end
function strelka_obmorok_sms1()
	news_manager.send_tip("strelka_obmorok_sms1")
end
function strelka_obmorok_sms2()
	news_manager.send_tip("strelka_obmorok_sms2")
end
function sms_dcity_zenter_doza()
	news_manager.send_tip("sms_dcity_zenter_doza")
end
function sms_dcity_zenter_doza_otkl()
	news_manager.send_tip("sms_dcity_zenter_doza_otkl", nil, nil, nil, nil, "arhara_dialog.sms_otkl_zona3()", 10)
	Actor:give_info_portion("spawn_city_last_zentr")
	arhara_dialog.delete_zaschita_zenter_gorod()
end
function sms_dcity_gorod2_doza2()
	news_manager.send_tip( "sms_dcity_gorod2_doza2")
end
function sms_dcity_gorod_doza()
	news_manager.send_tip("sms_dcity_gorod_doza")
end
function poziciy_cherdak_zanyta_sms()
	news_manager.send_tip("poziciy_cherdak_zanyta_sms")
end
function hand_hoh_sms()
	news_manager.send_tip("hand_hoh_sms", nil, nil, 15000)
end
function suki_rasstrel_sms()
	news_manager.send_tip("suki_rasstrel_sms")
end
function sms_zlobnomu_rasstrel()
	news_manager.send_tip("sms_zlobnomu_rasstrel", 40, nil, nil, nil, "arhara_dialog.sms_zlobnomu_rasstrel1()", 2)
end
function sms_zlobnomu_rasstrel1()
	news_manager.send_tip("sms_zlobnomu_rasstrel1", nil, nil, nil, nil, "arhara_dialog.sms_zlobnomu_rasstrel2()")
end
function sms_zlobnomu_rasstrel2()
	news_manager.send_tip("sms_zlobnomu_rasstrel2", nil, nil, nil, nil, "arhara_dialog.sms_zlobnomu_rasstrel3()")
end
function sms_zlobnomu_rasstrel3()
	news_manager.send_tip("sms_zlobnomu_rasstrel3", nil, nil, nil, nil, "arhara_dialog.sms_zlobnomu_rasstrel4()")
end
function sms_zlobnomu_rasstrel4()
	news_manager.send_tip("sms_zlobnomu_rasstrel4", nil, nil, nil, nil, "arhara_dialog.sms_zlobnomu_rasstrel4_1()", 5)
end
function sms_zlobnomu_rasstrel4_1()
	news_manager.send_tip("sms_zlobnomu_rasstrel4_1", nil, nil, nil, nil, "arhara_dialog.sms_zlobnomu_rasstrel6()")
end
function sms_zlobnomu_rasstrel5()
	news_manager.send_tip("sms_zlobnomu_rasstrel5")
end
function sms_zlobnomu_rasstrel6()
	news_manager.send_tip("sms_zlobnomu_rasstrel6", nil, nil, nil, nil, "arhara_dialog.sms_zlobnomu_rasstrel5()", 2)
	braad_test.dead_city_atpeshka()
	local timer = 120
	start_real_timer("run", timer, "arhara_dialog.del_perexodik()")
	spawn_restrictor.dead_city_atpeshka(timer)
end
function sms_zlobnomu_rasstrel7()
	news_manager.send_tip("sms_zlobnomu_rasstrel7")
end
function agro_tainik_norman_sms()
	news_manager.send_tip("agro_tainik_norman_sms", nil, nil, nil, nil, "arhara_dialog.spawn_teleport_agro_norm_taynik()", 3)
	arhara_dialog.spawn_mem_module()
end
function sms_k_normany1()
	news_manager.send_tip("sms_k_normany1", 8, nil, nil, nil, "arhara_dialog.sms_k_normany2()")
end
function sms_k_normany2()
	news_manager.send_tip("sms_k_normany2", nil, nil, nil, nil, "arhara_dialog.metka_city_parfumer()")
	arhara_dialog.spawn_yzik_3gulag()
end
function dcity_otvet_ok_obmor1()
	news_manager.send_tip("dcity_otvet_ok_obmor1", nil, nil, nil, nil, "arhara_dialog.dcity_otvet_ok_obmor2()", 2)
end
function dcity_otvet_ok_obmor2()
	news_manager.send_tip("dcity_otvet_ok_obmor2", nil, nil, nil, nil, "arhara_dialog.dcity_otvet_ok_obmor3()", 5)
end
function dcity_otvet_ok_obmor3()
	news_manager.send_tip("dcity_otvet_ok_obmor3", nil, nil, nil, nil, "arhara_dialog.dcity_otvet_ok_obmor4()")
end
function dcity_otvet_ok_obmor4()
	news_manager.send_tip("dcity_otvet_ok_obmor4")
end
function dcity_duda_zvonok_sms1()
	news_manager.send_tip("dcity_duda_zvonok_sms1", nil, nil, nil, nil, "arhara_dialog.dcity_duda_zvonok_sms2()", 4)
	Actor:give_info_portion("nachlo_zvonka")
end
function dcity_duda_zvonok_sms2()
	news_manager.send_tip("dcity_duda_zvonok_sms2", nil, nil, nil, nil, "arhara_dialog.dcity_duda_zvonok_sms3()")
	arhara_dialog.dell_obmorok()
end
function dcity_duda_zvonok_sms3()
	news_manager.send_tip("dcity_duda_zvonok_sms3", nil, nil, nil, nil, "arhara_dialog.dcity_duda_zvonok_sms4()")
end
function dcity_duda_zvonok_sms4()
	news_manager.send_tip("dcity_duda_zvonok_sms4", nil, nil, nil, nil, "arhara_dialog.finish_zvonka()")
end
function finish_zvonka()
	Actor:give_info_portion("finish_zvonka")
end
function dcity_iskra_zvonok_sms1()
	news_manager.send_tip("dcity_iskra_zvonok_sms1", nil, nil, nil, nil, "arhara_dialog.dcity_iskra_zvonok_sms2()", 2)
end
function dcity_iskra_zvonok_sms2()
	news_manager.send_tip("dcity_iskra_zvonok_sms2", nil, nil, nil, nil, "arhara_dialog.dcity_iskra_zvonok_sms3()", 2)
end
function dcity_iskra_zvonok_sms3()
	news_manager.send_tip("dcity_iskra_zvonok_sms3")
end
function sms_otkl_zona1()
	news_manager.send_tip("sms_otkl_zona1", 20, nil, nil, nil, "arhara_dialog.sms_otkl_zona2()")
end
function sms_otkl_zona2()
	news_manager.send_tip("sms_otkl_zona2", nil, nil, nil, nil, "arhara_dialog.sms_dcity_zenter_doza_otkl()", 80)
end
function sms_otkl_zona3()
	news_manager.send_tip("sms_otkl_zona3", nil, nil, nil, nil, "arhara_dialog.sms_otkl_zona4()")
	arhara_dialog.dell_dok_nevidim()
end
function sms_otkl_zona4()
	news_manager.send_tip("sms_otkl_zona4", nil, nil, nil, nil, "arhara_dialog.sms_otkl_zona4_1()", 3)
end
function sms_otkl_zona4_1()
	Actor:give_info_portion("spasty_doka_done")
	start_real_timer("run", 3, "arhara_dialog.sms_otkl_zona5()")
end
function sms_otkl_zona5()
	news_manager.send_tip("sms_otkl_zona5")
	arhara_dialog.dell_dcity_dok_vidim()
	arhara_dialog.join_stalker()
end
function vylozhit_oruzhie_sms()
	news_manager.send_tip("vylozhit_oruzhie_sms")
end
function remen_dialog_sms1()
	if has_alife_info("spawn_after_molniy") then
		arhara_dialog.remen_dialog_sms6()
		return
	end
	news_manager.send_tip("remen_dialog_sms1", nil, nil, nil, nil, "arhara_dialog.remen_dialog_sms2()")
end
function remen_dialog_sms2()
	if has_alife_info("spawn_after_molniy") then
		arhara_dialog.remen_dialog_sms6()
		return
	end
	news_manager.send_tip("remen_dialog_sms2", nil, nil, nil, nil, "arhara_dialog.remen_dialog_sms3()")
end
function remen_dialog_sms3()
	if has_alife_info("spawn_after_molniy") then
		arhara_dialog.remen_dialog_sms6()
		return
	end
	news_manager.send_tip("remen_dialog_sms3", nil, nil, nil, nil, "arhara_dialog.remen_dialog_sms4()")
end
function remen_dialog_sms4()
	if has_alife_info("spawn_after_molniy") then
		arhara_dialog.remen_dialog_sms6()
		return
	end
	news_manager.send_tip("remen_dialog_sms4", nil, nil, nil, nil, "arhara_dialog.remen_dialog_sms5()")
end
function remen_dialog_sms5()
	if has_alife_info("spawn_after_molniy") then
		arhara_dialog.remen_dialog_sms6()
		return
	end
	news_manager.send_tip("remen_dialog_sms5", nil, nil, nil, nil, "arhara_dialog.remen_dialog_end()")
end
function remen_dialog_sms6()
	news_manager.send_tip("remen_dialog_sms6", nil, nil, 25000)
	arhara_dialog.iskra_listok_spawn()
end
function remen_dialog_end()
	Actor:give_info_portion("spawn_after_molniy")
	arhara_dialog.enabl_weapon()
	arhara_dialog.otsek_varka_kamen()
	arhara_dialog.dell_dcity_molniy()
	start_real_timer("run", 50, "arhara_dialog.remen_dialog_sms6()")
end
function otkr_perex_zaton_sms1()
	sak.add_new_dcity_to_zaton()
	news_manager.send_tip("otkr_perex_zaton_sms1", 2, nil, nil, nil, "arhara_dialog.otkr_perex_zaton_sms2()", 3)
end
function otkr_perex_zaton_sms2()
	news_manager.send_tip("otkr_perex_zaton_sms2", nil, nil, 15000, nil, "oksana_spawn.akim_panic()", 10)
	arhara_dialog.dell_dcity_norman()
	start_real_timer("run", 7, "arhara_dialog.acv_sol()")
end
function acv_sol()
	archievements.send_archievement("acv_sol")
end
function nashel_listok_sms1()
	news_manager.send_tip("nashel_listok_sms1", nil, nil, nil, nil, "arhara_dialog.nashel_listok_sms2()")
	arhara_dialog.dell_parfuym1()
end
function nashel_listok_sms2()
	news_manager.send_tip("nashel_listok_sms2", nil, nil, 10000, nil, "arhara_dialog.nashel_listok_sms3()")
end
function nashel_listok_sms3()
	Actor:give_info_portion("parfumer_shtab_spawn")
end

function operator_babki_otdat_sms()
	news_manager.send_tip("operator_babki_otdat_sms", nil, nil, nil, nil, "arhara_dialog.operator_babki_otdat_sms1()")
end
function operator_babki_otdat_sms1()
	news_manager.send_tip("operator_babki_otdat_sms1", nil, nil, nil, nil, "arhara_dialog.operator_babki_otdat_sms2()")
end
function operator_babki_otdat_sms2()
	news_manager.send_tip("operator_babki_otdat_sms2", nil, nil, nil, nil, "arhara_dialog.operator_babki_otdat_sms3()")
end
function operator_babki_otdat_sms3()
	news_manager.send_tip("operator_babki_otdat_sms3", nil, nil, nil, nil, "arhara_dialog.operator_babki_otdat_sms4()", 20)
end
function operator_babki_otdat_sms4()
	local money = math.min(Actor:money(), 3000)
	Actor:give_money(-money)
	news_manager.relocate_money(Actor, "out", money)
	news_manager.send_tip("operator_babki_otdat_sms4", 1)
end

function bland_sms()
	news_manager.send_tip("bland_sms", nil, nil, nil, nil, "arhara_dialog.teleport_bland()")
end
function bland_sms1()
	news_manager.send_tip("bland_sms1", nil, nil, nil, nil, "arhara_dialog.teleport_bland()")
end
function teleport_bland()
	local obj = AI:story_object(story_ids.dark_bland)
	if obj then
		AI:teleport_object("", vector():set(143.597518920898,10.3132095336914,-263.8720703125), 341890, 959, obj.id)
	end
end
function sborr_sms()
	news_manager.send_tip("sborr_sms")
end
function nachalnik_zvonok_sms1()
	news_manager.send_tip("nachalnik_zvonok_sms1", 8, nil, nil, nil, "arhara_dialog.nachalnik_zvonok_sms2()")
	Actor:give_info_portion("duda_zvonit")
end
function nachalnik_zvonok_sms2()
	news_manager.send_tip("nachalnik_zvonok_sms2", nil, nil, nil, nil, "arhara_dialog.nachalnik_zvonok_sms3()")
end
function nachalnik_zvonok_sms3()
	Actor:give_info_portion("duda_finish_zvonka")
end

--' заспавним изломов в деревне рестриктором
function spawn_village_izlom()
	AI:create_free("fracture_strong",vector():set(77.537,10.171,26.215),37126,3333)
	AI:create_free("fracture_strong",vector():set(75.063,10.069,26.122),36278,3333)
end

function set_pantera()
	local obj = AI:object("marsh_pantera") 
	if obj then
		amk.add_spot_on_map(obj.id,"crlc_big","pantera_name")
	end
end

function remove_pantera_metka()
	local obj = AI:object("marsh_pantera")
	if obj then
		level.map_remove_object_spot(obj.id,"crlc_big")
	end
end

--' спавним пару кабанов у Пантеры на болотах
function spawn_boar1_marsh()
	AI:create_free("boar_strong",vector():set(-297.283,-0.292,113.592),1496,3378)
	AI:create_free("boar_strong",vector():set(-297.283,-0.292,113.592),1496,3378)
	AI:create_free("boar_strong",vector():set(-297.282,-0.292,113.592),1496,3378)
end

--' убираем людишек из Деревни
function delete_chel_village()
	local se_obj = AI:object("village_kapatel3")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("village_stalk_dead1")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("village_stalk_dead2")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("village_stalk_dead3")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("village_brat_dead")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("village_kapatel1")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("village_kapatel2")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("village_magazin_kapatel1")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("village_magazin_kapatel2")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("village_magazin_kapatel3")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("village_xolm_kapatel1")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("village_xolm_kapatel2")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("village_xolm_kapatel3")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("village_xolm_kapatel4")
	if se_obj then AI:release(se_obj, true) end
end

function metka_marsh_provodnik()
	local obj = AI:object("boloto_provodnik") 
	if obj then
		amk.add_spot_on_map(obj.id,"crlc_big","st_metka_marsh_provodnik")
	end
end

function remove_metka_marsh_provodnik()
	local obj = AI:object("boloto_provodnik")
	if obj then
		level.map_remove_object_spot(obj.id,"crlc_big")
	end
end

--' монстры на болотах
function marsh_many_monster()
	AI:create_free("fracture_karlik",vector():set(-220.359,0.839,232.703),32366,3378)
	AI:create_free("fracture_karlik",vector():set(-220.359,0.839,232.703),32366,3378)
	level.add_pp_effector ("blink.ppe", 234, false)
end

--' Удаляем трупы сталков с Болот
function delete_stalky_marsh()
	local se_obj = AI:object("marsh_stalker_burer1")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("marsh_stalker_burer2")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("marsh_stalker_burer3")
	if se_obj then AI:release(se_obj, true) end
end

--' проверим наличие финансов для проводника
function sorok_shtuk(actor,npc)
    return actor:money() > 40000
end

--' отдадим деньги проводнику за переход
function bolloto_prov_take_money(t1,t2)
	local npc = (t1:id()) and t2 or t1
	dialogs.relocate_money(npc,40000,"out")
end

--' убираем проводника, Пантеру с болот 
function delete_bol_provodnik()
	local se_obj = AI:object("boloto_provodnik")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("marsh_pantera")
	if se_obj then AI:release(se_obj, true) end
end

--' убираем Пилигрима с бара
function delete_pili_bar()
	local se_obj = AI:object("piligrim_bar")
	if se_obj then AI:release(se_obj, true) end
end

--' убираем Пантеру из Деревни
function delete_vill_pantera()
	local se_obj = AI:object("village_pantera")
	if se_obj then AI:release(se_obj, true) end
end

--' убираем мобильного торгаша с Агры
function delete_agro_mobil_torgash()
	local se_obj = AI:object("agro_mobil_torgash")
	if se_obj then
		-- сначала прерываем диалог
		local obj = level.object_by_id(se_obj.id)
		if obj and obj:is_talking() then
			obj:stop_talk()
			Actor:stop_talk()
		end
		-- затем удаляем
		start_real_timer("run", 0.2, "arhara_dialog.delete_agro_mobil_torgash2()")
	end
end
function delete_agro_mobil_torgash2()
	local se_obj = AI:object("agro_mobil_torgash")
	if se_obj then AI:release(se_obj, true) end
end

--' спавним пси-антенну на Кордоне
function x_ray_antenna_spawn(first_speaker, second_speaker)
	local obj = AI:create_free("x_ray_antenna",vector():set(109.698,4.617,459.677),411976,223)
	level.map_add_object_spot_ser(obj.id,"crlc_big","st_x_ray_antenna_sig")
	dialogs.relocate_item_section(second_speaker, "af_spirit_3", "in")
end

function remove_metka_psi_antenna()
end

--' проверим наличие пси-антенны
function klenov_antena_have()
	return inventory.search("x_ray_antenna",1) ~= false
end

--' отдадим антенну Клёнову
function klenov_antena_done(first_speaker, second_speaker)
	inventory.out_items("x_ray_antenna",1)
end

--' пси-спавн на Кордоне рестриктором1
function spawn_psi_one_one()
	AI:create_free("fracture_master",vector():set(107.289,1.650,457.066),408582,223)
	AI:create_free("fracture_master",vector():set(108.022,1.703,456.664),409435,223)
	level.add_pp_effector ("blink.ppe", 234, false)
	level.add_pp_effector("psi.ppe", 2008, false)
end
function spawn_psi_one_two()
	AI:create_free("chimera_normal",vector():set(106.582,1.580,458.101),407745,223)
	AI:create_free("chimera_strong",vector():set(105.914,1.565,457.573),406900,199)
	level.add_pp_effector ("blink.ppe", 234, false)
	level.add_pp_effector("amk_shoot.ppe", 2011, false)
	level.add_pp_effector("snd_shock.ppe", 2008, false) 
end
function spawn_psi_one_tri()
	AI:create_free("pseudodog_normal",vector():set(105.313,1.533,457.661),406045,199)
	AI:create_free("pseudodog_big",vector():set(106.582,1.580,458.101),407745,223)
	AI:create_free("dog_habaruch",vector():set(106.582,1.580,458.101),407745,223)
	AI:create_free("dog_normal",vector():set(107.289,1.650,457.066),408582,223)
	AI:create_free("dog_habaruch",vector():set(107.289,1.650,457.066),408582,223)
	AI:create_free("dog_weak",vector():set(107.289,1.650,457.066),408582,223)
	level.add_pp_effector ("blink.ppe", 234, false) 
	level.add_pp_effector("alcohol.ppe", 3000, false)
	level.add_pp_effector("psi.ppe", 2008, false)
	level.add_pp_effector("snd_shock.ppe", 2008, false)
end
function spawn_psi_one_four()
	AI:create_free("m_controller_old",vector():set(107.289,1.650,457.066),408582,223)
	level.add_pp_effector ("blink.ppe", 234, false) 
	level.add_pp_effector("alcohol.ppe", 3000, false)
end
function spawn_psi_one_five()
	AI:create_free("tushkano_normal",vector():set(105.914,1.565,457.573),406900,199)
	AI:create_free("tushkano_strong",vector():set(105.914,1.565,457.573),406900,199)
	AI:create_free("tushkano_normal",vector():set(105.914,1.565,457.573),406900,199)
	AI:create_free("tushkano_strong",vector():set(105.313,1.533,457.661),406045,199)
	AI:create_free("tushkano_normal",vector():set(105.313,1.533,457.661),406045,199)
	AI:create_free("tushkano_strong",vector():set(105.313,1.533,457.661),406045,199)
	level.add_pp_effector ("blink.ppe", 234, false) 
	level.add_pp_effector("psychic.ppe", 2008, false)
	level.add_pp_effector("snd_shock.ppe", 2008, false)
end
function spawn_psi_one_six()
	AI:create_free("zombie_trup",vector():set(105.313,1.533,457.661),406045,199)
	AI:create_free("zombie_immortal",vector():set(106.582,1.580,458.101),407745,223)
	AI:create_free("zombie_trup",vector():set(106.582,1.580,458.101),407745,223)
	AI:create_free("zombie_babka_strong",vector():set(106.582,1.580,458.101),407745,223)
	level.add_pp_effector ("blink.ppe", 234, false) 
	level.add_pp_effector("teleport.ppe", 2006, false)
end
function spawn_psi_one_seven()
	AI:create_free("bloodsucker_effector",vector():set(107.289,1.650,457.066),408582,223)
	AI:create_free("bloodsucker_effector",vector():set(107.289,1.650,457.066),408582,223)
	level.add_pp_effector ("blink.ppe", 234, false)
	level.add_pp_effector("amk_shoot.ppe", 2011, false)
	level.add_pp_effector("psi.ppe", 2008, false)
	level.add_pp_effector("alcohol.ppe", 3000, false) 
end

--' пси-спавн на Кордоне рестриктором2
function spawn_psi_two_one()
	AI:create_free("snork_normal",vector():set(108.022,1.703,456.664),409435,223)
	AI:create_free("snork_jumper",vector():set(107.289,1.650,457.066),408582,223)
	AI:create_free("snork_stronger",vector():set(108.022,1.703,456.664),409435,223)
	level.add_pp_effector ("blink.ppe", 234, false) 
	level.add_pp_effector("psi.ppe", 2008, false)
	level.add_pp_effector("amk_shoot.ppe", 2011, false)
end
function spawn_psi_two_two()
	AI:create_free("boar_strong",vector():set(106.582,1.580,458.101),407745,223)
	AI:create_free("boar_strong",vector():set(105.914,1.565,457.573),406900,199)
	AI:create_free("boar_strong",vector():set(105.313,1.533,457.661),406045,199)
	level.add_pp_effector ("blink.ppe", 234, false)
	level.add_pp_effector("amk_shoot.ppe", 2011, false)
	level.add_pp_effector("snd_shock.ppe", 2008, false) 
end
function spawn_psi_two_tri()
	AI:create_free("gigant_normal",vector():set(105.313,1.533,457.661),406045,199)
	AI:create_free("gigant_big_strong",vector():set(107.289,1.650,457.066),408582,223)
	level.add_pp_effector ("blink.ppe", 234, false)
	level.add_pp_effector("alcohol.ppe", 3000, false) 
	level.add_pp_effector("teleport.ppe", 2006, false)
	level.add_pp_effector("snd_shock.ppe", 2008, false)
end

function to_limansk()
	if not has_alife_info("black_doctor_finish_dialog") then
	    news_manager.send_tip("sviblov_to_limansk_sms", nil, nil, 30000)
	end
end

--' убираем 1 дес вертуху с Агры
function dell_arhara_desant_heli1()
	local se_obj = AI:object("agr_arhara_desant_heli1")
	if se_obj then AI:release(se_obj, true) end
end

--' убираем 2 дес вертуху с Агры
function dell_arhara_desant_heli2()
	local se_obj = AI:object("agr_arhara_desant_heli2")
	if se_obj then AI:release(se_obj, true) end
end

--' убираем вертуху торгаша с Агры
function dell_torgash_heli()
	local se_obj = AI:object("agro_torgash_heli")
	if se_obj then AI:release(se_obj, true) end
end

--' убираем 2 дес вертуху с Кордона
function dell_esc_desant_heli_2()
	local se_obj = AI:object("esc_arhara_desant_heli_2")
	if se_obj then AI:release(se_obj, true) end
end

--' убираем 1 дес вертуху с Кордона
function dell_esc_desant_heli_1()
	local se_obj = AI:object("esc_arhara_desant_heli_1")
	if se_obj then AI:release(se_obj, true) end
end

--' убираем 1 дес вертуху из деревни
function dell_village_heli1()
	local se_obj = AI:object("lost_village_heli_1")
	if se_obj then AI:release(se_obj, true) end
end

--' убираем 2 дес вертуху из деревни
function dell_village_heli2()
	local se_obj = AI:object("lost_village_heli_2")
	if se_obj then AI:release(se_obj, true) end
end

--' убираем Звездочёта из лагеря новисов
function dell_zvezd_novise()
	local se_obj = AI:object("zvezd_after_warl")
	if se_obj then AI:release(se_obj, true) end
end

--' спавним тайники с эмбрионами на болотах
function spawn_embrion_taynik()
	AI:create_free("m_inventory_box27", vector():set(-210.150,-0.397,392.077),29502,3361)
	AI:create_free("m_inventory_box28", vector():set(-176.410,0.787,390.441),53178,3361)
	AI:create_free("m_inventory_box29", vector():set(-216.538,-0.381,385.430),39492,3361)
end

--' проверим наличие эмбрионов
function boloto_provod_vstrecha_have()
	return inventory.search("mutant_zombie_cocoon",2) ~= false
end

--' оставим эмбрионы, а лучше дадим СМС
function boloto_provod_vstrecha_done(first_speaker, second_speaker)
	news_manager.send_tip("boloto_provod_vstrecha_done")
end	

function village_kap_pda()
	news_manager.send_tip("village_kap_pda", 40, nil, nil, nil, "arhara_dialog.village_kap_pda1()")
end
function village_kap_pda1()
	news_manager.send_tip("village_kap_pda1", nil, nil, nil, nil, "arhara_dialog.village_kap_pda2()")
end
function village_kap_pda2()
	news_manager.send_tip("village_kap_pda2", nil, nil, 10000)
end

--' отдадим ПДА Колмогору
function derevny_zashita_done(first_speaker, second_speaker)
	inventory.out_items("kapitan_pda",1)
end

function delete_pereod_gen_bol()
	local se_obj = AI:object("gener_dok_stalk2")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("generators_black_dok")
	if se_obj then AI:release(se_obj, true) end
end

--' проверим наличие 100000 для Земляка
function sto_shtuk(actor,npc)
    return actor:money() > 100000
end

--' отдадим 100000 Земляку
function zemlyk_take_money(t1,t2)
	local npc = (t1:id()==0) and t2 or t1
	dialogs.relocate_money(npc,100000,"out")
end

--' проверим наличие 50000 для Земляка
function pytdesyt_shtuk(actor,npc)
    return actor:money() > 50000
end

--' отдадим 50000 Земляку
function zemlyk_take_pytdesyt(t1,t2)
	local npc = (t1:id()==0) and t2 or t1
	dialogs.relocate_money(npc,50000,"out")
end

--' убираем квестовую вертуху с Генераторов
function dell_gen_heli_hit()
	local se_obj = AI:object("generators_heli_hit")
	if se_obj then AI:release(se_obj, true) end
end

--' спавним джойстик Андерсена
function spawn_joystik()
	AI:create_free("pult_anders", vector():set(77.743,37.345,-268.534),428006,3114)
end

--' спавним немного артов на Генераторах
function spawn_generators_art1()
	AI:create_free("af_spirit_1",vector():set(20.610,34.871,-213.418),360023,3110)
	AI:create_free("af_fireball",vector():set(-68.352,23.909,-181.416),256639,3106)
	AI:create_free("af_cristall",vector():set(215.910,20.703,-358.402),585185,3141)
	AI:create_free("af_armor_2",vector():set(13.783,34.843,-270.739),352093,3109)
	AI:create_free("af_fireball",vector():set(14.385,23.251,-466.348),352666,3104)
	AI:create_free("art_acumm",vector():set(127.714,29.674,-562.987),483806,3128)
end

--' спавним ещё немного артов на Генераторах
function spawn_generators_art2()
	AI:create_free("af_rusty_thorn",vector():set(-65.445,30.138,-99.984),260558,3102)
	AI:create_free("af_rusty_kristall",vector():set(-204.705,29.777,-103.302),101471,3085)
	AI:create_free("af_phantom",vector():set(-204.805,29.777,-103.302),101471,3085)
	AI:create_free("af_drops",vector():set(-0.313,26.048,-400.088),335415,3108)
	AI:create_free("art_acumm",vector():set(249.126,18.879,-438.853),624290,3152)
	AI:create_free("af_mincer_meat",vector():set(74.540,30.205,-362.753),422955,3115)
	AI:create_free("af_mincer_meat",vector():set(19.410,35.915,-546.888),358722,3107)
end

--' заводим третий генератор
function generator3_vkl()
	AI:create_free("imitator",vector():set(-36.434,45.577,-257.662),295045,3105)
	AI:create_free("imitator",vector():set(-36.434,45.577,-257.662),295045,3105)
	AI:create_free("imitator",vector():set(-36.807,45.471,-257.168),291121,3105)
	AI:create_free("imitator",vector():set(-36.807,45.471,-257.168),291121,3105)
	AI:create_free("imitator",vector():set(-32.598,40.993,-255.071),296678,3105)
	AI:create_free("imitator",vector():set(-33.763,40.597,-260.812),295852,3105)
	AI:create_free("imitator",vector():set(-39.815,39.999,-258.828),291121,3105)
	AI:create_free("imitator",vector():set(-36.467,44.480,-254.494),291121,3105)
	AI:create_free("imitator",vector():set(-36.467,44.480,-254.494),291121,3105)
end

--' убираем Звездочёта с Генераторов
function dell_zvezd_generators()
	local se_obj = AI:object("generators_zvezdochet")
	if se_obj then AI:release(se_obj, true) end
end

--' заспавним пёсиков на пути Удава на болотах
function spawn_dog_udav_boloto()
	AI:create_free("dog_weak",vector():set(-200.920,4.329,522.086),115055,3393)
	AI:create_free("dog_weak",vector():set(-200.920,4.329,522.086),115055,3393)
	AI:create_free("dog_habaruch",vector():set(-200.920,4.329,522.086),115055,3393)
	AI:create_free("dog_habaruch",vector():set(-200.920,4.329,522.086),115055,3393)
	AI:create_free("pseudodog_weak",vector():set(-200.920,4.329,522.086),115055,3393)
	AI:create_free("pseudodog_weak",vector():set(-200.920,4.329,522.086),115055,3393)
end

--' убираем Боцмана с болот
function dell_udav_bolota()
	local se_obj = AI:object("marsh_udav")
	if se_obj then AI:release(se_obj, true) end
end

--' убираем вертуху с болот при смерти Боцмана
function dell_marsh_heli_dok()
	local se_obj = AI:object("marsh_heli_dok")
	if se_obj then AI:release(se_obj, true) end
end

--' убираем вертуху с дока с генераторов
function dell_generators_heli_dok()
	local se_obj = AI:object("generators_heli_dok")
	if se_obj then AI:release(se_obj, true) end
end

--' убираем переход болото-генераторы
function delete_pereod_bolota_gen()
end

--' проверим наличие джойстика
function ander_joystik_say_have() 
	return inventory.search("pult_anders",1) ~= false
end

function metka_gener_udav()
	local obj = AI:object("generators_udav")
	if obj then
		level.map_add_object_spot(obj.id, "blue_location", "marsh_udav_name")
	end
end

function remove_metka_gener_udav()
	local obj = AI:object("generators_udav")
	if obj then
		level.map_remove_object_spot(obj.id, "blue_location")
	end
	arhara_dialog.plan_zahvata_sms1()
end

--' отдадим джойстик Боцману
function joystik_otdal(first_speaker, second_speaker)
	inventory.out_items("pult_anders",1)
end

--' убираем Фрица с Генераторов
function dell_frits()
	local se_obj = AI:object("frits")
	if se_obj then AI:release(se_obj, true) end
end

--' убираем Фрица2 с Генераторов
function delete_frits2()
	local se_obj = AI:object("gener_frits2")
	if se_obj then AI:release(se_obj, true) end
end

--' убираем охрану Андерсена 
function delete_ohrana_ander()
	local se_obj = AI:object("gener_dok_stalk1")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("gener_dok_stalk3")
	if se_obj then AI:release(se_obj, true) end
end

--' убираем Сапсана с генеров
function del_gen_komandir()
	local se_obj = AI:object("gener_desant_black_komandir")
	if se_obj then AI:release(se_obj, true) end
end

--' убираем тело Пантеры и Дока
function delete_pebyta_after_proval()
	local se_obj = AI:object("gener_bl_doktor1")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("generators_pantera_dead")
	if se_obj then AI:release(se_obj, true) end
end

--' заспавним ключ от секретки НЗ
function kluch_teleport2_spawn()
	if not has_alife_info("generators_code_door_unlocked_spawn") then
		AI:create_free("kluch_dell_teleport2",vector():set(172.326,29.329,-492.119),535422,3152)
		AI:create_free("af_arhara_globus",vector():set(172.326,29.329,-492.119),535422,3152)
		AI:create_free("pseudodog_weak",vector():set(172.366,28.740,-493.136),535420,3152)
		AI:create_free("dog_habaruch",vector():set(172.366,28.740,-493.136),535420,3152)
		AI:create_free("pseudodog_weak",vector():set(162.445,22.799,-500.679),523880,3152)
		AI:create_free("pseudodog_big",vector():set(162.445,22.799,-500.679),523880,3152)
		AI:create_free("dog_weak",vector():set(162.445,22.799,-500.679),523880,3152)
		AI:create_free("dog_normal",vector():set(162.445,22.799,-500.679),523880,3152)
		AI:create_free("bloodsucker_effector",vector():set(152.704,17.637,-500.195),512486,3152)
		Actor:give_info_portion("generators_code_door_unlocked_spawn")
	end
end

--' убираем Боцмана с Генераторов 
function delete_botsman_gener()
	local se_obj = AI:object("generators_udav")
	if se_obj then AI:release(se_obj, true) end
end

--' Получим блокнот Пантеры от Призрака
function take_bloknot_pantera(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "bloknot_pantera","in")
	arhara_dialog.dok_podvox_sms1()
	Actor:give_info_portion("perehod_warlab_na_gener")
	sak.add_new_warlab_to_generators()
end

--' заспавним арт и досье Звездочёта
function dosye_zvez_spawn()
	AI:create_free("dosye_zvez",vector():set(87.017,24.595,-15.456),437960,3119)
	AI:create_free("af_spirit_3",vector():set(86.514,24.580,-15.479),437960,3119)
	AI:create_free("chimera_strong",vector():set(90.968,25.641,-61.678),442584,3121)
	AI:create_free("chimera_strong",vector():set(46.080,23.543,-23.047),390432,3119)
end

--' спавним зомбаков на генераторах у деревни
function gener_spawn_zombaki()
	AI:create_free("zombie_babka_weak",vector():set(-127.703,43.418,-549.804),187271,3093)
	AI:create_free("zombie_strong",vector():set(-127.703,43.418,-549.804),187271,3093)
	AI:create_free("zombie_trup",vector():set(-127.703,43.418,-549.804),187271,3093)
	AI:create_free("zombie_babka_normal",vector():set(-130.494,43.038,-543.485),192838,3093)
	AI:create_free("zombie_hell2",vector():set(-130.494,43.038,-543.485),192838,3093)
	AI:create_free("zombie_hell4",vector():set(-130.494,43.038,-543.485),192838,3093)
	AI:create_free("zombie_babka_strong",vector():set(-121.858,42.962,-546.894),195197,3093)
	AI:create_free("zombie_hell5",vector():set(-121.857,42.962,-546.894),195197,3093)
	AI:create_free("zombie_hell6",vector():set(-121.859,42.962,-546.894),195197,3093)
end

--' убираем Клыка с Бара
function delete_kluk_bar()
	local se_obj = AI:object("kluk_bar")
	if se_obj then AI:release(se_obj, true) end
end

--' отдадим досье Клыку
function dosye_zvez_otdal(first_speaker, second_speaker)
	inventory.out_items("dosye_zvez",1)
end

--' заспавним кошек на пути Клыка
function spawn_koshki_nz()
	for i = 1, 9 do
		AI:create_free("cat_strong",vector():set(-9.490,-25.435,-169.116),849983,2897)
	end
end

--' заспавним зомби на радаре
function spawn_zombi_padar()
	local n = 0
	for i = 1, 15 do
		start_small_timer(1000 + n, function()
			AI:create_free("zombie_strong",vector():set(-10.776,0.198,-48.988),7089,1960)
		end)
		n = n + 1000
	end
end

--' убираем аллспавновскую куклу у колб на радаре
function dell_radar_kukla()
	local se_obj = AI:object("radar_kukla")
	if se_obj then AI:release(se_obj, true) end
end

--' заспавним куклу на радаре и возьмём её фото
function spawn_kukolka(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "foto_kukla", "in")
	AI:create_free("anomal_pole",vector():set(-10.734,0.198,-54.009),7084,1960)
end

--' проверим наличие куклы
function muha_kukla_have()
	return inventory.search("kukla_1",1) ~= false
end

--' отдадим куклу и фото Мухе
function muha_kukla_done(first_speaker, second_speaker)
	inventory.out_items("kukla_1",1)
	inventory.out_items("foto_kukla",1)
	second_speaker:set_relation(game_object.friend, first_speaker)
end

--' убираем Пантеру и Звездочёта с НЗ 
function delete_aver_vragi()
	local se_obj = AI:object("aver_zvezdochet2")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("aver_pantera_new")
	if se_obj then AI:release(se_obj, true) end
end

--' спавним записку пилота на чаэс2
function spawn_chaes_pilot_zapiska()
	AI:create_free("pilot_zapiska", vector():set(243.750,20.599,151.565),78081,2573)
	AI:create_free("samopisez", vector():set(152.873,70.873,121.853),69353,2573)
	AI:create_free("m_inventory_box30", vector():set(251.823,11.379,175.369),88107,2577)
end

--' убираем Призрака с ЧАЭС1
function dell_chaes1_prizrak()
	local se_obj = AI:story_object(story_ids.chaes1_prizrak)
	if se_obj then AI:release(se_obj, true) end
end

--' убираем Призрака с radara
function dell_new_prizrak()
	local se_obj = AI:story_object(story_ids.new_prizrak)
	if se_obj then AI:release(se_obj, true) end
end

--' получим арты от Клёнова
function polt_art_done(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "af_part_monolit1","in")
	dialogs.relocate_item_section(second_speaker, "af_spiral","in")
end

--' проверим самописца
function voronin_samopisez_have()
	return inventory.search("samopisez",1) ~= false
end

--' отдадим самописец Воронину
function voronin_samopisez_done(first_speaker, second_speaker)
	inventory.out_items("samopisez",1)
	news_manager.send_tip("voronin_samopisez_done", 10, nil, nil, nil, "arhara_dialog.iz_moskvy_sms1()", 17)
end

--' убираем вертуху Пантеры с авера
function dell_pantera_vertuha_aver()
	local se_obj = AI:object("pantera_vertuha_aver")
	if se_obj then AI:release(se_obj, true) end
end

--' убираем вертуху Отшельника с авера
function dell_aver_arhara_heli_1()
	local se_obj = AI:object("aver_arhara_heli_1")
	if se_obj then AI:release(se_obj, true) end
end

--' убираем военных с генер. вертолёта с НЗ 
function dell_muziki_aver()
	local se_obj = AI:object("soprov_muha_soldat1")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("soprov_muha_soldat2")
	if se_obj then AI:release(se_obj, true) end
	arhara_dialog.pilot_muhi_sms()
end

--' убираем Муху с НЗ 
function dell_devchonka()
	local se_obj = AI:story_object(story_ids.devchonka)
	if se_obj then AI:release(se_obj, true) end
end

--' получим фото от раненого
function dal_foto(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "foto_aver_zvezd","in")
	dialogs.relocate_item_section(second_speaker, "foto_aver_mono","in")
	arhara_dialog.after_die_muha_sms1()
end

--' убираем тело Мухи и раненого с авера 
function dell_muha_die_aver()
	local se_obj = AI:object("muha_soldat_ranen")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("muha_die")
	if se_obj then AI:release(se_obj, true) end
end

--' спавним ящик с верта военных на авере
function spawn_general_prezent()
	if not has_alife_info("spawn_general_prezent_info") then
		local se_obj = AI:create_free("m_inventory_box31", vector():set(-320.174,-8.726,21.975),320365,2889)
		Actor:give_info_portion("spawn_general_prezent_info")
	end
end

--' заспавним зомби на авере
function aver_spawp_zombiki()
	AI:create_free("zombie_babka_weak",vector():set(51.951,-13.962,-185.843),958151,2908)
	AI:create_free("zombie_babka_normal",vector():set(51.951,-13.962,-185.843),958151,2908)
	AI:create_free("zombie_strong",vector():set(51.951,-13.962,-185.843),958151,2908)
	AI:create_free("zombie_trup",vector():set(51.951,-13.962,-185.843),958151,2908)
	AI:create_free("zombie_blow",vector():set(51.951,-13.962,-185.843),958151,2908)
	AI:create_free("zombie_hell7",vector():set(51.9511,-13.962,-185.843),958151,2908)
	AI:create_free("zombie_hell6",vector():set(51.9512,-13.962,-185.843),958151,2908)
	AI:create_free("zombie_babka_strong",vector():set(51.9513,-13.962,-185.843),958151,2908)
	AI:create_free("zombie_weak",vector():set(51.9514,-13.962,-185.843),958151,2908)
	AI:create_free("zombie_normal",vector():set(51.9515,-13.962,-185.843),958151,2908)
	AI:create_free("zombie_hell1",vector():set(51.9516,-13.962,-185.843),958151,2908)
	AI:create_free("zombie_hell2",vector():set(51.9517,-13.962,-185.843),958151,2908)
	AI:create_free("zombie_hell3",vector():set(51.9518,-13.962,-185.843),958151,2908)
	AI:create_free("zombie_trup",vector():set(51.9519,-13.962,-185.843),958151,2908)
	AI:create_free("zombie_hell5",vector():set(51.95199,-13.962,-185.843),958151,2908)
	AI:create_free("zombie_hell",vector():set(51.95199,-13.962,-185.843),958151,2908)
	AI:create_free("zombie_hell15",vector():set(51.95199,-13.962,-185.843),958151,2908)
	AI:create_free("zombie_hell15",vector():set(51.95199,-13.962,-185.843),958151,2908)
end

--' убираем учёных с генераторов 
function dell_lomonosov()
	local se_obj = AI:object("solvador")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("andersen")
	if se_obj then AI:release(se_obj, true) end
end

--' заспавним вороний глаз
function gener_spawn_eye_voron()
	AI:create_free("af_eye_voron",vector():set(184.070,28.537,-565.312),548909,3137)
	AI:create_free("af_eye_voron",vector():set(195.765,35.845,-573.473),562425,3152)
	AI:create_free("m_inventory_box32",vector():set(190.773,35.842,-574.642),556868,3152)
	AI:create_free("mini_antenna1",vector():set(189.175,28.536,-566.536),554518,3137)
	AI:create_free("mini_antenna2",vector():set(195.494,28.630,-555.928),563238,3143)
	AI:create_free("mini_antenna3",vector():set(203.440,28.548,-565.897),571113,3143)
	AI:create_free("mini_antenna4",vector():set(189.671,28.536,-572.527),555297,3137)
	AI:create_free("mini_antenna5",vector():set(182.885,35.841,-562.001),547286,3152)
end

--' убираем псевдотелепорт, Сапсана и свободовца
function gen_dell_tele_sapsan()
	arhara_dialog.imitat_tele_final1_dell()

	local se_obj = AI:object("gen_sapsan1")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("gen_svoboda_parlamenter")
	if se_obj then AI:release(se_obj, true) end
end

--' проверим наличие генераторов помех
function solvador_say_have() 
	return inventory.search("mini_antenna1",1) ~= false
		and inventory.search("mini_antenna2",1) ~= false
		and inventory.search("mini_antenna3",1) ~= false
		and inventory.search("mini_antenna4",1) ~= false
		and inventory.search("mini_antenna5",1) ~= false
end

--' отдадим это барахло Сольвадору
function solvador_say_done(first_speaker, second_speaker)
	inventory.out_items("mini_antenna1",1)
	inventory.out_items("mini_antenna2",1)
	inventory.out_items("mini_antenna3",1)
	inventory.out_items("mini_antenna4",1)
	inventory.out_items("mini_antenna5",1)

	arhara_dialog.vitamin_posrednik_sms1()
end

--' убираем копии учёных с Генераторов 
function dell_uchen_gen_povtorno()
	local se_obj = AI:object("gen_solvador1")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("gen_andersen1")
	if se_obj then AI:release(se_obj, true) end
end

--' убираем Андерсена1 с генеров 
function dell_uchen_andersen1()
	local se_obj = AI:object("gen_andersen1")
	if se_obj then AI:release(se_obj, true) end
end

--' убираем Сольвадора1 с генеров 
function dell_uchen_solvador1()
	local se_obj = AI:object("gen_solvador1")
	if se_obj then AI:release(se_obj, true) end
end

function remove_kluk_chaes2_metka()
	local obj = AI:object("kluk_chaes2") 
	if obj then
		level.map_remove_object_spot(obj.id,"crlc_big")
	end
end

function priz_pamt_sms1()
	news_manager.send_tip("priz_pamt_sms1", 6)
end

--' получим фото от Клыка на ЧАЭС2
function dal_chaes2_karta(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker,"chaes2_karta_kluk","in")
end

--' убираем Клыка с чаэс2 а заодно и Пантеру с генераторов
function dell_kluk_chaes2()
	local se_obj = AI:object("kluk_chaes2")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("gen_pantera_life")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("chaes2_arhara_beter1")
	if se_obj then AI:release(se_obj, true) end
end

--' заспавним бочки на чаэс2
function chaes2_expl_barrel()
	AI:create_free("explosive_barrel",vector():set(302.55395507813,-0.10096184909344,233.08476257324),112650,2587)
	local obj = AI:create_free("explosive_bomba",vector():set(301.64270019531,-0.10008424520493,231.34838867188),112650,2587)
	set_story_id(obj, story_ids.chaes2_expl_barrel)
	switch_online(obj.id)
end

function explode_bobma_kluk(actor, npc)
	local obj = level_object_by_sid(story_ids.chaes2_expl_barrel)
	if obj then obj:explode(npc:id()) end
	start_real_timer("run", 2, "arhara_dialog.bomba_vzruv_sms()")
	local snd_obj = xr_sound.get_safe_sound_object([[characters_voice\scenario\arhara_chaes2\rozik]])
	snd_obj:play_no_feedback(Actor, sound_object.s2d, 0, vector(), 1.0)
end

--' заспавним моолитовцев на трубе
function mono_chaes2_truba_1()
	AI:create_free("sar_monolith_respawn",vector():set(549.876770019531,80.1041946411133,202.959167480469),171515,2628)
	AI:create_free("sar_monolith_respawn",vector():set(554.652709960938,80.102424621582,207.067840576172),171515,2628)
	AI:create("tank_spawn_zasada",vector():set(554.652809960938,80.102424621582,207.067840576172),171515,2628)
end
function mono_chaes2_truba_2()
	AI:create_free("sar_monolith_respawn",vector():set(558.519775390625,112.811256408691,199.679763793945),171515,2628)
	AI:create("tank_spawn_zasada5",vector():set(558.519785390625,112.811256408691,199.679763793945),171515,2628)
	AI:create_free("sar_monolith_respawn",vector():set(550.940307617188,112.814964294434,199.753204345703),171515,2628)
	AI:create_free("sar_monolith_respawn",vector():set(550.940307617188,112.814964294434,199.753204345703),171515,2628)
end

--' Оживим Муху
function otsek_ozivlenie()
	AI:create_free("imitator",vector():set(-94.531,28.299,566.873),1087,3038)
	level.add_pp_effector ("blink.ppe", 234, false) 
	level.add_pp_effector("snd_shock.ppe", 2008, false)
end

--' убираем труп Мухи из Госпиталя 
function dell_hospital_muha_trup()
	local se_obj = AI:object("hospital_muha_trup")
	if se_obj then AI:release(se_obj, true) end
end

--' заспавним живую капсулу у Мухи и 3 у дока
function sp_live_kapsula()
	AI:create("zone_mincer_weak",vector():set(-95.816,28.425,567.057),843,3038)
	AI:create("zone_mincer_weak",vector():set(-95.578,32.454,614.056),868,3038)
	AI:create("zone_mincer_weak",vector():set(-95.447,32.558,615.379),1026,3038)
	AI:create("zone_mincer_weak",vector():set(-95.606,32.499,614.533),869,3038)
end

--' варим Камень Удачи
function otsek_varka_kamen()
	level.add_pp_effector ("blink.ppe", 234, false) 
	level.add_pp_effector("snd_shock.ppe", 2008, false)
	level.add_pp_effector("teleport.ppe", 2006, false)
end

--' подмена артов в госпитале
function has_hosp_arts()
	return inventory.search("af_part_monolit1")
		and inventory.search("af_water_flower")
end
function hosp_podmena()
	inventory.out_items("af_part_monolit1",1)
	inventory.out_items("af_water_flower",1)
	inventory.give_items("af_part_monolit2",1)
	inventory.give_items("af_water_flower1",1)
	news_manager.send_tip("hosp_podmena_sms")
	local obj = AI:object( "door_hospital_01_l_0003" )
	if obj then
		AI:release( obj, true )
	end
	obj = AI:object( "door_hospital_01_r_0003" )
	if obj then
		AI:release( obj, true )
	end
end

--' убираем голограмму ЧД 
function dell_hospital_bl_dok()
	local se_obj = AI:object("hospital_bl_dok")
	if se_obj then AI:release(se_obj, true) end
end

--' проверим наличие артов для ЧД
function artu_chd() 
	return inventory.search("af_water_flower1",1) ~= false and
		inventory.search("af_part_monolit2",1) ~= false
end

--' убираем отца и Пантеру
function dell_otez_and_pant()
	local se_obj = AI:object("hosp_father")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("hospital_pantera_girl")
	if se_obj then AI:release(se_obj, true) end
end

--' Получим кредитку от ЧД и отдадим Сердце Полтергейста
function chd_dal_kreditku(first_speaker, second_speaker)
	inventory.out_items("af_part_monolit2",1)
	dialogs.relocate_item_section(second_speaker, "kreditka","in")
end

--' Получим кредитку от ЧД и отдадим Камень Удачи
function chd_otdat_kamen(first_speaker, second_speaker)
	inventory.out_items("af_kamen_udachy",1)
	dialogs.relocate_item_section(second_speaker, "kreditka","in")
end

--' проверим наличие Камня удачи
function af_kamen_est()
	return inventory.search("af_kamen_udachy",1) ~= false
end

--' убираем Седого с атп 
function atp_sedoy_dell()
	local se_obj = AI:object("atp_mobil_torgovetz")
	if se_obj then
		-- сначала прерываем диалог
		local obj = level.object_by_id(se_obj.id)
		if obj and obj:is_talking() then
			obj:stop_talk()
			Actor:stop_talk()
		end
		-- затем удаляем
		start_real_timer("run", 0.2, "arhara_dialog.atp_sedoy_dell2()")
	end
end
function atp_sedoy_dell2()
	local se_obj = AI:object("atp_mobil_torgovetz")
	if se_obj then AI:release(se_obj, true) end
end

--' убираем вертуху Седого с атп
function atp_sedoy_heli_dell()
	local se_obj = AI:object("atp_sedoy_heli")
	if se_obj then AI:release(se_obj, true) end
end

--' заспавним имитатор перех. агро-болото
function agro_boloto_imitator()
	AI:create_free("imitator_shar",vector():set(-212.539,2.577,-293.192),23764,688)
end

--' заспавним имитатор перех. кордон-болото
function kopdon_boloto_imitator()
	AI:create_free("imitator_shar",vector():set(-247.803,-17.371,-204.223),10936,41)
end

--' убираём карту разведчика
function razved_karta_dell()
	local se_obj = AI:object("razved_karta")
	if se_obj then AI:release(se_obj, true) end
end

--' убираем дока с Припяти 
function prip_dok_arh_dell()
	local se_obj = AI:object("prip_dok_arh")
	if se_obj then AI:release(se_obj, true) end
end

--' заспавним имитатор финал Архара
function sp_imit_tele_final1()
	AI:create_free("imitator_tele_final1",vector():set(249.512,3.124,-257.802),426110,702)
	AI:create_free("imitator_tele_final1",vector():set(249.448,3.155,-257.985),426110,702)

	AI:create_free("imitator_tele_final1",vector():set(243.007,3.940,-245.595),424772,702)
	AI:create_free("imitator_tele_final1",vector():set(242.601,3.811,-245.950),424772,702)
end

--' спавним телепорт выхода ГГ с финала 
function spawn_teleport_final_vorota()
	AI:create("m_teleport_final_vorota",vector():set(193.4518737793,3.6606612205505,-247.07885742188),404687,692)
end

--' убираем имитаторы телеп финала
function imitat_tele_final1_dell()
	local se_obj
	for i = 1, 65534 do
		se_obj = AI:object(i)
		if se_obj and se_obj:section_name() == "imitator_tele_final1" then
			AI:release(se_obj, true)
		end
	end
end

--' убираем 2финальную вертуху с Агры
function dell_agro_final_heli2()
	local se_obj = AI:object("agro_final_vert2")
	if se_obj then AI:release(se_obj, true) end
end

--' убираем 1финальную вертуху с Агры
function dell_agro_final_heli1()
	local se_obj = AI:object("agro_final_vert1")
	if se_obj then AI:release(se_obj, true) end
end

--' убираем пассажиров 1 финальной вертухи
function delete_ludi_vert1()
	local se_obj = AI:object("kapitan_agro")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("kuzhetsov")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("final_barman")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("final_saharov")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("final_klenov")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("final_voronin")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("final_petrenko")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("final_dan")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("final_borov")
	if se_obj then AI:release(se_obj, true) end
end

--' убираем пассажиров 2 финальной вертухи
function delete_ludi_vert2()
	local se_obj = AI:object("final_shade_mono")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("final_shaxter")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("final_otshelnik")
	if se_obj then AI:release(se_obj, true)  end
	se_obj = AI:object("final_akim")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("final_holod")
	if se_obj then  AI:release(se_obj, true) end
	se_obj = AI:object("final_chimaera")
	if se_obj then  AI:release(se_obj, true) end
	se_obj = AI:object("final_kolmogor")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("final_ara")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("final_lukash")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("final_krot")
	if se_obj then AI:release(se_obj, true) end
end

--' убираем группу стрелка
function delete_gpuppa()
	local se_obj = AI:object("final_prizrak")
	if se_obj then AI:release(se_obj, true)  end
	se_obj = AI:object("final_dok_arh")
	if se_obj then AI:release(se_obj, true)  end
	se_obj = AI:object("final_piligrim")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("final_muxa")
	if se_obj then AI:release(se_obj, true) end
end

--' убираем финального Архару 
function final_arhara_dell()
	local se_obj = AI:object("final_arhara")
	if se_obj then  AI:release(se_obj, true) end
end

--' убираем финального Клыка 
function dell_kluk_final()
	local se_obj = AI:object("final_kluk")
	if se_obj then AI:release(se_obj, true) end
end

--' заспавним имитатор финал группы
function sp_imit_tele2_final2()
	AI:create_free("imitator_tele_final1",vector():set(265.387,5.630,-246.141),431101,702)
	AI:create_free("imitator_tele_final1",vector():set(265.532,5.796,-245.531),431102,702)
end

--' убираем Призрака
function delete_final_prizrak()
	local se_obj = AI:object("final_prizrak")
	if se_obj then AI:release(se_obj, true) end
end

--' убираем дока
function delete_final_dok_arh()
	local se_obj = AI:object("final_dok_arh")
	if se_obj then  AI:release(se_obj, true)  end
end

--' убираем Пили
function delete_final_piligrim()
	local se_obj = AI:object("final_piligrim")
	if se_obj then AI:release(se_obj, true) end
end
--------------------------------------------------------------------------------------------
--' радар арты пришли в негодность
function radar_udalyem_art()
	local tabl_art_v_buliz = { 
		["af_armor_1"] = 0.4,
		["af_armor_2"] = 0.3,
		["af_armor_3"] = 0.2,
		["af_armor_4"] = 0.1,
		["af_babka_1"] = 0.4,
		["af_babka_2"] = 0.3,
		["af_babka_3"] = 0.2,
		["af_babka_4"] = 0.1,
		["af_cry_1"] = 0.4,
		["af_cry_2"] = 0.2,
		["af_cry_3"] = 0.1,
		["af_dik_1"] = 0.4,
		["af_dik_2"] = 0.3,
		["af_dik_3"] = 0.2,
		["af_dik_4"] = 0.1,
		["af_kol_1"] = 0.4,
		["af_kol_2"] = 0.3,
		["af_kol_3"] = 0.2,
		["af_kol_4"] = 0.1,
		["af_pudd_1"] = 0.4,
		["af_pudd_2"] = 0.3,
		["af_pudd_3"] = 0.2,  
		["af_pudd_4"] = 0.1,
		["af_simbion"] = 0.4,
		["af_spirit_1"] = 0.4,
		["af_spirit_2"] = 0.3,
		["af_spirit_3"] = 0.2,
		["af_spirit_4"] = 0.1,
		["af_caterpillar"] = 0.3,
		["af_eye_voron"] = 0.2,
		["af_night_star"] = 0.6,
		["af_gold_fish"] = 0.6,
		["af_cristall"] = 0.6,
		["af_soul"] = 0.6,
		["af_electra_moonlight"] = 0.6,
		["af_ameba_mica"] = 0.6,
		["af_dummy_spring"] = 0.6,
		["af_dummy_pellicle"] = 0.6,
		["af_dummy_battery"] = 0.6,
		["af_dummy_dummy"] = 0.6,
		["af_dummy_glassbeads"] = 0.6,
		["af_rusty_sea-urchin"] = 0.6,
		["af_fuzz_kolobok"] = 0.6
	}
	local tDel = {}
	local bulizCnt = 0
	local s, bobj
	Actor:iterate_inventory(function (dummy, vItem)
		s = vItem:section()
		if tabl_art_v_buliz[s] and  math_random() < tabl_art_v_buliz[s] then
			table.add(tDel, s)
			xr_statistic.set_id(vItem:id(), nil)
			del_obj_by_id(vItem:id())
			bobj = AI:create("af_buliz", vector(), 0, 0, 0)
			xr_statistic.set_id(bobj.id, true)
			bulizCnt = bulizCnt + 1
		end
	end,
	Actor)
	if bulizCnt==0 then return end
	for sect, cnt in pairs(tDel) do
		news_manager.relocate_item("out", sect, cnt)
	end
	news_manager.relocate_item("in", "af_buliz", bulizCnt)
    news_manager.send_tip("radar_udalyem_art_sms", 5)
end
--' получим  булыжники
function taik_bul(first_speaker, second_speaker)
end
------------------------------------------------------------------------------------------------------------------
--' пьём водку
function xrypnem_sto_gramm()
	level.add_pp_effector("alcohol.ppe", 3000, false)
end
---------------------------------------------------------------------------------------------------------
--' х18 арты пришли в негодность
function laba_dell_art()
	local tabl_laba_v_buliz = { 
		["af_armor_1"] = 1,
		["af_armor_2"] = 1,
		["af_armor_3"] = 1,
		["af_armor_4"] = 1,
		["af_babka_1"] = 1,
		["af_babka_2"] = 1,
		["af_babka_3"] = 1,
		["af_cry_1"] = 1,
		["af_cry_2"] = 1,
		["af_cry_3"] = 1,
		["af_dik_1"] = 1,
		["af_dik_2"] = 1,
		["af_dik_3"] = 1,
		["af_dik_4"] = 1,
		["af_kol_1"] = 1,
		["af_kol_2"] = 1,
		["af_kol_3"] = 1,
		["af_kol_4"] = 1,
		["af_pudd_1"] = 1,
		["af_pudd_2"] = 1,
		["af_pudd_3"] = 1,  
		["af_pudd_4"] = 1,
		["af_simbion"] = 1,
		["af_spirit_1"] = 1,
		["af_spirit_2"] = 1,
		["af_spirit_3"] = 1,
		["af_spirit_4"] = 1,
		["af_caterpillar"] = 1,
		["af_vyvert_green"] = 1,
		["af_blood_green"] = 1 
	}
	local tDel = {}
	local bulizCnt = 0
	local s, bobj
	Actor:iterate_inventory(function (dummy, vItem)
		s = vItem:section()
		if tabl_laba_v_buliz[s] then
			table.add(tDel, s)
			xr_statistic.set_id(vItem:id(), nil)
			del_obj_by_id(vItem:id())
			bobj = AI:create("af_buliz", vector(), 0, 0, 0)
			xr_statistic.set_id(bobj.id, true)
			bulizCnt = bulizCnt + 1
		end
	end,
	Actor)
	if bulizCnt==0 then return end
	for sect, cnt in pairs(tDel) do
		news_manager.relocate_item("out", sect, cnt)
	end
	news_manager.relocate_item("in", "af_buliz", bulizCnt)
end
--' получим  булыжники
function laba_bul(first_speaker, second_speaker)
end
---------------------------------------------------------------------------------------------
--' замена артов в Х-10
function laba_del_artu()
	local tabl_laba_v_spiral = { 
		["af_armor_1"] = 1,    
		["af_cry_1"] = 1,    
		["af_dik_1"] = 1,    
		["af_kol_1"] = 1,    
		["af_pudd_1"] = 1,    
		["af_spirit_1"] = 1,    
		["af_caterpillar"] = 1 
	}
	local tDel = {}
	local spiralCnt = 0
	local s, bobj
	Actor:iterate_inventory(function (dummy, vItem)
		s = vItem:section()
		if tabl_laba_v_spiral[s] then
			table.add(tDel, s)
			xr_statistic.set_id(vItem:id(), nil)
			del_obj_by_id(vItem:id())
			bobj = AI:create("af_spiral", vector(), 0, 0, 0)
			xr_statistic.set_id(bobj.id, true)
			spiralCnt = spiralCnt + 1
		end
	end,
	Actor)
	if spiralCnt==0 then return end
	for sect, cnt in pairs(tDel) do
		news_manager.relocate_item("out", sect, cnt)
	end
	news_manager.relocate_item("in", "af_spiral", spiralCnt)
end
--' получим спиральки
function laba_spir(first_speaker, second_speaker)
end
---------------------------------------------------------------------------------------------
--' замена патронов в кр. лесу
function forest_del_pistonu()
	if not inventory.search("izomorf_kristal", 1) then
		start_real_timer("run", 5, "arhara_dialog.forest_del_pistonu()")
		return
	end
	inventory.out_items("izomorf_kristal", 1)

	local n = 0
	local obj
	Actor:iterate_inventory(function (dummy, vItem)
		obj = AI:object(vItem:id())
		if obj and vItem:section() == "ammo_12x76_zhekan" then
			n = n + vItem:get_ammo_left()
			AI:release(obj, true)
		end
	end,
	Actor)
	if n > 0 then
		news_manager.relocate_item("out", "ammo_12x76_zhekan", n)
		news_manager.relocate_item("in", "ammo_zhekan_izomorf", n)
		amk.spawn_ammo_in_inv("ammo_zhekan_izomorf", n)
	end
	inventory.give_items("psevdokristall", 1)
end
---------------------------------------------------------------------------------------------
--' замена препластилина
function mozg_del_preplastilin()
	local s = 0
	local bobj
	Actor:iterate_inventory(function (dummy, vItem)
		if vItem:section()=="preplastilin" then
			s = s + 1
			xr_statistic.set_id(vItem:id(), nil)
			del_obj_by_id(vItem:id())
			bobj = AI:create("izomorf_plastilin", vector(), 0, 0, 0)
			xr_statistic.set_id(bobj.id, true)
		end
	end,
	Actor)
	if s==0 then return end
	news_manager.relocate_item("out", "preplastilin", s)
	news_manager.relocate_item("in", "izomorf_plastilin", s)
end
--' получим пластилин
function mozg_plastilin_est(first_speaker, second_speaker) 
end
---------------------------------------------------------------------------------------------
function oruzhie_delet()
	local se_box = AI:object('lima_podval_seif')
	local box = se_box and level.object_by_id(se_box.id) or abort("oruzhie_delet: box 'lima_podval_seif' not found")
	local addons = {
		[clsid.wpn_scope_s] = true,
		[clsid.wpn_scope] = true,
		[clsid.wpn_silencer] = true,
		[clsid.wpn_grenade_launcher] = true
	}
	local tabl_otnimem = { 
		["arhara_tele"] = true,
		['bomba'] = true,
		['bomba_big'] = true,
		['bomba_mina_b'] = true,
		['bomba_mina_n'] = true,
		['bomba_small'] = true,
		['bomba_timer_b_30_base'] = true,
		['bomba_timer_n_10_base'] = true,
		["device_scaner"] = true,
		["device_teleport"] = true,
		["hand_teleporter"] = true,
		["meceniy_outfit_new"] = true,
		['teleportator'] = true
	}
	local sec, cl
	Actor:iterate_inventory(function (actor, item)
		sec = item:section()
		cl = item:clsid()
		if IAmAWeapon[cl]
			or addons[cl]
			or tabl_otnimem[sec]
			or string.find(sec, "arhara_obman")
		then
			actor:transfer_item(item, box)
		end
	end,
	Actor)
end
------------------------------------------------------------------------------------------------------------------

--' заспавним БПБ в гроте
function bpb_spawn()
	AI:create_free("recipi_bpb",vector():set(-129.441,22.309,472.120),147706,2973)
end

--' удаляем таймер подстанции на Генераторах
function del_podstanziy_doza_timer()
	local se_obj = AI:story_object(story_ids.podstanziy_doza_timer_restrictor)
	if se_obj then
		AI:release(se_obj, true)
		news_manager.send_tip("del_podstanziy_doza_timer_sms", nil, nil, 20000)
	end
end

function disabl_weapon(actor, npc)
    bind_actor.hide_weapon("arh")
end
function enabl_weapon(actor, npc)
    bind_actor.restore_weapon("arh")
end

function disabl_karta(actor, npc) end
function enabl_karta(actor, npc) end

--' убираем хели-блак с Генераторов
function dell_gener_heli_black()
	local se_obj = AI:object("generators_heli_black")
	if se_obj then AI:release(se_obj, true) end
end

--' убираем верт Звездочёта с Генераторов
function dell_gener_heli_zvez()
	local se_obj = AI:object("gener_heli_zvez_pobeg")
	if se_obj then AI:release(se_obj, true) end
end

--' Отдадим ключ от секретки авера
function otdal_kluch_dell_telep2(first_speaker, second_speaker)
	inventory.out_items("kluch_dell_teleport2",1)
end

--' проверим наличие ак Стрелка
function adr_est_ak()
	return inventory.search("wpn_ak74_m1",1) ~= false
end

--' проверим наличие финансов для Адреналина
function adren_have_money_30000(actor,npc)
    return actor:money() > 30000
end

--' отдадим бабло
function adr_give_mon_30000(t1,t2)
	local npc = t1:id()==0 and t2 or t1
	dialogs.relocate_money(npc,30000,"out")
end

--' отдадим слом ак и получим новый
function otdat_vzyt_ak(first_speaker, second_speaker)
	inventory.out_items("wpn_ak74_m1",1)
	dialogs.relocate_item_section(second_speaker, "wpn_ak74_m1","in")
end

--' мешок охотника на кордоне
function sp_new_inventory33()
	AI:create_free("m_inventory_box33", vector():set(-11.449318885803,6.0457949638367,56.734508514404),265783,88)
end

--' проверим наличие запчастей для Захара
function zapchasti_est_vse() 
	return inventory.search("mutant_psevdogigant_hand",15,true) ~= false
		and inventory.search("mutant_fracture_hand",20,true) ~= false
		and inventory.search("mutant_hand_kontroler",10,true) ~= false
		and inventory.search("mutant_flesh_eye",30,true) ~= false
		and inventory.search("mutant_krovosos_jaw",15,true) ~= false
end
function zapchastei_net()
	return not this.zapchasti_est_vse()
end

--' отдадим запчасти Захару
function zaxar_chasti_mutantov(first_speaker, second_speaker)
	inventory.out_items("mutant_psevdogigant_hand",15,true)
	inventory.out_items("mutant_fracture_hand",20,true)
	inventory.out_items("mutant_hand_kontroler",10,true)
	inventory.out_items("mutant_flesh_eye",30,true)
	inventory.out_items("mutant_krovosos_jaw",15,true)
end

--' получим арбалет и стрелы от Сепатора и спавним мешок
function arbalet_dal(first_speaker, second_speaker)
	inventory.give_items("wpn_crossbow")
	inventory.give_items("ammo_arbolt", 3)
	AI:create_free("m_inventory_box33", vector():set(-8.776,7.324,57.807),267145,88)
end

--' Захар дал арт, СВУ и патроны
function zaxar_kvest_ok()
	inventory.give_items("af_eye_voron",1)
	inventory.give_items("wpn_svu",1)
	inventory.give_items("ammo_7.62x54_ap",1)
end

--' убираем Сепатора и Ко
function delete_sepator()
	local se_obj = AI:object("esc_hunter_zaschita_2")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("esc_hunter_zaschita_1")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("esc_hunter_zaschita_3")
	if se_obj then AI:release(se_obj, true) end
end

--' убираем хели-батя с Янтаря
function dell_yantar_heli_baty()
	local se_obj = AI:object("yantar_heli_baty")
	if se_obj then AI:release(se_obj, true) end
end

--' убираем Батю
function delete_yantar_baty()
	local se_obj = AI:object("yantar_baty")
	if se_obj then AI:release(se_obj, true) end
end

--' Сахар дал спецдетектор
function sah_dal_detektor(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "detektor_baty","in")
end

--' проверим наличие детектора и кассеты
function baty_zadanie_have()
	return inventory.search("video_kasseta",1) ~= false
		and inventory.search("detektor_baty",1) ~= false
end

--' отдадим детектор и кассету и получим миниган
function baty_zadanie_done(first_speaker, second_speaker)
	inventory.out_items("video_kasseta",1)
	inventory.out_items("detektor_baty",1)
	dialogs.relocate_item_section(second_speaker, "wpn_m_134_baty","in")
end

--' спавним видеокассету
function spawn_videokassete()
	AI:create_free("video_kasseta",vector():set(-200.300,-0.001,140.272),26777,1367)
end

--' ГГ друг вояк
function drug_bati(actor, npc)
	Actor:set_character_community("stranger", 0, 0)
	relation_registry.set_community_goodwill ("military", 0, 1000)
end

--' сделаем ГГ нейтралом и портим отношения с вояками
function vrag_voyk(actor, npc)
	Actor:set_character_community("actor", 0, 0)
	relation_registry.set_community_goodwill ("military", 0, -1000)
end

--' заспавним чёртов гранатомёт скриптом. Теперь он спавнится в ящике через алспаун, поэтому этот спавн не нужен.
function wpnrg_spawn()
-- local obj = AI:create_free("wpn_rg-6",vector():set(-274.552,-27.472,245.413),22,1545)
end

--' проверим наличие финансов для Бармена
function dvenadzat_shtuk(actor,npc)
    return actor:money() > 12000
end

--' отдадим деньги за ремонт ПДА
function dengi_remont_otdal(t1,t2)
	local npc = t1:id()==Actor:id() and t2 or t1
	dialogs.relocate_money(npc,12000,"out")
end

--' "отдадим" сломанный ПДА
function pda_mechenyi_otdal(first_speaker, second_speaker)
	news_manager.relocate_item("out", "device_pda")
end

--' "заберём" ПДА у Доцента
function dosemt_pda_zabral(first_speaker, second_speaker)
	news_manager.relocate_item("in", "device_pda")
	-- таймер вместо рестриктора
	start_real_timer("run", 25, "arhara_dialog.pda_sdelan_sms()")
	-- на случай, если пришли не в первый раз
	if has_alife_info("pda_dont_work") then
		Actor:disable_info_portion("pda_dont_work")
		ui_script_hud.break_hud(false)
	end
end

--' спавним скелета у монолита
function spawn_skelel_monolit()
	AI:create_free("scelet_strong",vector():set(41.192,57.215,33.114),6321,2417)
end

--' спавним детектор изоморфов
function spawn_detek_izo()
	AI:create_free("detektor_amorf",vector():set(68.187,14.302,178.736),56983,3020)
end

--' удаляем первого Призрака с генераторов
function delete_gen_prizrak()
	local se_obj = AI:object("generators_prizrak")
	if se_obj then AI:release(se_obj, true) end
end


--' спавним блокнот Странника
function spawn_blokn_strann()
	AI:create_free("strannik_bloknot",vector():set(68.187,14.302,178.736),56983,3020)
end

--' спавним портал в бункере
function spawn_portal_control()
	AI:create_free("imitator_shar",vector():set(-42.175,-34.479,21.473),54,2509)
	AI:create_free("imitator_tele_final1",vector():set(-42.175,-34.479,21.473),54,2509)
	AI:create_free("anomal_pole",vector():set(-42.175,-34.479,21.473),54,2509)
	AI:create_free("imitator_snezka",vector():set(-42.175,-34.479,21.473),54,2509)
end

--' заспавним немного артов в бункере монолита
function spawn_control_monolit_art()
	AI:create_free("af_spirit_1",vector():set(36.298,-34.483,2.596),3835,2480)
	AI:create_free("af_fireball",vector():set(32.212,-34.481,12.353),3639,2515)
	AI:create_free("af_cristall",vector():set(19.893,-34.494,13.927),3067,2514)
	AI:create_free("af_armor_2",vector():set(36.546,-34.482,14.138),3837,2480)
end

--' парочка бюреров в бункере монолита
function control_monolit_burer()
	AI:create_free("burer_strong",vector():set(17.438,-34.483,13.185),2913,2514)
	AI:create_free("m_poltergeist_dd",vector():set(36.405,-34.483,13.768),3837,2480)
	AI:create_free("m_controller_act",vector():set(36.405,-34.483,13.768),3837,2480)
end

--' спавним псевдышей в Лиме
function spawn_lima_psevdushi()
	AI:create_free("gigant_strong",vector():set(67.401,3.297,285.837),57187,3022)
	AI:create_free("gigant_big_strong",vector():set(57.739,3.310,268.578),54208,3022)
	AI:create_free("gigant_red_strong",vector():set(97.760,2.900,262.609),60715,3022)
end

--' спавним изоморфные патроны в Лиме
function spawn_izo_pistonu()
	AI:create_free("ammo_5.45x39_izomorf",vector():set(93.017,7.342,244.933),60324,3021)
	AI:create_free("ammo_5.45x39_izomorf",vector():set(93.017,7.342,244.933),60324,3021)
	AI:create_free("ammo_5.45x39_izomorf",vector():set(93.017,7.342,244.933),60324,3021)
	arhara_dialog.after_semetskiy_sms()
end

--' спавним фоторужьё в Саркофаге
function spawn_fotoruzhy()
	AI:create_free("wpn_svd_foto",vector():set(-21.648,69.634,-31.996),598,2417)
	AI:create_free("anomal_pole_foto",vector():set(-21.546,69.630,-31.632),598,2417)
	AI:create_free("bloknot_neizvestnogo",vector():set(-21.546,69.630,-31.632),598,2417)
end

--' спавним фотографию в Саркофаге
function spawn_fotografiy_mono()
	AI:create_free("foto_monolit",vector():set(-21.153,69.636,-30.882),598,2417)
end

--' удаляем рестрикторы провала на задание с фото в Саркофаге
function del_proval_foto_restr()
	local se_obj = AI:story_object(story_ids.odnonogiy_proval_restrictor)
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:story_object(story_ids.odnonogiy1_proval1_restrictor)
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:story_object(story_ids.nevid_monolit)
	if se_obj then AI:release(se_obj, true) end
end

--' заспавним имитатор фотоперехода
function spawn_imit_tele_foto()
	AI:create_free("imitator_tele_final1",vector():set(-21.340,69.629,-31.520),598,2417)
	local obj = snp.object_by_section_offline("anomal_pole_foto")
	if obj then AI:release(obj, true) end
end

--' проверяет наличие фотки
function odnonogiy_foto_have() 
	return inventory.search("foto_monolit",1) ~= false
end

--' проверяет наличие псевдофотки
function psewdofoto_est() 
	return inventory.search("psewdofoto",1) ~= false
end

--' проверим отсутствие псевдофотки
function psewdofoto_net()
	return inventory.search("psewdofoto",1) ~= true
end

--' отдадим псевдофото одноногому
function otdal_psewdofoto(first_speaker, second_speaker)
	inventory.out_items("psewdofoto",1)
end

--' заберём детектор изоморфов
function take_izo_detektor(first_speaker, second_speaker)
	inventory.give_items("detektor_amorf", 1)
end

function metka_semetskiy()
	local obj = AI:object("stalk_semetskiy")
	if obj then level.map_add_object_spot(obj.id, "blue_location", "semetskiy_name") end
end

--' отдадим фото Монолита Пилигриму
function otdal_foto_pili(first_speaker, second_speaker)
	inventory.out_items("foto_monolit",1)
end

--' заберём псевдофото у Пили
function take_psewdofoto_pili(first_speaker, second_speaker)
	inventory.give_items("psewdofoto", 1)
end

function spawn_bunker_sekret()
	AI:create_free("mulyz_bomba",vector():set(8.089,-23.447,14.072),7800,2773)
	AI:create_free("mulyz_bomba",vector():set(7.608,-23.439,13.871),7695,2773)
	AI:create_free("osnova_fotik",vector():set(7.210,-23.435,14.039),7695,2773)
	AI:create_free("neizv_zapiska",vector():set(6.511,-23.436,14.206),7431,2773)
end

--' удаляем рестриктор оживления радиста
function del_ozh_radista_restr()
	local se_obj = AI:story_object(story_ids.ozhivil_radista_restrictor)
	if se_obj then AI:release(se_obj, true) end
end

--' удаляем 2рестриктор оживления радиста
function del2_ozh2_radista2_restr2()
	local se_obj = AI:story_object(story_ids.ozhivil2_radista2_restrictor)
	if se_obj then AI:release(se_obj, true) end
end

--' кровосос в детском садике
function spawn_sos_sadik()
	AI:create_free("bloodsucker_strong",vector():set(136.796,3.935,-25.153),237691,2242)
end

--' глобус в детском садике и рюкзачок
function spawn_globus_sadik()
	AI:create_free("izom_globus",vector():set(132.621,3.935,-52.783),235074,2245)
	AI:create_free("linza_fotik",vector():set(137.245,3.980,-51.995),238095,2245)
	AI:create_free("m_inventory_box34", vector():set(134.43992614746,3.9388103485107,-54.601131439209),236350,2245)
end

--' псевдыш после детс. садика
function spawn_gig_sadik()
	AI:create_free("gigant_strong",vector():set(63.161,-2.391,-66.476),174678,2137)
end

--' убираем Клыка и радиста из бункера
function delete_kluk_and_radist()
	local se_obj = AI:object("stalk_radist")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("bunker_kluk")
	if se_obj then AI:release(se_obj, true) end
end

--' убираем Клыка и радиста из Припяти
function delete_kluk_and_radist_pryp()
	local se_obj = AI:object("radist_after")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("pripyt_kluk")
	if se_obj then AI:release(se_obj, true) end
end

--' убираем forest_lastday_snip1
function dell_forest_last_snip()
	local se_obj = AI:object("forest_lastday_snip1")
	if se_obj then AI:release(se_obj, true) end
end

--' проверим наличие частей фотика
function zapchasti_fotik_ok() 
	return inventory.search("osnova_fotik",1) ~= false and
		inventory.search("linza_fotik",1) ~= false and
		inventory.search("pushka_fotik",1) ~= false
end

--' отдадим запчасти фотика леснику
function zapchasti_fotik_otdal(first_speaker, second_speaker)
	inventory.out_items("osnova_fotik",1)
	inventory.out_items("linza_fotik",1)
	inventory.out_items("pushka_fotik",1)
end

--' Леcник дал фотопистолет
function fotopistolet_have(first_speaker, second_speaker)
	inventory.give_items("wpn_eagle_m3", 1)
end

--' проверим наличие финансов за снайпера
function lesnik_have_money_50000(actor,npc)
    return actor:money() > 50000
end

--' отдадим деньги Леснику
function lesnik_give_money_50000(t1,t2)
	local npc = t1:id()==0 and t2 or t1
	dialogs.relocate_money(npc,50000,"out")
end

--' спавним фотик у Лесника
function spawn_pushka_fot()
	AI:create_free("pushka_fotik",vector():set(29.470,4.654,25.713),83046,3263)
end

--' izomorf_kristal в лесу
function spawn_izomorf_krist()
	AI:create_free("izomorf_kristal",vector():set(219.859,-7.329,-94.606),139437,3315)
	AI:create_free("imitator",vector():set(220.545,-11.254,-101.263),139769,3315)
	AI:create_free("anomal_pole",vector():set(220.545,-11.254,-101.263),139769,3315)
	AI:create_free("imitator_snezka",vector():set(220.545,-11.254,-101.263),139769,3315)
	AI:create_free("imitator_holodez",vector():set(220.545,-11.254,-101.263),139769,3315)
end

--' заспавним собачек в кр лесу
function spawn_dog_to_red_forest()
	AI:create_free("pseudodog_normal",vector():set(198.575,5.418,118.760),129451,3319)
	AI:create_free("pseudodog_big",vector():set(198.575,5.418,118.760),129451,3319)
	AI:create_free("dog_strong",vector():set(198.575,5.418,118.760),129451,3319)
	AI:create_free("dog_habaruch",vector():set(198.575,5.418,118.760),129451,3319)
	AI:create_free("dog_habaruch",vector():set(198.575,5.418,118.760),129451,3319)
	AI:create_free("dog_habaruch",vector():set(198.575,5.418,118.760),129451,3319)
	AI:create_free("dog_normal",vector():set(198.575,5.418,118.760),129451,3319)
	AI:create_free("dog_weak",vector():set(198.575,5.418,118.760),129451,3319)
end

--' заспавним мины в кр лесу
function spawn_mina_forest()
	AI:create_free("bomba_mina_b",vector():set(200.102,4.937,117.763),130200,3319)
	AI:create_free("bomba_mina_n",vector():set(202.781,4.677,117.218),131707,3319)
end

--' проверим наличие мнимого фотопистолета
function fotopushka_est()
	return inventory.search("wpn_eagle_m3",1) ~= false
end

--' отдадим фотик Клёнову на модернизацию
function modernizasiy_fotik(first_speaker, second_speaker)
	inventory.out_items("wpn_eagle_m3",1)
end

--' Клёнов дал рабочий заряженный фотик и спавн кактуса
function fotopatronu_dal(first_speaker, second_speaker)
	inventory.give_items("wpn_eagle_m2", 1)
	AI:create_free("kaktus_izomorf",vector():set(14.118,-0.538,23.657),6732,3215)
end

--' получим фотку мозга
function fotka_mozga_have(first_speaker, second_speaker)
	if not has_alife_info("fotka_mozga_have") then
		inventory.give_items("foto_mozg_x16", 1)
		arhara_dialog.foto_mozg_ok_sms()
		Actor:give_info_portion("fotka_mozga_have")
	end
end

--' ГГ друг зомбарей
function drug_psss(actor, npc)
	Actor:set_character_community("stranger", 0, 0)
	relation_registry.set_community_goodwill ("zombied", 0, 1000)
end

--' ГГ враг зомбарей
function vrag_zombie(actor, npc)
	Actor:set_character_community("actor", 0, 0)
	relation_registry.set_community_goodwill ("zombied", 0, -5000)
end

--' убираем foto_monolitovets
function dell_foto_monolitovets()
	local se_obj = AI:object("foto_monolitovets")
	if se_obj then AI:release(se_obj, true) end
end

--' спавн живности в х16
function spawn_zivnost_x16()
	AI:create_free("m_poltergeist_dd",vector():set(-108.872,21.564,-23.246),266,1529)
	AI:create_free("snork_stronger",vector():set(-108.872,21.564,-23.246),266,1529)
	AI:create_free("zombie_immortal",vector():set(-115.406,21.564,-22.614),202,1529)
	AI:create_free("electro_polter",vector():set(-115.406,21.564,-22.614),202,1529)
	AI:create_free("m_controller_act",vector():set(-115.406,21.564,-22.614),202,1529)
	AI:create_free("zombie_beee",vector():set(-114.772,21.563,-37.471),223,1529)
	AI:create_free("zombie_hell",vector():set(-114.772,21.563,-37.471),223,1529)
	AI:create_free("zombie_blow",vector():set(-114.772,21.563,-37.471),223,1529)
	AI:create_free("snork_stronger",vector():set(-109.016,21.564,-37.757),295,1529)
	AI:create_free("burer_strong",vector():set(-106.343,21.782,-24.075),358,1529)
end

--' ЭХ в х16
function spawn_himera_x16()
	AI:create_free("electro_chimera",vector():set(-124.463,18.768,-21.276),84,1529)
	AI:create_free("scelet_strong",vector():set(-223.302,-18.648,-43.821),308,1458)
end

--' получим фотку аномального контрика
function fotka_kont_yazva_have(actor, npc)
	if not has_alife_info("fotka_kont_yazva_have") then
		inventory.give_items("foto_kontroller_yazva", 1)
		arhara_dialog.foto_mozg_ok_sms()
		Actor:give_info_portion("fotka_kont_yazva_have")
	end
end

--' проверим наличие фоток
function izomorf_dialog_have()
	return inventory.search("foto_kontroller_yazva",1) ~= false and
		inventory.search("foto_mozg_x16",1) ~= false
end

--' проверим наличие 1фотоки контрика
function odna_fotka_kontrika()
return inventory.search("foto_kontroller_yazva",1) ~= false
end

--' проверим наличие 1фотоки мозга
function odna_fotka_mozga()
return inventory.search("foto_mozg_x16",1) ~= false
end

--' проверим отсутствие фотопистолета
function fotopushka_istin_net()
return inventory.search("wpn_eagle_m2",1) ~= true
  end

--' проверим отсутствие фоток
function fotok_net_voobsche()
	return inventory.search("foto_kontroller_yazva",1) ~= true and
		inventory.search("foto_mozg_x16",1) ~= true
end

--' проверим отсутствие фотки контрика
function fotki_net_kontrollera()
	return inventory.search("foto_kontroller_yazva",1) ~= true
end

--' проверим отсутствие фотки мозга
function fotki_net_mozga()
	return inventory.search("foto_mozg_x16",1) ~= true
end

--' проверим отсутствие финансов
function net_pyati_shtuk(actor,npc)
    return actor:money() < 50000  
end

--' проверим наличие фотопистолета
function fotopushka_istinnay()
	return inventory.search("wpn_eagle_m2",1) ~= false
end

--' отдадим фотик Клёнову 
function otdadim_fotik(first_speaker, second_speaker)
	inventory.out_items("wpn_eagle_m2",1)
end

--' отдадим фотки Клёнову 
function otdal_fotki_vse(first_speaker, second_speaker)
	inventory.out_items("foto_kontroller_yazva",1)
	inventory.out_items("foto_mozg_x16",1)
end

--' отдадим фотку мозга Клёнову 
function otdal_fotku_mozga(first_speaker, second_speaker)
	inventory.out_items("foto_mozg_x16",1)
end

--' отдадим фотку контрика Клёнову 
function otdal_fotku_kontroller(first_speaker, second_speaker)
	inventory.out_items("foto_kontroller_yazva",1)
end

--' Клёнов дал изоморфные патроны
function klen_dal_pistonu(first_speaker, second_speaker)
	inventory.give_items("ammo_5.45x39_izomorf", 1)
	inventory.give_items("ammo_9x39_izomorf", 1)
	inventory.give_items("ammo_7.62x54_izomorf", 1)
	inventory.give_items("ammo_zhekan_izomorf", 1)
end

--' спавн антизомбина на Янтаре
function spawn_antizombin_yntar()
	AI:create_free("antizombie",vector():set(111.220,-8.769,-204.768),99041,1472)
	AI:create_free("antizombie",vector():set(111.194,-8.725,-204.325),99042,1472)
	AI:create_free("antizombie",vector():set(108.190,-8.870,-209.405),97185,1472)
end

--' проверим наличие антизомбина для Черномора
function antizombin_est()
	return inventory.search("antizombie",2) ~= false
end

--' отдадим антизомбин
function antiz_otdal()
	inventory.out_items("antizombie",2)
end

--' убираем Черномора-зомби
function dell_chernomor_zombi()
	local se_obj = AI:story_object(story_ids.chernomor_zombi)
	if se_obj then AI:release(se_obj, true) end
end
-- переспавним глючного Черномора-зомби
function respawn_chernomor()
	local obj = AI:story_object(story_ids.chernomor_zombi)
	if obj then return end
	obj = AI:object("chernomor_zombi")
	if obj then AI:release(obj, true) end
	AI:create(AI:spawn_id(9626))
end

--' изоморфы Черномора
function spawn_izomorfy_chernom()
	AI:create_free("ammo_7.62x54_izomorf",vector():set(-1.365,20.731,-10.072),38622,1525)
	AI:create_free("ammo_7.62x54_izomorf",vector():set(-1.365,20.731,-10.072),38622,1525)
	AI:create_free("ammo_7.62x54_izomorf",vector():set(-1.957,20.731,-9.989),38268,1525)
	AI:create_free("ammo_7.62x54_izomorf",vector():set(-1.957,20.731,-9.989),38268,1525)
	AI:create_free("7.62x54_izomorf",vector():set(-1.365,20.731,-10.072),38622,1525)
	AI:create_free("7.62x54_izomorf",vector():set(-1.957,20.731,-9.989),38268,1525)
	AI:create_free("wa2000_izomorf",vector():set(-1.906,20.731,-8.694),38991,1525)
end

--' заспавним сумку проверяющего
function spawn_chem_piyan()
	AI:create_free("chemodan_piyan",vector():set(-182.451,1.144,-305.586),53747,689)
end

--' проверим наличие 10 пузырей
function vodka_desyat_est()
	return inventory.search("vodka",10) ~= false
end

--' отдадим пузыри часовому
function vodka_desyat_otdal()
	inventory.out_items("vodka",10)
end

--' проверим наличие водки
function pollitra_est()
	return inventory.search("vodka",1) ~= false
end

--' проверим отсутствие водяры
function pollitra_net()
	return inventory.search("vodka",1) ~= true
end

--' отдадим водку пьяному кепу
function otdal_odnu_vodku(first_speaker, second_speaker)
	inventory.out_items("vodka",1)
end

--' убираем трезвого кепа
function dell_trezv_kapit()
	local se_obj = AI:object("trezv_kapitan")
	if se_obj then AI:release(se_obj, true) end
end

--' Кузя дал 5 бутылок
function vodka_kuzy_dal(first_speaker, second_speaker)
	inventory.give_items("vodka", 5)
	if Actor:has_info("dan_grab_start")
		and Actor:dont_has_info("dan_grab_done")
	then
		naxac.voyaki_arhara_friends()
	end
end

--' проверим наличие чумодана для кузи
function kuzy_artmodifikator_have()
	return inventory.search("chemodan_piyan",1) ~= false
end

--' проверим отсутствие чумодана для кузи
function kuzy_artmodifik_net()
	return inventory.search("chemodan_piyan",1) ~= true
end

--' отдадим кейс кузнецову
function otdal_chumodaniscte(first_speaker, second_speaker)
	inventory.out_items("chemodan_piyan",1)
end

--' Кузя дал артмодификатор
function devays_kuzy_dal(first_speaker, second_speaker)
	inventory.give_items("amk_transmutator", 1)
end

--' проверим наличие 25 пузырей водки
function pollitra_dvadtsatpyat()
	return inventory.search("vodka",25) ~= false
end

--' отдадим 25 пузырей водки кузнецову
function otdal_dvadtsatpyat(first_speaker, second_speaker)
	inventory.out_items("vodka",25)
end

--' проверим наличие 40 пузырей водки
function pollitra_sorok()
	return inventory.search("vodka",40) ~= false
end

--' отдадим 40 пузырей водки кузнецову
function otdal_sorok(first_speaker, second_speaker)
	inventory.out_items("vodka",40)
end

--' убирём с Агры пьяный мусор
function delete_agro_musor()
	local se_obj = AI:object("agro_chsovoy_trezv")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("agro_piyn_soldier1")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("agro_piyn_soldier2")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("piyan_psevdovodka")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("piyan_psevdovodka1")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("piyan_psevdokolbasa")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("piyan_psevdoconserva")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("piyan_kapitan")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("piyan_psevdokalash")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("piyan_psevdoabakan")
	if se_obj then AI:release(se_obj, true) end
end

--' мины для Пантеры на Кордоне
function spawn_bomba_i_mina()
	-- спавним мину
	local obj = AI:create_free("bomba_mina_b_pantera",vector():set(-227.875,-28.802,-222.302),26467,40)
	set_story_id(obj, story_ids.esc_mina_panera)
	-- спавним невидимую бомбу
	obj = AI:create_free("explosive_bomba_pantera",vector():set(-228.545,-28.910,-223.067),26466,40)
	netpk:modify(obj, {visual_name = "physics\\equipment_cache\\equipment_rucksack_01_case"}, netpk.fState)
	-- удаляем нахрен не нужный ящик с динамитом
	obj = AI:story_object(story_ids.esc_dinamit_panera)
	if obj then AI:release(obj, true) end
end

--' убираем Пантеру с Кордона
function dell_esc_pantera()
	local se_obj = AI:story_object(story_ids.esc_pantera_bomba)
	if se_obj then AI:release(se_obj, true) end
end

function sound_deaf_pantera()
	local snd_obj = xr_sound.get_safe_sound_object([[characters_voice\scenario\arhara_kordon\po_snegu]])
	snd_obj:play_no_feedback(Actor, sound_object.s2d, 0, vector(), 1.0)
end

function proba_posulki()
	AI:create_free("af_drops",vector():set(-255.655,-23.377,-134.334),7894,5)
	AI:create_free("klenov_opisalovo",vector():set(-255.655,-23.377,-134.334),7894,5)
end

function posulka_nomer_dva()
	AI:create_free("wpn_eagle_m2",vector():set(-255.655,-23.377,-134.334),7894,5)
end

function sp_ploti_svalka()
	local obj = AI:create_free("flesh_strong",vector():set(-236.463,-1.910,171.242),13329,343)
	obj = AI:object(obj.id)
	local items = {"wpn_desert_eagle","pisma_stalka","ammo_11.43x23_hydro"}
	for i, v in ipairs(items) do
		AI:create(v, obj.position, obj.m_level_vertex_id, obj.m_game_vertex_id, obj.id)
	end
	AI:create_free("flesh_strong",vector():set(-236.463,-1.910,171.242),13329,343)
	AI:create_free("flesh_normal",vector():set(273.645,1.435,147.333),378180,257)
	AI:create_free("flesh_normal",vector():set(273.645,1.435,147.333),378180,257)
	AI:create_free("flesh_strong",vector():set(273.645,1.435,147.333),378180,257)
	AI:create_free("flesh_strong",vector():set(210.098,0.399,-137.657),349493,401)
	AI:create_free("flesh_strong",vector():set(-78.291,-3.818,197.277),127104,351)
	AI:create_free("flesh_normal",vector():set(-78.291,-3.818,197.277),127104,351)
	AI:create_free("flesh_normal",vector():set(-78.291,-3.818,197.277),127104,351)
end

--' убираем Пантеру с отцом из Госпиталя
function dell_gospital_pantera2()
local se_obj = AI:object("hos_father_new")
  if se_obj then
    AI:release(se_obj, true)
  end
local se_obj = AI:object("hos_new_panterka")
  if se_obj then
    AI:release(se_obj, true)
  end
end

--' проверим наличие вещей сталкера
function plot_dialog_say_have()
	return inventory.search("pisma_stalka",1) ~= false and
		inventory.search("wpn_desert_eagle",1) ~= false
end

--' отдадим вещи сталкера
function otdal_veschi(first_speaker, second_speaker)
	local npc = first_speaker:id() == 0 and second_speaker or first_speaker
	local obj = Actor:object("wpn_desert_eagle")
	if obj then
		Actor:transfer_item(obj, npc)
		news_manager.relocate_item("out", "wpn_desert_eagle")
	end
	inventory.out_items("wpn_desert_eagle",1)
	inventory.out_items("pisma_stalka",1)
	AI:create_free("m_inventory_box35", vector():set(52.520462036133,-0.035371631383896,-295.6975402832),221820,253)
end

--' убираем запасного фото с кордона
function dell_zapasnoy_foto_muz()
local se_obj = AI:object("zapasnoy_foto_muzhik")
  if se_obj then
    AI:release(se_obj, true)
  end
end

--' убираем основного фото с кордона
function dell_esc_foto_muzhik()
local se_obj = AI:object("esc_foto_muzhik")
  if se_obj then
    AI:release(se_obj, true)
  end
end

--' Тушканы для шухера
function suher_tushk()
	AI:create_free("tushkano_normal",vector():set(-215.511,-19.960,-141.083),37916,61)
	AI:create_free("tushkano_strong",vector():set(-215.511,-19.960,-141.083),37916,61)
end

--' получим фотку убийцы с Кордона
function fotka_ubiysu_ok(first_speaker, second_speaker)
	inventory.give_items("shuher", 1)
end

--' получим фотку лагеря новисов от Черномора
function fotka_kordon_dal(first_speaker, second_speaker)
	inventory.give_items("foto_kordon", 1)
end

--' проверим наличие фотки убийцы с Кордона
function fotka_ubiysu_esc_est()
return inventory.search("shuher",1) ~= false
  end

--' отдадим фотку убийцы отцу
function otdal_kartinku(first_speaker, second_speaker)
inventory.out_items("shuher",1)
 end

--' убираем одноногого с Генераторов
function dell_odnonogiy()
local se_obj = AI:object("odnonogiy_stalk")
  if se_obj then
    AI:release(se_obj, true)
  end
end

--' получим фотку убийцы с Милилитари
function fotka_kisluy_ok(first_speaker, second_speaker)
	inventory.give_items("kisluy", 1)
end

--' убираем military_fotomuzhik
function dell_milit_fotomuzhik()
local se_obj = AI:object("military_fotomuzhik")
  if se_obj then
    AI:release(se_obj, true)
  end
end

--' убираем military_fotomuzhik запас
function dell_milit_zapas_fotomuz()
local se_obj = AI:object("milit_zapas_fotomuzhik")
  if se_obj then
    AI:release(se_obj, true)
  end
end

--' Тушканы для Кислого
function militar_tushk()
	AI:create_free("tushkano_normal",vector():set(-51.788,-10.182,21.075),257887,1607)
	AI:create_free("tushkano_strong",vector():set(-51.788,-10.182,21.075),257887,1607)
end

--' убираем Шухера с кордона
function dell_stalk_shuher()
local se_obj = AI:object("esc_stalk_shuher")
  if se_obj then
    AI:release(se_obj, true)
  end
end

--' проверим наличие фотки убийцы с Милитари
function fotka_kisluy_est()
return inventory.search("kisluy",1) ~= false
  end

--' отдадим фотку Кислому
function vernul_kartinku(first_speaker, second_speaker)
inventory.out_items("kisluy",1)
 end

--' рюкзак Злобного
function rukzak_zlobnogo()
	AI:create_free("m_inventory_box36", vector():set(-170.294,3.940,-148.568),66879,559)
	arhara_dialog.sms_taynik_zlobnuy()
end

--' убираем Злобного с Авера
function dell_aver_zlobn()
	local se_obj = AI:object("aver_zlobnuy")
	if se_obj then
		AI:release(se_obj, true)
	end
end

--' удаляем рестриктор стрелки на авере
function del_strelka_mesto_restr()
end

--' удаляем рестриктор радиуса провала стрелки на авере
function del_strelka_radius_restr()
	local se_obj = AI:story_object(story_ids.strelka_radius_space_restrictor)
	if se_obj then
		AI:release(se_obj)
	end
end

--' проверим наличие фотки жены Сахара
function fotka_zhena_ok()
	return inventory.search("zhena_sahara",1) ~= false
end

--' отдадим фотку Сахару
function fotka_zhena_vernul(first_speaker, second_speaker)
	inventory.out_items("zhena_sahara",1)
end

--' убираем одноногого с Авера
function dell_aver_odnon()
	local se_obj = AI:object("aver_odnonogiy")
	if se_obj then
		AI:release(se_obj, true)
	end
end

--' убираем телепорт
function delete_saxar_perex()
	local se_obj = AI:story_object(story_ids.m_teleport_nad_mozgom)
	if se_obj then
		AI:release(se_obj, true)
	end
end

--' проверим наличие пластилина
function plastilin_est()
	return inventory.search("izomorf_plastilin",1) ~= false
end

--' убираем Молнию 
function dell_molniy()
	local se_obj = AI:object("molniy")
	if se_obj then
		AI:release(se_obj, true)
	end
end

--' камушки над мозгом
function plastil_spawn()
	AI:create_free("preplastilin",vector():set(-46.617,27.133,-11.055),7244,1543)
	AI:create_free("preplastilin",vector():set(-45.184,27.134,-14.642),7099,1543)
--	AI:create_free("preplastilin",vector():set(-44.196,27.134,-9.118),7244,1543)
--	AI:create_free("preplastilin",vector():set(-44.837,18.978,-12.184),2892,1530)
	AI:create_free("nauch_recomend",vector():set(-43.801,27.133,-10.206),7244,1543)
end

--' заспавним имитатор отхода Молнии
function sp_imit_tele_molniy()
	AI:create_free("imitator_tele_final1",vector():set(-42.458,-34.478,21.222),30,2509)
end

--' заспавним поле перехода в подвале Лимы
function spawn_pole_lima(first_speaker, second_speaker)
	AI:create_free("anomal_pole",vector():set(-52.082,-10.597,-182.625),2891,2993)
end

--' заспавним поле ключа в подвале Лимы
function spawn_pole_kluch(first_speaker, second_speaker)
	AI:create_free("anomal_pole",vector():set(-51.768,-11.915,-170.309),2891,2993)
end

--' убираем блок-телепорт и рестриктор ключа в подвале Лимы
function delete_blok_and_restr()
	local se_obj = AI:story_object(story_ids.m_teleport_blok_ruchag)
	if se_obj then
		AI:release(se_obj)
		news_manager.send_tip("delete_blok_and_restr", nil, nil, 25000)
	end
end

--' убираем teleport_podval_ok_restrictor
function tele_podval_ok()
	local se_obj = AI:story_object(story_ids.teleport_podval_ok_restrictor)
	if se_obj then
		AI:release(se_obj, true)
	end
end

--' защитые мины подвала
function spawn_mina_lima()
	AI:create_free("bomba_mina_b",vector():set(-51.878,-9.562,-148.368),2891,2993)
	AI:create_free("bomba_mina_b",vector():set(-49.234,-8.562,-148.500),3051,2993)
	AI:create_free("bomba_mina_b",vector():set(-46.192,-7.561,-149.072),3051,2993)
	AI:create_free("bomba_mina_b",vector():set(-46.205,-6.353,-153.23),3051,2993)
	AI:create_free("imitator_holodez",vector():set(-56.837,-11.236,-164.933),2375,2993)
	AI:create_free("imitator_holodez",vector():set(-46.999,-11.197,-165.889),3051,2993)
end

--' выстрел снайпера в красном лесу
function last_snip_zvuk(sound_name)
	local snd_obj = xr_sound.get_safe_sound_object([[weapons\svd\svd_shoot]])
	snd_obj:play_no_feedback(Actor, sound_object.s2d, 0, vector(), 1.0)
end

--' удаляем forest_last_snip_proval_restrictor
function del_last_snip_prov_restr()
	local se_obj = AI:story_object(story_ids.forest_last_snip_proval_restrictor)
	if se_obj then
		AI:release(se_obj)
	end
end

--' удаляем red_dolbannay_doska
function del_dolbannay_doska()
	local se_obj = AI:story_object(story_ids.red_dolbannay_doska)
	if se_obj then
		AI:release(se_obj)
	end
end

--' превращение Черномора
function chernom_zvuk(sound_name)
	local snd_obj = xr_sound.get_safe_sound_object([[monsters\zombie\zombie_die_0]])
	snd_obj:play_no_feedback(Actor, sound_object.s2d, 0, vector(), 1.0)
end

--' сначала убьём, потом удалим - иначе - вылет
function kill_fotosvobodovets(storyid)
	local obj = level_object_by_sid(story_ids.military_fotomuzhik)
	if obj and IAmAStalker[obj:clsid()] and obj:alive() then
		obj:kill(obj)
		return true
	else
		return false
	end
end
function kill_zapas_fotosvobodovets(storyid)
	local obj = level_object_by_sid(story_ids.milit_zapas_fotomuzhik)
	if obj and IAmAStalker[obj:clsid()] and obj:alive() then
		obj:kill(obj)
		return true
	else
		return false
	end
end

--' сначала убьём, потом удалим - иначе - вылет
function kill_escfoto(storyid)
	local obj = level_object_by_sid(story_ids.esc_foto_muzhik)
	if obj and IAmAStalker[obj:clsid()] and obj:alive() then
		obj:kill(obj)
		return true
	else
		return false
	end
end
function kill_escfoto_zapas(storyid)
	local obj = level_object_by_sid(story_ids.zapasnoy_foto_muzhik)
	if obj and IAmAStalker[obj:clsid()] and obj:alive() then
		obj:kill(obj)
		return true
	else
		return false
	end
end

function zaschita_minka()
	AI:create_free("bomba_mina_n",vector():set(-45.093,-7.057,32.530),265252,1607)
end

--' рюкзачок с арбалетом Нормана на чердаке
function yzik_norman_spawn()
	AI:create_free("m_inventory_box37", vector():set(-129.12908935547,19.055564880371,83.090309143066),223303,3609)
end

function metka_city_parfumer()
	local obj = AI:object("dcity_parfumer") 
	if obj then
		amk.add_spot_on_map(obj.id,"crlc_big","Примерное местонахождение сталкера")
	end
end

function remove_parfumer_metka()
	local obj = AI:object("dcity_parfumer")
	if obj then
		level.map_remove_object_spot(obj.id,"crlc_big")
	end
end
function remake_dcity_shuher()
	arhara_dialog.remove_parfumer_metka()
	start_real_timer("run", 10, "arhara_dialog.dcity_duda_zvonok_sms1()")
end

function metka_city_starshoy()
	local obj = AI:object("city_starshoy") 
	if obj then
		amk.add_spot_on_map(obj.id,"crlc_big","Примерное местонахождение сталкера")
	end
end

function remove_city_starshoy_metka()
	local obj = AI:object("city_starshoy")
	if obj then
		level.map_remove_object_spot(obj.id,"crlc_big")
	end
end
function metka_tema_likvidator()
	local obj = AI:object("city_tema_likvidator") 
	if obj then
		amk.add_spot_on_map(obj.id,"crlc_big","Примерное местонахождение сталкеров")
	end
end
function remove_tema_likvidator_metka()
	local obj = AI:object("city_tema_likvidator")
	if obj then
		level.map_remove_object_spot(obj.id,"crlc_big")
	end
end
-- Выдадим ГГ покоцаный ствол, раз у него ничего больше нет
function marader_weapon()
	news_manager.relocate_item("in", "wpn_toz34_short")
	inventory.give_items("ammo_12x70_buck")
	local se_obj = amk.spawn_item_in_inv("wpn_toz34_short")
	level.client_spawn_manager():add( se_obj.id, 0, 
		function (cond, id, obj)
			obj:set_condition(cond)
		end,
	0.91-0.12*level.get_game_difficulty() )
end

function actor_has_weapon()
	local res = false
	Actor:iterate_inventory(function(actor, item)
		if (not res) and isMagazinedWeapon(item) then
			res = true
		end
	end,
	Actor)
	return res
end
function actor_dont_has_weapon()
	return not actor_has_weapon()
end

function metka_norman()
	local obj = AI:object("dcity_kontr_last2") 
	if obj then
		amk.add_spot_on_map(obj.id,"crlc_big","Примерное месторасположение Тёмного хутора")
	end
end
function remove_norman_metka()
	local obj = AI:object("dcity_kontr_last2")
	if obj then
		level.map_remove_object_spot(obj.id,"crlc_big")
	end
end

--' удаляем зону защиты бандитов
function del_zona_bandosu()
	local se_obj = AI:story_object(story_ids.dcity_bandosu_doza_timer_restrictor)
	if se_obj then
		AI:release(se_obj)
	end
end

--' проверим наличие нужных предметов для Старшего
function starshoy_say_one_have() 
	return inventory.search("medkit",10) ~= false and
		inventory.search("wpn_ak74u",2) ~= false and
		inventory.search("vodka",5) ~= false and
		inventory.search_ammo("ammo_5.45x39_ap",150) ~= false and
		inventory.search("conserva",20) ~= false
end

--' отдадим всё Старшёму
function starshoy_say_one_done(first_speaker, second_speaker)
	inventory.out_items("medkit",10)
	inventory.out_items("wpn_ak74u",2)
	inventory.out_items("vodka",5)
	inventory.out_ammo("ammo_5.45x39_ap",150)
	inventory.out_items("conserva",20)
	arhara_dialog.parfum_sms_kontrik1()
end

--' заспавним монстриков в Тёмной деревне
function babki_spawn_dsity_hutor()
	AI:create_free("zombie_babka_normal",vector():set(-152.261,9.779,-165.322),185095,3606)
	AI:create_free("zombie_babka_strong",vector():set(-152.261,9.779,-165.322),185095,3606)
	AI:create_free("bloodsucker_strong",vector():set(-147.065,9.438,-160.811),190266,3606)
end

--' заспавним там же арты
function artu_spawn_dsity_hutor()
	AI:create_free("af_gravi",vector():set(-124.779,8.471,-166.461),215144,3614)
	AI:create_free("af_buliz",vector():set(-114.285,9.076,-173.302),224592,3614)
	AI:create_free("af_babka_1",vector():set(-146.363,9.210,-172.300),191016,3610)
end

--' получим фотку тайника от Нормана
function fotka_norman(first_speaker, second_speaker)
	inventory.give_items("taynik_mg", 1)
end

--' получим Позиционер от Нормана
function pozisioner_norman(first_speaker, second_speaker)
	inventory.give_items("stco", 1)
	arhara_dialog.sms_obmorok1()
end

--' убираем защиту центра МГ
function delete_zaschita_zenter_gorod()
	local sids = {
		story_ids.dcity_zenter_doza_timer_restrictor,
		story_ids.pomoshnik_timer_zenter_doza_restrictor,
		story_ids.dcity_zenter1_doza_timer_restrictor,
		story_ids.pomoshnik1_timer_zenter1_doza_restrictor,
		story_ids.dcity_zenter2_doza_timer_restrictor,
		story_ids.pomoshnik2_timer_zenter2_doza_restrictor,
		story_ids.dcity_zenter3_doza_timer_restrictor,
		story_ids.pomoshnik3_timer_zenter3_doza_restrictor,
		story_ids.dcity_zenter4_doza_timer_restrictor,
		story_ids.pomoshnik4_timer_zenter4_doza_restrictor
	}
	local se_obj
	for i, sid in ipairs(sids) do
		se_obj = AI:story_object(sid)
		if se_obj then AI:release(se_obj, true) end
	end
end

--' убираем 10 минутную защиту центра МГ
function del_zasch_zent_gorod()
	local se_obj = AI:story_object(story_ids.dcity_gorod1_doza1_timer_restrictor)
	if se_obj then
		AI:release(se_obj, true)
	end
	start_real_timer("run", 150, "arhara_dialog.agro_tainik_norman_sms()")
end

--' удаляем первичную зону защиты бандитов(Обморок)
function del_zona_gorod_obmorok()
	local se_obj = AI:story_object(story_ids.dcity_gorod_doza_timer_restrictor)
	if se_obj then
		AI:release(se_obj)
	end
end

--' удаляем зону защиты здания с Доком
function del_plendok_doza_timer()
	local se_obj = AI:story_object(story_ids.dcity_plendok_doza_timer_restrictor)
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:story_object(story_ids.pomoshnik_timer_plendok_doza_restrictor)
	if se_obj then AI:release(se_obj, true) end
	start_real_timer("run", 15, "arhara_dialog.dcity_iskra_zvonok_sms1()")
end

--' убирём Злобного с МГ
function delete_zlo_and_ko()
	local se_obj = AI:object("dead_city_zlobnuy")
	if se_obj then
		AI:release(se_obj, true)
	end
end

function kill_dsity_rasstrel1(storyid)
	local obj = level_object_by_sid(story_ids.dsity_rasstrel1)
	if obj and IAmAStalker[obj:clsid()] and obj:alive() then
		obj:kill(obj)
		return true
	else
		return false
	end
end

function kill_dsity_rasstrel2(storyid)
	local obj = level_object_by_sid(story_ids.dsity_rasstrel2)
	if obj and IAmAStalker[obj:clsid()] and obj:alive() then
		obj:kill(obj)
		return true
	else
		return false
	end
end

--' звук расстрела очередь
function rasstrel_zvuk_ochered(sound_name)
	local snd_obj = xr_sound.get_safe_sound_object([[weapons\ak47\kalash_ochered]])
	snd_obj:play_no_feedback(Actor, sound_object.s2d, 0, vector(), 1.0)
end

--' звук расстрела одиночка
function rasstrel_zvuk_odinochka(sound_name)
	local snd_obj = xr_sound.get_safe_sound_object([[weapons\ak47\kalash_odinoch]])
	snd_obj:play_no_feedback(Actor, sound_object.s2d, 0, vector(), 1.0)
end

--' удаляем скриптовый переход МГ-АТП
function del_perexodik()
	local se_obj = AI:story_object(story_ids.lc_dead_city_to_atp_timing)
	if se_obj then AI:release(se_obj) end
	obj = AI:story_object(story_ids.dcity_pobeg_timer)
	if obj then AI:release(obj, true) end
	arhara_dialog.sms_zlobnomu_rasstrel7()
	arhara_dialog.prip_dok_sak_dell()
end

--' спавним телепорт в тайник на Агре
function spawn_teleport_agro_norm_taynik()
    local se_obj = AI:create("m_teleport_agro_norm_taynik",vector():set(-39.155300140381,0.77279758453369,39.892715454102),203745,700)
	set_story_id(se_obj, story_ids.m_teleport_agro_norm_taynik)
	Actor:give_info_portion("agro_tainik_norman_start")
end

--' спавним блок включения переходов на агре
function spawn_mem_module()
	AI:create_free("mem_module",vector():set(-37.030,-3.887,46.352),203086,672)
end

--' портим отношения с вояками
function vrag_speznaza(actor, npc)
	relation_registry.set_community_goodwill ("military", Actor:id(), -1000)
end
--end

function spawn_babki_d_city()
	AI:create_free("zombie_babka_normal",vector():set(59.981,15.624,44.041),416820,3644)
	AI:create_free("zombie_babka_strong",vector():set(52.225,10.889,46.796),409618,3644)
	AI:create_free("zombie_immortal",vector():set(52.225,10.889,46.796),409618,3644)
	AI:create_free("zombie_babka_weak",vector():set(52.225,10.889,46.796),409618,3644)
	AI:create_free("kontroller_yazva",vector():set(53.321,15.624,45.421),410925,3644)
end

--' проверим наличие финансов для Дуды
function dengi_dude_est(actor,npc)
    return actor:money() > 500000
end

--' отдадим бабки
function otdal_dengi_dude(t1,t2)
	local npc=t1:id()==0 and t2 or t1
	dialogs.relocate_money(npc,500000,"out")
	arhara_dialog.nachalnik_zvonok_sms1()
end

--' убирём Дуду
function delete_duda()
	local se_obj = AI:object("last_dokplen_nachalnik")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("last_dokplen_ox_dok")
	if se_obj then AI:release(se_obj, true) end
end

--' проверим наличие маскировочной экзы
function dok_ekza_est()
	return meceniy_work.have_meceniy_outfit() and
		inventory.search("wpn_m16a2_sk12",1) ~= false
end

--' отдадим маскхалат и кольт доку
function otdadim_doku_exzu(first_speaker, second_speaker)
	meceniy_work.give_meceniy_outfit()
	inventory.out_items("wpn_m16a2_sk12",1)
end

--' убираем видимого Дока из МГ
function dell_dcity_dok_vidim()
	local se_obj = AI:object("dcity_dok_bolot")
	if se_obj then AI:release(se_obj, true) end
end

--' убираем невидимого Дока из МГ
function dell_dok_nevidim()
	local se_obj = AI:object("dcity_dok_nevidim")
	if se_obj then AI:release(se_obj, true) end
end

--' убираем дока Сак с Припяти 
function prip_dok_sak_dell()
	local se_obj = AI:story_object(story_ids.Doktor)
	if se_obj then AI:release(se_obj, true) end
end

--' Вступаем в стрейнджеры
function join_stranger (actor, npc)
--    printf ("ACTOR NOW IN stranger COMMUNITY")
	Actor:set_character_community ("stranger", 0, 0)
end

--' получим streyndzher
function take_streyndzher(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "streyndzher","in")
end

--' убираем streyndzher
function dell_streyndzher()
	inventory.out_items("streyndzher",1)
end

--' убираем Муху из госпиталя
function dell_muha_hosp_live()
	local se_obj = AI:object("muha_hosp_live")
	if se_obj then AI:release(se_obj, true) end
end

--' получим от Дока маскхалат обратно
function dok_vernul_mashalat(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "meceniy_outfit_new","in")
end

--' убираем Молнию из МГ
function dell_dcity_molniy()
	local se_obj = AI:object("dead_city_molniy")
	if se_obj then AI:release(se_obj, true) end
end

--' спавним записку Искры
function iskra_listok_spawn()
	AI:create_free("iskra_listok",vector():set(-109.715,3.154,37.802),231506,3622)
end

--' спавним телепорт в ливнёвку МГ
function spawn_tele_dcity_kanaliy()
    local se_obj = AI:create("m_teleport_dcity_kanaliy",vector():set(-89.229080200195,1.1233458518982,-27.065231323242),254634,3620)
	set_story_id(se_obj, story_ids.m_teleport_dcity_kanaliy)
end

function kanaliy_dinamit1 (actor, npc)
    local source = level_object_by_sid(story_ids.dcity_kanaliy_dinamit1)
    if source == nil then
        return
    end

    local h = hit ()
    h.power = 100
    h.direction = vector():set( 1, 0, 0 )
    h.impulse = 60
    h.draftsman = source
    h.type = hit.chemical_burn
    source:hit (h)
end

function kanaliy_dinamit2 (actor, npc)
    local source = level_object_by_sid(story_ids.dcity_kanaliy_dinamit2)
    if source == nil then
        return
    end

    local h = hit ()
    h.power = 200
    h.direction = vector():set( 1, 0, 0 )
    h.impulse = 60
    h.draftsman = source
    h.type = hit.chemical_burn
    source:hit (h)
end

function kanaliy_dinamit_nevid2 (actor, npc)
    local source = level_object_by_sid(story_ids.dcity_kanaliy_dinamit_nevid2)
    if source == nil then
        return
    end

    local h = hit ()
    h.power = 200
    h.direction = vector():set( 1, 0, 0 )
    h.impulse = 60
    h.draftsman = source
    h.type = hit.chemical_burn
--  h.type = hit.fire_wound
    source:hit (h)
end

function kanaliy_dinamit_nevid1 (actor, npc)
    local source = level_object_by_sid(story_ids.dcity_kanaliy_dinamit_nevid1)
    if source == nil then
        return
    end

    local h = hit ()
    h.power = 200
    h.direction = vector():set( 1, 0, 0 )
    h.impulse = 60
    h.draftsman = source
    h.type = hit.chemical_burn
--  h.type = hit.fire_wound
    source:hit (h)
end

function hit_dcity_imitator()
	local h = hit ()
	h.power = 1.5
	h.direction = vector_rotate_y(Actor:direction(), 90)
	h.impulse = 190
	h.draftsman = Actor
	h.type = hit.strike
	Actor:hit(h)
end

function imitator_gener_spavn()
	AI:create_free("imitator",vector():set(14.1453580856323,46.1324005126953,-174.886108398438),349707,3112)
	AI:create_free("imitator",vector():set(12.7922649383545,46.1104927062988,-175.030914306641),349707,3112)
	AI:create_free("imitator",vector():set(13.0828914642334,41.1308479309082,-178.822647094727),351371,3112)
	AI:create_free("imitator",vector():set(9.48082637786865,41.120964050293,-174.294830322266),347116,3112)
	AI:create_free("imitator",vector():set(14.1029558181763,41.1306571960449,-170.866104125977),352208,3112)
	AI:create_free("imitator",vector():set(17.6013641357422,41.1303024291992,-175.369445800781),356617,3112)
	AI:create_free("imitator",vector():set(13.8957996368408,40.6325912475586,-207.103958129883),352170,3110)
	AI:create_free("imitator",vector():set(58.6876487731934,45.9572601318359,-260.544982910156),404981,3114)
	AI:create_free("imitator",vector():set(58.6876487731934,45.9572601318359,-260.544982910156),404981,3114)
	AI:create_free("imitator",vector():set(56.4247131347656,40.8750076293945,-256.978088378906),402536,3114)
	AI:create_free("imitator",vector():set(62.013557434082,40.8754501342773,-257.889007568359),409206,3114)
	AI:create_free("imitator",vector():set(61.2656860351563,40.8751411437988,-263.562530517578),408351,3114)
	AI:create_free("imitator",vector():set(55.6032638549805,40.8755035400391,-262.710906982422),400910,3114)
	AI:create_free("imitator",vector():set(45.4872398376465,40.5109367370605,-252.432556152344),387744,3114)
	AI:create_free("imitator",vector():set(33.3227081298828,40.3606071472168,-243.254913330078),375267,3114)
	AI:create_free("imitator",vector():set(13.5879325866699,47.8379516601563,-230.732391357422),350469,3110)
end

function imitator_gospilal_spavn()
--hosp_3otsek_snezka_muha1
	AI:create_free("imitator_snezka",vector():set(-95.15917,28.38907,567.27117),1003,3038)
--hosp_3otsek_snezka_muha2
	AI:create_free("imitator_snezka",vector():set(-95.60807,28.52086,568.32916),845,3038)
--hosp_3otsek_holodez_krug1
	AI:create_free("imitator_holodez",vector():set(-95.49827,32.41429,613.68133),1024,3038)
--hosp_3otsek_holodez_krug2
	AI:create_free("imitator_holodez",vector():set(-96.06416,32.54857,614.63214),869,3038)
--hosp_3otsek_holodez_krug3
	AI:create_free("imitator_holodez",vector():set(-95.53624,32.58135,615.53179),1026,3038)
--hosp_3otsek_holodez_krug4
	AI:create_free("imitator_holodez",vector():set(-94.12352,32.463905,615.60363),1104,3038)
--hosp_3otsek_holodez_krug5
	AI:create_free("imitator_holodez",vector():set(-93.64558,32.35847,614.88037),1171,3038)
--hosp_3otsek_holodez_krug6
	AI:create_free("imitator_holodez",vector():set(-92.82126,32.22382,614.169372),1378,3038)
--hosp_3otsek_holodez_krug7
	AI:create_free("imitator_holodez",vector():set(-92.28500,32.23130,614.78918),1638,3038)
--hosp_3otsek_holodez_krug8
	AI:create_free("imitator_holodez",vector():set(-91.746139,32.26699,615.73327),1972,3038)
--hosp_3otsek_imitator_elektra1
	AI:create_free("imitator",vector():set(-93.587043,32.309429,614.39288),1171,3038)
--hosp_3otsek_imitator_elektra2
	AI:create_free("imitator",vector():set(-92.75412,32.16616,613.60137),1637,3038)
--hosp_3otsek_holodez1_muxa
	AI:create_free("imitator_holodez",vector():set(-94.68213,28.18796,565.45812),1085,3038)
--hosp_3otsek_holodez2_muxa
	AI:create_free("imitator_holodez",vector():set(-94.73439,28.27208,566.36437),1086,3038)
--hosp_3otsek_holodez3_muxa
	AI:create_free("imitator_holodez",vector():set(-95.12808,28.32499,566.57604),1002,3038)
--hosp_3otsek_holodez4_muxa
	AI:create_free("imitator_holodez",vector():set(-95.03950,28.38788,567.38183),1004,3038)
end

function imitator_kanaliy_spavn()
	AI:create_free("imitator_holodez",vector():set(-96.308708190918,-1.8240934610367,-19.150089263916),247176,3620)
	AI:create_free("imitator",vector():set(-94.969078063965,-1.824152469635,-20.891218185425),248712,3620)
	AI:create_free("imitator",vector():set(-95.195724487305,-1.8241112232208,-19.7877368927),248713,3620)
end

function pantera_dinamit_nevid (actor, npc)
    local mina = level_object_by_sid(story_ids.esc_mina_panera)
    if mina ~= nil then
		-- Грохаем Пантеру
		local npc = level_object_by_sid(story_ids.esc_pantera_bomba)
		if npc then
			npc:kill(mina)
		end
		start_real_timer("run", 1, "arhara_dialog.dell_esc_pantera()")
		-- Взрываем мину
		mina:explode(mina:id())
	end
end

--' Ара, паразит, подох раньше времени - будет вылет
function delete_khutor_zone2_restrictor()
	local se_obj = AI:story_object(story_ids.khutor_zone2)
	if se_obj then AI:release(se_obj, true) end
end

--' убираем рестриктор вместе с Седым - а то стрёмно...
function sedoy_del_restrictor()
	local se_obj = AI:story_object(story_ids.atp_sedoy_delete_restrictor)
	if se_obj then AI:release(se_obj, true) end
end

--' убираем Парфюмера1 из МГ
function dell_parfuym1()
	local se_obj = AI:object("dcity_parfumer")
	if se_obj then AI:release(se_obj, true) end
end

--' убираем Обморока из МГ
function dell_obmorok()
	local se_obj = AI:object("dcity_obmorok")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("dcity_bodyguard_obmorok")
	if se_obj then AI:release(se_obj, true) end
end

--' тайник-ящик у бандосов 3 гулага МГ
function spawn_yzik_3gulag()
	AI:create_free("m_inventory_box40", vector():set(-0.265,4.332,-0.748),357228,3633)
end

--' отдадим бабки за пользование ПДА
function operator_babki_otdat(t1,t2)
	local npc = t1:id() == 0 and t2 or t1
	dialogs.relocate_money(npc,3000,"out")
end

--' убираем рестрикторы Бленда
function dell_spawn1_bland1_restr()
	local se_obj = AI:story_object(story_ids.spawn1_bland1_restrictor)
	if se_obj then AI:release(se_obj, true) end
end

function dell_spawn_bland_restr()
	local se_obj = AI:story_object(story_ids.spawn_bland_restrictor)
	if se_obj then AI:release(se_obj, true) end
end

--' Бленд отдал флешку
function bland_otdal_flesh(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "bland_flash","in")
	start_real_timer("run", 10, "arhara_dialog.return_community()")
end
function return_community()
	if level.name() == "l04_darkvalley" then
		start_real_timer("run", 10, "arhara_dialog.return_community()")
	else
		Actor:set_character_community("actor", 0, 0)
		dell_dark_bland()
	end
end

--' убираем Блэнда из ТД
function dell_dark_bland()
	local se_obj = AI:object("dark_bland")
	if se_obj then AI:release(se_obj, true) end
end

--' таракашки в доме МГ
function mg_spawp_tarakashki()
	AI:create_free("tarakan_strong",vector():set(-170.146,15.623,57.121),166135,3599)
	AI:create_free("tarakan_normal",vector():set(-170.146,15.623,57.121),166135,3599)
	AI:create_free("tarakan_strong",vector():set(-173.322,15.624,54.904),162448,3599)
	AI:create_free("tarakan_normal",vector():set(-173.322,15.624,54.904),162448,3599)
	AI:create_free("tarakan_strong",vector():set(-166.88,15.624,54.501),169708,3599)
	AI:create_free("tarakan_normal",vector():set(-166.88,15.624,54.501),169708,3599)
	AI:create_free("tarakan_strong",vector():set(-162.841,15.626,48.662),173338,3600)
	AI:create_free("tarakan_normal",vector():set(-162.841,15.626,48.662),173338,3600)
	AI:create_free("tarakan_strong",vector():set(-174.055,15.624,40.553),161636,3599)
	AI:create_free("tarakan_normal",vector():set(-174.055,15.624,40.553),161636,3599)
	AI:create_free("tarakan_strong",vector():set(-179.561,15.623,47.734),156157,3599)
	AI:create_free("tarakan_normal",vector():set(-179.561,15.623,47.734),156157,3599)
	AI:create_free("tarakan_strong",vector():set(-177.969,15.625,50.948),157710,3599)
	AI:create_free("tarakan_normal",vector():set(-177.969,15.625,50.948),157710,3599)
end
	
--' заспавним пробного товарища в бункере
function spawn_biblio_bunker()
--не будем ничего спавнить, ибо из-за него вылеты
--local obj = AI:create_free("tushkano_normal",vector():set(5.312,-19.440,25.189),7347,2768)
end

--' звук библиотекаря
function zvuk_bibliotekar(sound_name)
	local snd_obj = xr_sound.get_safe_sound_object([[monsters\alligator]])
	snd_obj:play_no_feedback(Actor, sound_object.s2d, 0, vector(), 1.0)
end

function set_sych()
	local obj = AI:object("stalker_marsh_sysh") 
	if obj then
		amk.add_spot_on_map(obj.id,"crlc_big","Группа Сыча")
	end
end
function remove_sych_metka()
	local obj = AI:object("stalker_marsh_sysh")
	if obj then
		level.map_remove_object_spot(obj.id,"crlc_big")
	end
end

--' убираем рестриктор видео в Лиманске
function dell_video_finish_restr()
	local se_obj = AI:story_object(story_ids.video_finish_dopa_restrictor)
	if se_obj then
		AI:release(se_obj, true)
	end
end

--' убираем скриптовый переход лима-МГ
function del_pereod_lima_dcity()
end

--' убираем Нормана и Парфюмера2 из МГ
function dell_dcity_norman()
	local se_obj = AI:object("parfumer_dcity_shtab")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("dcity_kontrol_stalk")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("dcity2_dok2_bolot2_vid")
	if se_obj then AI:release(se_obj, true) end
	start_game_timer("run", 0, 1, math.random(20, 40), "arhara_dialog.dok_return_to_pripyat()")
end

function dok_return_to_pripyat()
	local obj = AI:story_object(story_ids.Doktor)
	if obj == nil then AI:create(AI:spawn_id(story_ids.Doktor)) end
	news_manager.send_tip("dok_return_to_pripyat", nil, "doctor", 30000)
end

function dell_torgov_restr()
	local se_obj = AI:object("atp_torgovetz_sms_restrictor")
	if se_obj then AI:release(se_obj, true) end
end

function dell_restri()
	local se_obj = AI:object("agro_muxa_sms1_restrictor")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("otshel_chel_dell_restrictor")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("petrenko_chel_dell_restrictor")
	if se_obj then AI:release(se_obj, true) end
end

function delet_otshel()
	local se_obj = AI:object("final_otshelnik")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("final_petrenko")
	if se_obj then AI:release(se_obj, true) end
end

--' удаляем рестрикторы сходки авторитетов
function dell_sxodnyak()
	local se_obj = AI:object("muxa_chel_dell_restrictor")
	if se_obj then AI:release(se_obj, true)  end
	se_obj = AI:object("otshel_chel_dell_restrictor")
	if se_obj then AI:release(se_obj, true) end
	se_obj = AI:object("petrenko_chel_dell_restrictor")
	if se_obj then AI:release(se_obj, true) end
end

function nax_poshel()
	local se_obj = AI:object("chernomor_zombi")
	if se_obj then AI:release(se_obj, true) end
end


--' убираем Черномора-зомби
function dell_chernomor_zombi1()
	local se_obj = AI:object("chernomor_zombi1")
	if se_obj then AI:release(se_obj, true) end
end
function del_chern_zombi1()
	local se_obj = AI:story_object(story_ids.chernomor_zombi)
	if se_obj then AI:release(se_obj, true) end
end

function delete_eartquake()
	local se_obj = AI:object("aes2_space_restrictor_eartquake")
	if se_obj then AI:release(se_obj, true) end
end

function semetskiy_obmen_have()
	return 
		inventory.search("detektor_amorf",1) and
		inventory.search("stco",1) and
		inventory.search("red_mozg",1)
end
function semetskiy_obmen_not_have()
	return not semetskiy_obmen_have()
end
function semetskiy_obmen_done()
	shiftCheckDropItem()
	inventory.out_items("detektor_amorf",1)
	inventory.out_items("stco",1)
	inventory.out_items("red_mozg",1)
	inventory.give_items("det_artefact_super", 1)
end

